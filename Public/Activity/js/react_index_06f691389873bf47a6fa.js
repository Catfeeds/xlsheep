webpackJsonpForReact([5,7],{0:function(e,t,o){"use strict";var i=o("./components/vendor/react.min.js"),s=o("./components/vendor/react-dom.min.js"),n=o("./components/app/portal_v2/index.js"),a=o("./components/common/index.js"),r=o("./components/common/uiWidgets/ProvideContext.js");o("./static/src/assets/scss/index.scss"),o("./static/src/assets/scss/module/_banner.scss"),o("./static/src/assets/scss/module/_quick_entrance_v2.scss");var l=document.getElementById("main");a.page.prepare({requireLogin:!1,shareInfo:{forceShareToWeChatTimeline:!0},regEvents:{onSceneReturn:function(e){if(e=e||{},e.url)return void a.navigation.reload(e.url)}}},function(){return s.render(i.createElement(r,null,i.createElement(n,{data:window.rawData})),l)})},"./static/src/assets/scss/module/_quick_entrance_v2.scss":function(e,t){},"./components/widgets/BaseList2/index.js":function(e,t,o){"use strict";function i(e,t,o){var i=b.getOffsetTopOnBody(e),s=i+e.offsetHeight/2;return s>=t&&s<=o}function s(e){return N[e]}function n(e){var t={goodsID:e};return N[e]=t,t}function a(e){var t=s(e);t&&(t.id="",t.logged=!1,t.timer&&(clearTimeout(t.timer),t.timer=null))}function r(e,t){var o=s(e);if(o||(o=n(e),f.util.merge(t,o)),!o.logged&&null==o.timer&&f.logger.isImprTester()){o.id||(o.id=f.logger.getImprID());var i=o.id;o.timer=setTimeout(function(){o.logged=!0,o.timer=null,i===o.id&&f.logger.trackingRecord(f.util.extend({impr_id:o.id,op:"impr",event:o.event,page_name:o.pageName,goods_id:o.goodsID,event_type:o.eventType,is_app:o.isApp,idx:o.index},o.params))},f.logger.getImprTime())}}var l=o("./components/vendor/react.min.js"),c=o("./components/widgets/GoodsListItem/index.js"),p=o("./components/widgets/GoodsListSlip/index.js"),d=o("./components/widgets/SuperSpikeListItem/index.js"),u=o("./components/widgets/SingleListItem/index.js"),h=o("./components/widgets/DoubleGridGoodsItem/index.js"),m=o("./components/widgets/RankGoodsListItem/index.js"),g=o("./components/widgets/SubjectSnapshot/index.js"),f="undefined"!=typeof window?o("./components/common/index.js"):{},v=o("./constants/constant_ui.js").ImgBase64,y=o("./constants/tracking/rank.js"),b=o("./components/common/ui/util.js"),_=("undefined"!=typeof window?o("./components/common/platform.js"):{},o("./components/widgets/SingleListItemV2/index.js")),I=o("./components/widgets/DoubleGridItemV2/index.js"),w=o("./components/widgets/PortalListItem/index.js"),S={show:"top-button-show",hide:"top-button-hide"},x={show:"pull-up-show",hide:"pull-up-hide"},k={defaultLabel:"正在加载中...",noMoreItem:"没有更多了...",nothingAtAll:"没有更多了..."},E=10,T={DEFAULT:0,LOADING:1,COMPLETE:2},D=10,C=50,P=!1,N={},j=l.createClass({displayName:"BaseList",getInitialState:function(){return{goTopClass:"go-top top-button-hide",topNum:10,loadingClass:x.show,loadingTxt:k.defaultLabel,pullUpShow:!0,list:[],lastShowIndex:0,waitForLoading:!1,loadListDataStatus:T.DEFAULT}},getDefaultProps:function(){return{list:[],currentList:[],doImpr:!1,doTubesImpr:!1,tubeImprModel:null,needUpdateFavorite:!1,isShowed:!1,nextSp:0,onLoadedAll:function(){},scrollerContainerId:null,useOnce:!1}},scrollerContainer:{},prepareView:function(e){this.doPreviousPageScroll()},doPreviousPageScroll:function(){if(!f.page.hasPageScrolled){var e=f.page.getPageScrollData();e.sp>0?(this.scrollerContainer.scrollTop=e.sp,e.sp=0):this.scrollerContainer.scrollTop=0,f.page.hasPageScrolled=!0,f.page.doAfterJSApiReady(function(){var t={sp:null,item_index:null,goods_id:null};e.goodsID||delete t.goods_id,f.navigation.replaceQuery(t)})}},showLoadMore:function(){this.setState({loadingClass:x.show,loadingTxt:k.defaultLabel,pullUpShow:!0})},hideLoadMore:function(e){this.setState({loadingClass:x.hide,loadingTxt:e?k.nothingAtAll:k.noMoreItem,pullUpShow:!1})},checkLoadMoreData:function(){var e=this;if(!([T.LOADING,T.COMPLETE].indexOf(e.state.loadListDataStatus)>=0))return!(!e.props.loadMoreDataFunc||!e.props.isShowed)&&void(e.props.list.length-e.state.list.length>E||(e.setState({loadListDataStatus:T.LOADING}),e.props.loadMoreDataFunc(function(t){e.loadMoreData(t)},!1,e.props.params)))},loadMoreData:function(e){var t;return!e||e.length<=0?(t=T.COMPLETE,self.loadMoreDataFunc&&self.loadMoreDataFunc(null,!0,self.props.params),void this.setState({loadListDataStatus:t})):(t=T.DEFAULT,this.setState({loadListDataStatus:t}),void(this.scrollerContainer.scrollTop-=1))},onScroll:function(){if(!P&&this.props.isShowed){var e=this;b.lazyLoadOnScroller(this.refs.listItems,null,{querySelectorAll:".base-list-wrapper img"},e.scrollerContainer),e.updateTopButtonStatus(),e.isPullDown()&&e.showListLoading(),e.checkLoadMoreData(),e.props.doImpr&&e.checkImpr(),e.props.doTubesImpr&&e.props.tubeImprModel&&e.props.tubeImprModel.onScroll()}},checkImpr:function(){var e=this.scrollerContainer.scrollTop,t=e+this.scrollerContainer.offsetHeight-this.cacheInfo.footerHeight;e+=this.cacheInfo.navBarHeight;for(var o=document.getElementsByClassName("goods-image")||[],s=0;s<o.length;s++){var n=o[s].getElementsByTagName("img")[0];if(n&&o[s].dataset.log){var l={};try{l=JSON.parse(o[s].dataset.log)||{}}catch(e){continue}var c=l.goodsID.toString();c&&(i(n,e,t)?r(c,l):a(c))}}},showListLoading:function(e){var t=this,o=t.state.list.length,i=t.state.lastShowIndex+1;if(o>i){var s=Math.min(o,i+D)-1;t.setState({lastShowIndex:s}),i=s+1}if(o===i&&o<t.props.list.length&&!t.state.waitForLoading){t.setState({waitForLoading:!0}),t.showLoadMore();var n=this.props.list.slice(o,D+o);t.setState({waitForLoading:!1,list:t.state.list.concat(n)},function(){"undefined"!=typeof window&&"function"==typeof e&&e()})}else i>=t.props.list.length&&t.hideLoadMore(!0)},updateTopButtonStatus:function(){var e="go-top",t=this.isNearTop()?S.hide:S.show;this.setState({goTopClass:[e,t].join(" ")})},goTop:function(){this.scrollerContainer.scrollTop=0,this.onScroll(),P=!0,setTimeout(function(){P=!1},C),this.props.goTopTrackingParams?f.logger.trackingRecord(this.props.goTopTrackingParams):f.logger.trackingRecord({op:"click",event:"back_top_clk",page_name:"index"})},isNearTop:function(){return this.useContainer?this.scrollerContainer.scrollTop<this.scrollerContainer.offsetHeight:this.scrollerContainer.scrollTop<f.ui.getWindowHeight()},isPullDown:function(){return this.useContainer?this.scrollerContainer.scrollTop+2*this.scrollerContainer.offsetHeight>=this.scrollerContainer.scrollHeight:this.scrollerContainer.scrollTop+2*f.ui.getWindowHeight()>=document.body.scrollHeight},componentWillMount:function(){var e=this;this.setState({list:e.props.currentList,lastShowIndex:(e.props.currentList||[]).length-D}),this.showListLoading()},componentDidMount:function(){var e=this.props.scrollerContainerId;if(this.scrollerContainer=document.body,e){var t=document.getElementById(e);t&&(this.scrollerContainer=t,this.useContainer=!0)}this.useContainer?(this.scrollerContainer.addEventListener("scroll",this.onScroll,!1),b.addGoTopButton(this.scrollerContainer,document.body)):window.addEventListener("scroll",this.onScroll,!1),this.cacheNodeInfo(),this.prepareView(),this.onScroll()},isCalledLoadedAll:!1,componentDidUpdate:function(e,t){var o=this;!this.props.isShowed||e.isShowed||0!==this.scrollerContainer.scrollTop&&0!==this.state.list.length||this.props.useOnce||this.showListLoading(function(){o.onScroll()}),0!==this.props.nextSp&&e.nextSp!==this.props.nextSp&&(this.scrollerContainer.scrollTop=this.props.nextSp),!this.isCalledLoadedAll&&this.state.loadingClass===x.hide&&this.props.isShowed&&this.state.loadListDataStatus===T.COMPLETE&&this.state.list.length>=this.props.list.length&&(this.isCalledLoadedAll=!0,this.props.onLoadedAll&&this.props.onLoadedAll())},render:function(){var e=[],t=this,o={},i=!1;this.state.list.forEach(function(s,n){var a=s.data||s,r=s.props||s,f=r.key||a.goodsID||a.goodsId||a.subjectID;if(!f||!o[f])switch(o[f]=!0,r.listItemName){case"goodsListItem":e.push(l.createElement(c,{goodsID:a.goodsID,"data-index":n,key:f,imgUrl:a.imgUrl,goodsName:a.goodsName,doImpr:r.doImpr,eventDesc:a.eventDesc,salePrice:a.salePrice,inViewIndex:n,needUpdateFavorite:t.props.needUpdateFavorite,eventType:a.eventType}));break;case"goodsListSlip":e.push(l.createElement(p,{key:a.subjectID,"data-index":n,goodsList:a.goodsList,subjectID:a.subjectID,subjectName:a.subjectName,inViewIndex:n,subjectVisitTrackingData:r.subjectVisitTrackingData,goodsVisitTrackingData:r.goodsVisitTrackingData}));break;case"superSpikeListItem":e.push(l.createElement(d,{key:f,"data-index":n,serverTime:a.serverTime,startTime:a.startTime,endTime:a.endTime,goodsList:a.goodsList,inViewIndex:n,extraTrackingParams:r.superSpikeVisitTrackingData}));break;case"portalListItem":e.push(l.createElement(w,{itemProps:r,goodsID:a.goodsID,goodsData:a,key:f,inViewIndex:n}));break;case"singleListItem":if(r.withLocalGroups){e.push(l.createElement(_,{itemProps:r,goodsID:a.goodsID,goodsData:a,key:f,inViewIndex:n,extraTrackingParams:r.extraTrackingParams,referPageName:r.referPageName,hasSlipAbove:r.hasSlipAbove}));break}e.push(l.createElement(u,{goodsID:a.goodsID,key:f,imgUrl:a.imgUrl,goodsName:a.goodsName,customerNum:a.customerNum,salePrice:a.salePrice||a.price,normalPrice:a.normalPrice,inViewIndex:n,eventType:a.eventType,isApp:a.isApp,buyButtonTxt:a.buyButtonTxt,extraTrackingParams:r.extraTrackingParams,referPageName:r.referPageName,buttonTrackingParams:r.buttonTrackingParams}));break;case"doubleGridGoodsItem":case"catGoodsItem":if(r.withLocalGroups){i=!0,e.push(l.createElement(I,{itemProps:r,goodsID:a.goodsID,goodsData:a,key:f,inViewIndex:n,doImpr:r.doImpr,imprParams:r.imprParams,ad:r.ad,extraTrackingParams:r.extraTrackingParams,referPageName:r.referPageName}));break}e.push(l.createElement(h,{inViewIndex:n,key:a.goodsId||a.goodsID,imgUrl:a.imgUrl,soldQuantity:a.soldQuantity,cnt:a.cnt,goodsName:a.goodsName,price:a.salePrice||a.price,customerNum:a.customerNum,goodsId:a.goodsId||a.goodsID,forwardUrl:r.forwardUrl,doImpr:r.doImpr,imprParams:r.imprParams,doTubesImpr:t.props.doTubesImpr,tubeImprModel:t.props.tubeImprModel,itemImprParams:r.itemImprParams,blockID:r.blockID,ad:r.ad,tag:a.tag,extraTrackingParams:r.extraTrackingParams}));break;case"rankNewGoodsItem":e.push(l.createElement(h,{forwardUrl:r.forwardUrl,extraTrackingParams:y.VisitGoodsInNewRank,inViewIndex:n,key:f,imgUrl:a.thumbUrl,goodsName:a.goodsName,goodsId:a.goodsId,customerNum:a.customerNum,price:a.salePrice,timeSpanDesc:a.timeSpanDesc}));break;case"rankHotGoodsItem":e.push(l.createElement(m,{forwardUrl:r.forwardUrl,trackingInfo:y.VisitGoodsInHotRank,inViewIndex:n,key:f,imgUrl:a.thumbUrl,goodsName:a.goodsName,goodsId:a.goodsId,customerNum:a.customerNum,salePrice:a.salePrice,marketPrice:a.marketPrice,cntDesc:a.cntDesc}));break;case"subjectItem":var v=a;e.push(l.createElement(g,{inViewIndex:n,key:v.key,subjectId:v.subjectID,list:v.goodsList,banner:v.banner,subjectDesc:v.subjectDesc,totalGoodsSales:v.totalGoodsSales,totalGoodsNum:v.totalGoodsNum}))}});var s="load-more "+this.state.loadingClass,n="loading-text";"pull-up-hide"===this.state.loadingClass&&(n+=" middle");var a=(v.LoadingIcon,this.generateGoTop());return l.createElement("div",{className:"base-list-wrapper"+(i?" double-list-v2":""),ref:"listItems"},e,l.createElement("div",{className:s},l.createElement("div",{className:"list-center",style:{display:"pull-up-hide"===this.state.loadingClass?"none":""}},l.createElement("span",{className:"img-rotate-bg"}),l.createElement("span",{className:n},this.state.loadingTxt))),a)},generateGoTop:function(){if(!this.useContainer)return l.createElement("div",{className:this.state.goTopClass,onClick:this.goTop},l.createElement("span",null,"顶部"))},cacheNodeInfo:function(){if(!this.cacheInfo){var e={};e.footerHeight=(document.getElementsByClassName("footer")[0]||{}).offsetHeight||0,e.navBarHeight=(document.getElementsByClassName("cf-container")[0]||{}).offsetHeight||0,this.cacheInfo=e}}});e.exports=j},"./components/widgets/GoodsListItem/index.js":function(e,t,o){"use strict";var i=o("./components/vendor/react.min.js"),s="undefined"!=typeof window?o("./components/common/index.js"):{},n=i.createClass({displayName:"GoodsListItem",getInitialState:function(){return{imgLogData:"",titleLogData:"",btnLogData:"",defaultImg:"image/default.png",imgHeight:0,showPrice:"",buyButtonTxt:"去开团",isLike:!1,likeImg:"image/unlike.png",priceStyle:{width:0},imprID:"",imprLogged:"",imprTime:null}},getDefaultProps:function(){return{imgUrl:"",inViewIndex:0,goodsID:"",goodsName:"",eventDesc:"",salePrice:0,doImpr:"",needUpdateFavorite:!1,startLog:!1,stopLog:!1}},handleGoodsClick:function(e){e&&e.preventDefault();var t=this,o={queries:{item_index:t.props.inViewIndex}};setTimeout(function(){s.page.setPageScrollPosition(o,function(){s.navigation.forward("goods.html?goods_id="+t.props.goodsID)})},0)},clickGoodsLike:function(e){var t=this,o=this.props.goodsID,i=s.likeUtil;if(e&&e.stopPropagation(),!i.isGoodsLikeDoing()){var n=function(){t.clickGoodsLike()},a="goods.html?like_flag=true&goods_id="+o;if(i.checkLogin(n,a,!0)){var r=i.checkGoodsLike(o);t.props.imprID;s.util.call(r?i.cancelGoodsLike:i.doGoodsLike,o,function(){r=i.checkGoodsLike(o),t.state.imprID&&s.logger.trackingRecord({impr_id:t.state.imprID,op:"click",click:r?"goods_favorite":"goods_cancel_favorite",goods_id:o,page_module:"goods_list",page_src:"favorite_btn"}),t.switchLike(r)})}}},switchLike:function(e){var t=s.image.getCDNImgURL("like/v2/unlike.png");e&&(t=s.image.getCDNImgURL("like/v2/like.png")),this.setState({likeImg:t,isLike:e})},componentWillMount:function(){},stopImpr:function(){var e=this.state;this.setState({imprID:"",imprLogged:!1}),e.imprTimer&&(clearTimeout(e.imprTimer),this.setState({imprTimer:null}))},logImpr:function(){var e=this.state,t=this;if(!e.imprLogged&&null==e.imprTimer&&s.logger.isImprTester()){e.imprID||(e.imprID=s.logger.getImprID());var o=e.imprID,i=this.props.goodsID,n=setTimeout(function(){t.setState({imprLogged:!0,imprTimer:null}),o===e.imprID&&s.logger.trackingRecord({impr_id:e.imprID,op:"impr",goods_id:i,page_module:"goods_list",page_src:"goods_image",event:"goods_show"})},s.logger.getImprTime());t.setState({imprTimer:n})}},componentWillReceiveProps:function(e){if(e.needUpdateFavorite){var t=s.likeUtil.checkGoodsLike(this.props.goodsID);this.switchLike(t)}},componentDidMount:function(){var e=s.ui.getWindowWidth(),t=.46875*e+"px",o=Math.min(.4*e+27,220),i=o>170?"tuan_g_price price-big":"tuan_g_price";this.switchLike(s.likeUtil.checkGoodsLike(this.props.goodsID)),this.props.eventType===s.constant.EventType.FreeTrial&&this.setState({buyButtonTxt:"免费申请"});var n=this.props.doImpr&&s.logger.isImprTester()?s.logger.getImprID():"";this.setState({imgHeight:t,showPrice:i,priceStyle:{width:o},imprID:n}),this.setLogData(n),this.logImpr()},setLogData:function(e){var t=this.props;this.setState({imgLogData:e?JSON.stringify({impr_id:e,click:"goods_buy",goods_ids:t.goodsID,page_module:"goods_list",page_src:"goods_image"}):"",titleLogData:e?JSON.stringify({impr_id:e,click:"goods_buy",goods_ids:t.goodsID,page_module:"goods_list",page_src:"goods_title"}):"",btnLogData:e?JSON.stringify({impr_id:e,click:"goods_buy",goods_ids:t.goodsID,page_module:"goods_list",page_src:"goods_buy_btn"}):""})},render:function(){return i.createElement("div",{className:"tuan_g",onClick:this.handleGoodsClick},i.createElement("div",{className:"tuan_g_img","data-log":this.state.imgLogData},i.createElement("img",{src:this.state.defaultImg,"data-url":this.props.imgUrl,"data-index":this.props.inViewIndex,height:"9.375rem"})),i.createElement("div",{className:"tuan_g_info",dataLog:this.state.titleLogData},i.createElement("p",{className:"tuan_g_name"},this.props.goodsName)),i.createElement("div",{className:"tuan_g_core","data-log":this.state.btnLogData},i.createElement("div",{className:"tuan_g_core_img"}),i.createElement("div",{className:this.state.showPrice,style:this.state.priceStyle},i.createElement("span",null,this.props.eventDesc),i.createElement("b",null,"￥",this.props.salePrice)),i.createElement("div",{className:"tuan_g_btn"},this.state.buyButtonTxt)),i.createElement("div",{className:"like goods_list_like"},i.createElement("img",{src:this.state.likeImg}),i.createElement("div",{onClick:this.clickGoodsLike,className:"like_click_button"})))}});e.exports=n},"./components/widgets/GoodsListSlip/index.js":function(e,t,o){"use strict";var i=o("./components/vendor/react.min.js"),s="undefined"!=typeof window?o("./components/common/index.js"):{},n=o("./constants/constant_ui.js").ImgBase64,a=o("./components/common/ui/util.js"),r=i.createClass({displayName:"GoodsListSlip",getInitialState:function(){return{defaultImg:n.DefaultSquare,scrollClass:"subject-scroll-goods_list_item",scrolling:!1,needUpdate:!0}},getDefaultProps:function(){return{subjectName:"",goodsList:[],subjectID:"",inViewIndex:0,scrollData:{},subjectVisitTrackingData:null,goodsVisitTrackingData:null}},getTransferParams:function(){var e=this,t=this.refs.tuanItems,o={queries:{item_index:e.props.inViewIndex}};return t&&t.scrollLeft&&(o.queries.subject_scroll=e.props.inViewIndex+"_"+t.scrollLeft),o},forwardGoods:function(e){e.preventDefault();var t=this,o=this.getTransferParams(),i=e.currentTarget.dataset,n=i.id,a=parseInt(i.index,10);s.page.setPageScrollPosition(o,function(){var e=function(){var e="goods.html?goods_id="+n;s.navigation.forward(e)},o=t.props.goodsVisitTrackingData;o?(o.section_id=t.props.subjectID,o.goods_id=n,o.idx=a,s.logger.trackingRecord(o,e)):e()})},forwardSubjects:function(e){e&&(e.preventDefault(),e.stopPropagation());var t=this,o=this.getTransferParams();s.page.setPageScrollPosition(o,function(){var e=function(){var e="subject.html?subject_id="+t.props.subjectID;s.navigation.forward(e)},o=t.props.subjectVisitTrackingData;o?(o.section_id=t.props.subjectID,o.idx=t.props.inViewIndex,s.logger.trackingRecord(o,e)):e()})},onSubjectScroll:function(e,t){var o=this.refs.tuanItems;0===e.detail&&e.stopPropagation();var i=a.lazyLoadOnScroller(o);this.setState({needUpdate:i})},prepare:function(e){var t=this;e=e||{};var o=e.subjectScroll;if(o){var i=o.split("_"),n=parseInt(i[0],10),a=parseInt(i[1],10);if(n===t.props.inViewIndex&&a>0){var r=t.refs.tuanItems;if(r){setTimeout(function(){r.scrollLeft=a},0);var l=function(){s.navigation.replaceURL(s.url.buildURL({subject_scroll:null}))};window.wxReady||!s.platform.isWeChatPlatform()?l():(window.wxAfterReady=window.wxAfterReady||[],window.wxAfterReady.push(l))}}}},componentDidUpdate:function(e){this.setState({needUpdate:!1})},shouldComponentUpdate:function(e,t){return t.needUpdate},componentDidMount:function(){var e=s.page.getPageScrollData();this.prepare(e);var t=[this.state.scrollClass,this.props.inViewIndex].join("-");this.setState({scrollClass:t})},render:function(){var e=this,t=this.props.goodsList.map(function(t,o){return i.createElement("li",{key:t.goodsID,"data-id":t.goodsID,onClick:e.forwardGoods,"data-index":o},i.createElement("div",{className:"std-goods-image-square"},i.createElement("img",{"data-url":t.thumbUrl})),i.createElement("p",{className:"goods-name"},t.goodsName),i.createElement("div",{className:"goods-price"},i.createElement("i",null,"￥"),t.price))});return i.createElement("div",{className:"goods-list-slip"},i.createElement("div",{className:"slip-head",onClick:this.forwardSubjects},i.createElement("p",null,this.props.subjectName),i.createElement("div",{className:"read-more",onClick:this.forwardSubjects},i.createElement("span",null,"查看更多"))),i.createElement("ul",{onScroll:this.onSubjectScroll,className:"detail-goods "+this.state.scrollClass,ref:"tuanItems"},t))}});e.exports=r},"./components/widgets/SuperSpikeListItem/index.js":function(e,t,o){"use strict";var i=o("./components/vendor/react.min.js"),s="undefined"!=typeof window?o("./components/common/index.js"):{},n=(o("./components/widgets/TimeMeter/index.js"),o("./constants/constant_ui.js").ImgBase64),a=i.createClass({displayName:"SuperSpikeListItem",getInitialState:function(){return{subjectNameLogData:{},defaultImg:n.DefaultSquare,maxLen:3,goodsItemStyle:{width:0},superGoodsStyle:{width:0,height:0},goodsImgStyle:{width:0,height:0}}},getDefaultProps:function(){return{goodsList:[],serverTime:"",startTime:"",endTime:"",inViewIndex:0,extraTrackingParams:null}},forwardSuperSpike:function(e){e.preventDefault();var t={queries:{item_index:this.props.inViewIndex}},o=this;s.page.setPageScrollPosition(t,function(){var e=function(){Navigation.forwardSubjectsPage({subjects_id:14})};o.props.extraTrackingParams?s.logger.trackingRecord(o.props.extraTrackingParams,e):e()})},componentDidMount:function(){var e=s.ui.getWindowWidth(),t=(e-4)/3,o=t-6;this.setState({goodsItemStyle:{width:t+"px"},superGoodsStyle:{width:o+"px",height:o+18+"px"},goodsImgStyle:{width:o+"px",height:o+"px"}})},getDiscount:function(e,t){if(!e||!t)return 0;var o=Math.floor(e/t*100)/10;return o%1===0&&0!==o&&(o=o.toFixed(1)),o},render:function(){var e=this,t=[];return this.props.goodsList.forEach(function(o,s){var n=e.getDiscount(o.price,o.marketPrice);s<e.state.maxLen&&t.push(i.createElement("li",{key:o.goodsID,style:e.state.goodsItemStyle},i.createElement("div",{className:"tuan-super-img",style:e.state.superGoodsStyle},i.createElement("img",{src:e.state.defaultImg,"data-url":o.thumbUrl,style:e.state.goodsImgStyle}),i.createElement("div",{className:"super-spike-logo"},i.createElement("img",{src:o.logo}))),i.createElement("div",{className:"super-spike-price"},i.createElement("div",null,i.createElement("b",null,"￥"),i.createElement("b",{className:"price-num"},o.price)),i.createElement("div",{className:"tuan-super-discount"},i.createElement("span",{className:"number"},n),i.createElement("span",{className:"word"},"折")))))}),i.createElement("div",{className:"tuan-super-spike",onClick:this.forwardSuperSpike},i.createElement("div",{className:"tuan-super-head"},"超值大牌"),i.createElement("ul",{className:"tuan-super-bd"},t),i.createElement("div",{className:"tuan-read-more"},"查看更多"))}});e.exports=a},"./components/widgets/TimeMeter/index.js":function(e,t,o){"use strict";var i=o("./components/vendor/react.min.js"),s=["距抢购结束:","距抢购开始:"],n={timeMeterContent:"tm-content",timeMeterNumber:"tm-number",timeMeterHMS:"tm-hms"},a="tm-bg-red",r=function(e){return e<10?"0"+e:e+""},l=i.createClass({displayName:"TimeMeter",getInitialState:function(){return{serverTime:"",startTime:"",endTime:"",content:"",leftDays:"00",leftHours:"00",leftMinutes:"00",leftSeconds:"00",timeMeterContent:n.timeMeterContent,timeMeterNumber:n.timeMeterNumber,timeMeterHMS:n.timeMeterHMS,numBgClass:"",timeMeterNumberWithBg:n.timeMeterNumber}},getDefaultProps:function(){return{serverTime:Date.now(),startTime:Date.now(),endTime:Date.now(),loadCallback:function(){},style:"small"}},componentWillMount:function(){this.setState({serverTime:parseInt(this.props.serverTime,10),startTime:parseInt(this.props.startTime,10),endTime:parseInt(this.props.endTime,10)})},componentDidMount:function(){this.initStyle(),this.changeEndTime()},changeEndTime:function(){var e=this,t={},o=this.state.startTime>this.state.serverTime?this.state.startTime-this.state.serverTime:this.state.endTime-this.state.serverTime,i=o,n=Math.floor(i/60),l=Math.floor(n/60),c=Math.floor(l/24);c%=365,l%=24,n%=60,i=Math.floor(i%60),l+=24*c,this.props.loadCallback&&(this.state.serverTime>=this.state.startTime&&this.state.serverTime<this.state.endTime?this.props.loadCallback(!0):this.props.loadCallback(!1)),this.state.startTime-this.state.serverTime>0?t.content=s[1]:t.content=s[0],o>0?(t.leftHours=r(l),t.leftMinutes=r(n),t.leftSeconds=r(i),t.leftDays=r(c),c<=0&&l<=0&&this.props.startTime<=this.props.serverTime&&"small"!==this.props.style&&(t.numBgClass=a),t.serverTime=this.state.serverTime+1,window.setTimeout(function(){e.changeEndTime.call(e)},1e3)):(t.leftHours="00",t.leftMinutes="00",t.leftSeconds="00",t.leftDays="00","small"!==this.props.style&&(t.numBgClass=a)),t.numBgClass&&(t.timeMeterNumberWithBg=(this.state.timeMeterNumber,a).join(" ")),this.setState(t)},initStyle:function(){var e=this.props.style;"small"===e&&this.setState({timeMeterContent:[n.timeMeterContent,e].join("-"),timeMeterNumber:[n.timeMeterNumber,e].join("-"),timeMeterHMS:[n.timeMeterHMS,e].join("-"),timeMeterNumberWithBg:[n.timeMeterNumber,e].join("-")})},render:function(){return i.createElement("section",{className:"time-meter"},i.createElement("span",{className:this.state.timeMeterContent},this.state.content),i.createElement("span",{className:this.state.timeMeterNumberWithBg},this.state.leftHours[0]),i.createElement("span",{className:this.state.timeMeterNumberWithBg},this.state.leftHours[1]),i.createElement("span",{className:this.state.timeMeterHMS},"时"),i.createElement("span",{className:this.state.timeMeterNumberWithBg},this.state.leftMinutes[0]),i.createElement("span",{className:this.state.timeMeterNumberWithBg},this.state.leftMinutes[1]),i.createElement("span",{className:this.state.timeMeterHMS},"分"),i.createElement("span",{className:this.state.timeMeterNumberWithBg},this.state.leftSeconds[0]),i.createElement("span",{className:this.state.timeMeterNumberWithBg},this.state.leftSeconds[1]),i.createElement("span",{className:this.state.timeMeterHMS},"秒"))}});e.exports=l},"./components/widgets/SingleListItem/index.js":function(e,t,o){"use strict";var i=o("./components/vendor/react.min.js"),s="undefined"!=typeof window?o("./components/common/index.js"):{},n=o("./components/common/ui/util.js"),a=i.createClass({displayName:"SingleListItem",getInitialState:function(){return{imgLogData:""}},getDefaultProps:function(){return{imgUrl:"",inViewIndex:0,goodsID:"",goodsName:"",salePrice:0,normalPrice:0,customerNum:0,buyButtonTxt:"去开团",extraTrackingParams:null,referPageName:null,buttonTrackingParams:null,eventType:0,isApp:0}},handleGoodsClick:function(e){var t=this,o=t.props.extraTrackingParams;if(e){e.preventDefault(),e.stopPropagation();var i=e.currentTarget.children[3]||null;n.isNodeInPath(i,e.target,e.currentTarget)&&t.props.buttonTrackingParams&&(o=t.props.buttonTrackingParams)}var a={queries:{item_index:t.props.inViewIndex}};s.page.setPageScrollPosition(a,function(){function e(){var e=t.props.forwardUrl||"goods.html?goods_id="+t.props.goodsID;t.props.referPageName&&(e=s.url.buildURL({refer_page_name:t.props.referPageName},e)),e+="&is_spike="+(2===t.props.eventType?"1":"0"),s.navigation.forward(e)}o?(o.idx=t.props.inViewIndex,o.goods_id=t.props.goodsID,o.event_type=t.props.eventType,o.is_app=t.props.isApp,s.logger.trackingRecord(o,e)):e()})},componentWillMount:function(){},componentDidMount:function(){this.setLogData()},setLogData:function(){var e=this.props;this.setState({imgLogData:JSON.stringify({goodsID:e.goodsID,event:"goods_show",pageName:"index",eventType:e.eventType,isApp:e.isApp,index:e.inViewIndex})})},render:function(){var e;return this.props.normalPrice&&(e=i.createElement("del",{className:"normal-price"},"单买价￥",this.props.normalPrice)),i.createElement("div",{className:"single-list-item",onClick:this.handleGoodsClick},i.createElement("div",{className:"std-goods-image goods-image","data-log":this.state.imgLogData},i.createElement("img",{"data-url":this.props.imgUrl,"data-index":this.props.inViewIndex,height:"1.76rem"})),i.createElement("p",{className:"goods-name"},this.props.goodsName),i.createElement("div",{className:"detail"},i.createElement("div",{className:"index-group-icon"}),i.createElement("a",{className:"group-desc"},this.props.customerNum,"人团"),i.createElement("a",{className:"sale-price"},i.createElement("i",null,"￥"),this.props.salePrice),e),i.createElement("div",{className:"core"},i.createElement("span",null,this.props.buyButtonTxt),i.createElement("div",{className:"index-button-arrow"})))}});e.exports=a},"./components/widgets/DoubleGridGoodsItem/index.js":function(e,t,o){"use strict";var i=o("./components/vendor/react.min.js"),s=o("./components/common/std_format.js"),n="undefined"!=typeof window?o("./components/common/index.js"):{},a={Left:"gap-left",Right:"gap-right"},r=i.createClass({displayName:"DoubleGridGoodsItem",getInitialState:function(){return{imgHeight:0,soldQuantity:0,imgUrl:"",price:0,timeSpanDesc:null}},getDefaultProps:function(){return{imgUrl:"",goodsName:"",cnt:0,price:0,inViewIndex:0,customerNum:0,goodsId:0,extraTrackingParams:null,forwardUrl:null,ad:"",tag:"",doTubesImpr:!1,tubeImprModel:null,blockID:null,itemImprParams:null}},handleGoodsClick:function(e){e&&e.preventDefault();var t=this,o={queries:{item_index:t.props.inViewIndex}};n.page.setPageScrollPosition(o,function(){function e(){var e=t.props.forwardUrl||"goods.html?goods_id="+t.props.goodsId;e+="&is_spike="+(2===t.props.eventType?"1":"0"),n.navigation.forward(e)}t.props.extraTrackingParams?n.logger.trackingRecord(t.props.extraTrackingParams,function(){e()}):e()})},componentWillMount:function(){var e=this.props;this.setState({imgUrl:e.imgUrl,price:e.price,soldQuantity:e.soldQuantity||(e.cnt?s.sales(e.cnt):null),imgLogData:e.doImpr?JSON.stringify({goodsID:e.goodsId,params:e.imprParams}):null})},componentDidMount:function(){this.registerImpr()},registerImpr:function(){var e=this.props,t="double-grid-one-"+e.inViewIndex;e.doTubesImpr&&e.tubeImprModel&&e.itemImprParams&&e.blockID&&e.tubeImprModel.registerImprChild(e.blockID,t,{name:t,view:document.querySelector("."+t),logData:e.itemImprParams,idx:e.inViewIndex})},render:function(){var e=this.props,t=this.state,o=[],s="double-grid-item ";s+=e.inViewIndex%2?a.Left:a.Right,t.soldQuantity?o.push(i.createElement("span",{key:"soldQuantity"},"已团",t.soldQuantity,"件")):e.timeSpanDesc&&e.timeSpanDesc.length>0&&o.push(i.createElement("span",null,e.timeSpanDesc));var n=!1,r=!1,l=!1;if(e.tag>=0){var c=["spike","economical-brand","go-shopping","good-fruit"],p="activity-flag activity-flag-gap activity-flag-"+c[e.tag];l=i.createElement("span",{className:p})}var d="double-grid-one double-grid-one-"+e.inViewIndex;return i.createElement("div",{className:d},i.createElement("div",{className:s,onClick:this.handleGoodsClick},i.createElement("div",{className:"std-goods-image-square goods-image","data-log":this.state.imgLogData},n,i.createElement("img",{"data-url":t.imgUrl,"data-index":e.inViewIndex})),i.createElement("div",{className:"goods-name"},l,e.goodsName,r),i.createElement("div",{className:"detail"},i.createElement("b",{className:"price-icon"},"￥"),i.createElement("b",{className:"price"},t.price),i.createElement("div",{className:"info"},o))))}});e.exports=r},"./components/widgets/RankGoodsListItem/index.js":function(e,t,o){"use strict";var i=o("./components/vendor/react.min.js"),s="undefined"!=typeof window?o("./components/common/index.js"):{},n=o("./constants/constant_ui.js"),a=o("./constants/constant_ui.js").ImgBase64,r=i.createClass({displayName:"RankGoodsListItem",getInitialState:function(){return{defaultImg:a.DefaultSquare}},getDefaultProps:function(){return{inViewIndex:0,imgUrl:"",goodsName:"",salePrice:0,marketPrice:0,customerNum:0,cntDesc:"",goodsId:0,trackingInfo:null,forwardUrl:null}},onGoodsClick:function(e){e&&e.preventDefault();var t=this.getTransferParams(),o=this;o.props.trackingInfo?(o.props.trackingInfo.goods_id=o.props.goodsId,s.logger.trackingRecord(o.props.trackingInfo,function(){s.page.setPageScrollPosition(t,function(){s.navigation.forward(o.props.forwardUrl||"goods.html?goods_id="+o.props.goodsId)})})):s.page.setPageScrollPosition(t,function(){s.navigation.forward(o.props.forwardUrl||"goods.html?goods_id="+o.props.goodsId)})},componentDidMount:function(){},render:function(){var e=this,t=null,o={color:"#ffffff"};switch(e.props.inViewIndex){case 0:t=n.ImgBase64.RankMarkRed;break;case 1:t=n.ImgBase64.RankMarkYellow;break;case 2:t=n.ImgBase64.RankMarkGreen;break;default:t=n.ImgBase64.RankMarkGray,delete o.color}return i.createElement("div",{onClick:e.onGoodsClick,className:"v2-rank-base"},i.createElement("div",{className:"v2-rank-img"},i.createElement("div",{className:"v2-rank-index"},i.createElement("span",{style:o},e.props.inViewIndex+1),i.createElement("img",{className:"mark-icon",src:t})),i.createElement("img",{className:"image",src:e.state.defaultImg,"data-url":e.props.imgUrl
})),i.createElement("div",{className:"v2-rank-right-box"},i.createElement("div",{className:"v2-rank-info"},i.createElement("p",null,e.props.goodsName)),i.createElement("div",{className:"v2-rank-core"},i.createElement("div",{className:"v2-rank-market-price"},"已团"+e.props.cntDesc+"件 · 市场价",i.createElement("div",null,i.createElement("b",null,"￥"),i.createElement("b",null,e.props.marketPrice))),i.createElement("div",{className:"v2-rank-detail"},i.createElement("div",{className:"v2-rank-btn"},"去开团"),i.createElement("div",{className:"v2-rank-group"},i.createElement("div",{className:"v2-rank-sold"},i.createElement("b",null,e.props.customerNum+"人团"),i.createElement("div",{className:"v2-rank-price"},i.createElement("span",null,"￥"),i.createElement("span",{className:"sale-price"},e.props.salePrice))))))))},getTransferParams:function(){var e=this,t={queries:{item_index:e.props.inViewIndex}};return t}});e.exports=r},"./components/widgets/SubjectSnapshot/index.js":function(e,t,o){"use strict";var i=o("./components/vendor/react.min.js"),s="undefined"!=typeof window?o("./components/common/index.js"):{},n=o("./constants/constant_ui.js").ImgBase64,a=o("./constants/tracking/rank.js"),r=o("./components/common/ui/util.js"),l="undefined"!=typeof window?o("./components/common/platform.js"):{},c=o("./constants/index.js").Other,p=i.createClass({displayName:"SubjectSnapshot",getDefaultProps:function(){return{inViewIndex:-1,list:[],subjectId:0,subjectDesc:"",totalGoodsNum:0,totalGoodsSales:""}},getInitialState:function(){return{defaultImg:n.DefaultSquare,needUpdate:!0}},shouldComponentUpdate:function(e,t){return t.needUpdate},componentDidUpdate:function(){this.setState({needUpdate:!1})},componentDidMount:function(){var e=s.page.getPageScrollData();this.prepare(e),this.onHorizonScroll({})},onHorizonScroll:function(e,t){0===e.detail&&e.stopPropagation();var o=this.refs.listItems,i=l.isIOSWeChatPlatform(),s=r.lazyLoadOnScroller(o,this.props.list.length,{onlyInScroller:!0},i?document.getElementById(c.ListWrapperForIos):null);this.setState({needUpdate:s})},forwardGoods:function(e){e.preventDefault();var t=e.currentTarget.dataset.id,o=e.currentTarget.dataset.forward,o=o||"goods.html?goods_id="+t,i=this.getTransferParams();s.page.setPageScrollPosition(i,function(){s.navigation.forward(o)})},forwardSubject:function(){var e=this,t=a.Field,o=this.getTransferParams();s.page.setPageScrollPosition(o,function(){var o={};o[t.ReferPageName.key]=t.ReferPageName.Rank,o[t.ReferPageSection.key]=t.ReferPageSection.Subject,o.subject_id=e.props.subjectId,e.props.subjectId&&s.navigation.forward("subject.html?"+s.util.joinObjKeyAndValue(o,"=","&"))})},render:function(){var e=this,t=e.generateGoodsList(),o=0==e.props.inViewIndex?"rank-subject-item rank-subject-first-item":"rank-subject-item";return i.createElement("div",{className:o},i.createElement("div",{id:"subject-item-header",onClick:e.forwardSubject},i.createElement("div",{className:"item-header-title"},e.props.subjectDesc),i.createElement("div",{className:"item-subject-total"},e.props.totalGoodsNum,"件商品，累计已团",e.props.totalGoodsSales,"次"),i.createElement("img",{src:n.ArrowsRight})),i.createElement("div",{className:"subject-goods-container"},i.createElement("ul",{className:"subject-goods-wrapper",onScroll:e.onHorizonScroll,ref:"listItems"},t,i.createElement("li",{onClick:e.forward},i.createElement("div",{className:"subject-see-bg"},i.createElement("div",{className:"subject-see-all"},i.createElement("div",null,"全部"),i.createElement("div",{className:"see-all-en-text"},"see all")))))))},generateGoodsList:function(){var e=[],t=this;return t.props.list.map(function(o,s){e.push(i.createElement("li",{key:o.key,"data-id":o.goodsID||o.goodsId,"data-forward":o.forwardUrl,onClick:t.forwardGoods},i.createElement("img",{className:"subject-goods-img",src:t.state.defaultImg,"data-url":o.thumbUrl}),i.createElement("p",{className:"goods-name"},o.shortGoodsName||o.goodsName),i.createElement("div",{className:"goods-price"},i.createElement("b",{className:"price-icon"},"￥"),i.createElement("b",{className:"price-num"},o.price))))}),e},getTransferParams:function(){var e=l.isIOSWeChatPlatform(),t=this,o=this.refs.listItems,i={queries:{item_index:t.props.inViewIndex,sp:e?document.getElementById(c.ListWrapperForIos).scrollTop:null}};return o&&o.scrollLeft&&(i.queries.subject_scroll=t.props.inViewIndex+"_"+o.scrollLeft),i},prepare:function(e){var t=this;e=e||{};var o=e.subjectScroll;if(o){var i=o.split("_"),n=parseInt(i[0],10),a=parseInt(i[1],10);if(n===t.props.inViewIndex&&a>0){var r=t.refs.listItems;if(r){setTimeout(function(){r.scrollLeft=a},0);var l=function(){s.navigation.replaceURL(s.url.buildURL({subject_scroll:null}))};window.wxReady||!s.platform.isWeChatPlatform()?l():(window.wxAfterReady=window.wxAfterReady||[],window.wxAfterReady.push(l))}}}}});e.exports=p},"./constants/tracking/rank.js":function(e,t){"use strict";var o=function(){var e={Op:{PageView:"pv",Event:"event"},PageName:{Rank:"rank",HotRank:"rank_hot",NewRank:"rank_new",Subject:"subject",Goods:"goods_detail"},ReferPageName:{key:"refer_page_name",Rank:"rank",HotRank:"rank_hot",NewRank:"rank_new",Subject:"subject_list"},ReferPageSection:{key:"refer_page_section",Foot:"foot_tab",HotRank:"rank_hot_list",NewRank:"rank_new_list",Subject:"subject_list",Goods:"goods_list"},ReferPageElement:{key:"refer_page_element",Rank:"rank"},Result:{Success:1,Fail:0}};return{Field:e,VisitRank:{op:e.Op.PageView,page_name:e.PageName.Rank},ShareRank:{op:e.Op.Event,page_name:e.PageName.Rank},VisitHotRank:{op:"pv",event:"hotcity_show",page_name:"hotcity"},VisitNewRank:{op:e.Op.PageView,page_name:e.PageName.NewRank},VisitSubject:{op:e.Op.PageView,page_name:e.PageName.Subject},ShareHotRank:{op:e.Op.Event,page_name:e.PageName.HotRank},ShareNewRank:{op:e.Op.Event,page_name:e.PageName.NewRank},ShareHotCity:{op:"event",page_name:"hotcity",event:"hotcity_share"}}}();e.exports=o},"./constants/index.js":function(e,t,o){"use strict";var i=o("./constants/modules/index.js"),s=o("./constants/tracking/index.js");e.exports={Modules:i,Tracking:s,Subject:o("./constants/subject.js"),Other:{ListWrapperForIos:"list-wrapper-for-ios"}}},"./constants/modules/index.js":function(e,t,o){"use strict";var i=o("./constants/modules/portalNavigation.js"),s=o("./constants/modules/entrance.js"),n=o("./constants/modules/rank.js");e.exports={PortalNavigation:i,Entrance:s,Rank:n}},"./constants/modules/portalNavigation.js":function(e,t){"use strict";var o=function(){return[{id:0,optType:1,optName:"首页",priority:0,show:!0},{id:1,optType:1,optName:"食品",priority:2,show:!0,optId:1},{id:14,optType:1,optName:"服饰箱包",priority:1,show:!0,optId:14},{id:15,optType:1,optName:"家居生活",priority:3,show:!0,optId:15},{id:18,optType:1,optName:"数码电器",priority:4,show:!0,optId:18},{id:4,optType:1,optName:"母婴",priority:8,show:!0,optId:4},{id:16,optType:1,optName:"美妆护肤",priority:5,show:!0,optId:16},{id:13,optType:1,optName:"水果生鲜",priority:7,show:!0,optId:13},{id:818,optType:1,optName:"家纺家具",priority:6,show:!0,optId:818}]}();e.exports=o},"./constants/modules/entrance.js":function(e,t){"use strict";function o(e){var t={};for(var o in e)t[o]=e[o];return t}function i(e,t){e=e||[];var t=t||Date.now();return e.map(function(e,i){var s=o(n[e]);return s.priority=i,t>=new Date("2017/06/12").getTime()&&t<=new Date("2017/06/21").getTime()&&(s.imageForActivity="entrance/act/170618/"+i+".png"),s})}var s={TimeSpike:"time_spike",SuperSpike:"super_spike",FreeTrial:"free_trial",Special99:"special_99",Lottery:"lottery",Oversea:"oversea",AppOnly:"app_only",GoodFruit:"good_fruit",PreferentialFamily:"preferential_family",EntryLux:"entry_lux",GoShopping:"go_shopping",ElectricCity:"electric_city",Food:"food",Furniture:"furniture",ChargeCenter:"charge_center",Maternal:"maternal",RankHot:"rank_hot",FlashGroups:"flash_groups",PrimeSubjects:"prime_subjects",EconomicalBrand:"economical_brand"},n={};n[s.Oversea]={name:"海淘",imgUrlInCdn:"entrance/v2/3x/oversea.png",forwardUrl:"haitao.html?refer_page_name=index&refer_page_section=icon_list&refer_page_element=haitao_code",key:s.Oversea,show:!0,pageSrc:"haitao_code"},n[s.ElectricCity]={name:"电器城",imgUrlInCdn:"entrance/v2/3x/subject_973.png",forwardUrl:"subjects.html?subjects_id=23",key:s.ElectricCity,show:!0,pageSrc:"electric_city"},n[s.TimeSpike]={name:"限时秒杀",imgUrlInCdn:"entrance/v2/3x/spike.png",imageForActivity:"entrance/v2/3x/spike_act.png",forwardUrl:"spike.html",showDynamicTip:!0,key:s.TimeSpike,show:!0,pageSrc:"time_spike",redPointKey:"time_spike"},n[s.SuperSpike]={name:"品牌清仓",imgUrlInCdn:"entrance/v2/3x/super_spike.png",forwardUrl:"subjects.html?subjects_id=14",key:s.SuperSpike,show:!0,pageSrc:"super_spike",redPointKey:"super_brands"},n[s.FreeTrial]={name:"免费试用",imgUrlInCdn:"entrance/v2/3x/free_trial.png",forwardUrl:"free_trial_page.html",key:s.FreeTrial,show:!1,pageSrc:"free_try"},n[s.Special99]={name:"9块9特卖",imgUrlInCdn:"entrance/v2/3x/special99.png",forwardUrl:"subjects.html?subjects_id=12",key:s.Special99,show:!0,pageSrc:"bargain"},n[s.Maternal]={name:"省钱妈咪",imgUrlInCdn:"entrance/v2/3x/subjects_20_v2.png",imageForActivity:"entrance/v2/3x/subjects_20_act_0601_v2.gif",forwardUrl:"subjects.html?subjects_id=20",key:s.Maternal,show:!0,pageSrc:"maternal"},n[s.Food]={name:"美食汇",imgUrlInCdn:"entrance/v2/3x/food.png",forwardUrl:"subjects.html?subjects_id=17",imageForActivity:"entrance/v2/3x/subjects_17_517.png",key:s.Food,show:!0,pageSrc:"food"},n[s.Furniture]={name:"家居优品",imgUrlInCdn:"entrance/v2/3x/furniture.png",forwardUrl:"subjects.html?subjects_id=18",key:s.Furniture,show:!0,pageSrc:"furniture"},n[s.Lottery]={name:"抽奖",imgUrlInCdn:"entrance/v2/3x/lottery.png",forwardUrl:"lottery.html",key:s.Lottery,show:!1,pageSrc:"lottery",redPointKey:"lucky_draw"},n[s.GoShopping]={name:"爱逛街",imgUrlInCdn:"entrance/v2/3x/subjects_15.png",imageForActivity:"entrance/v2/3x/subjects_15_act.gif",forwardUrl:"subjects.html?subjects_id=15&refer_page_name=index&refer_page_section=icon_list&refer_page_element=go_shopping",key:s.GoShopping,show:!0,pageSrc:"go_shopping"},n[s.GoodFruit]={name:"品质水果",imgUrlInCdn:"entrance/v2/3x/subjects_11_v1.png",imageForActivity:"entrance/v2/3x/subjects_11_517.png",forwardUrl:"subjects.html?subjects_id=11&refer_page_name=index&refer_page_section=icon_list&refer_page_element=good_fruit",key:s.GoodFruit,show:!0,pageSrc:"good_fruit"},n[s.EntryLux]={name:"爱轻奢",imgUrlInCdn:"entrance/v2/3x/entry_lux.png",forwardUrl:"subjects.html?subjects_id=22",key:s.EntryLux,show:!0,pageSrc:"entry_lux"},n[s.ChargeCenter]={name:"手机充值",imgUrlInCdn:"entrance/v2/3x/charge_center.png",forwardUrl:"subjects.html?subjects_id=19",key:s.ChargeCenter,show:!0,pageSrc:"charge_center",redPointKey:"charge_center"},n[s.RankHot]={name:"同城排行",imgUrlInCdn:"entrance/v2/3x/rank_hot.png",forwardUrl:"rank_hot.html",key:s.RankHot,show:!0,pageSrc:"rank_hot"},n[s.PrimeSubjects]={name:"精选专题",imgUrlInCdn:"entrance/v2/3x/prime_subjects.png",forwardUrl:"prime_subjects.html",key:s.PrimeSubjects,show:!0,pageSrc:"prime_subjects"},n[s.FlashGroups]={name:"极速红包团",imgUrlInCdn:"entrance/v2/3x/flash_groups.png",forwardUrl:"flash_groups.html",key:s.FlashGroups,show:!0,pageSrc:"flash_groups"},n[s.EconomicalBrand]={name:"名品折扣",imgUrlInCdn:"entrance/v2/3x/economical_brand_v2.png",forwardUrl:"economical_brand.html",key:s.EconomicalBrand,show:!0,pageSrc:"economical_brand",redPointKey:"economical_brand"};var a=[s.TimeSpike,s.SuperSpike,s.EconomicalBrand,s.GoodFruit,s.Maternal,s.GoShopping,s.Special99,s.FlashGroups,s.Food,s.ChargeCenter],r=[s.TimeSpike,s.SuperSpike,s.EconomicalBrand,s.GoodFruit,s.Maternal,s.Oversea,s.Furniture,s.GoShopping,s.Special99,s.FlashGroups,s.Food,s.ChargeCenter,s.ElectricCity,s.EntryLux],l=i(a),c=i(r),p={};!function(e,t,o){e.forEach(function(e,i){p[e]={START:t,END:o}})}(r,new Date("2017/06/12").getTime(),new Date("2017/06/21").getTime());var d={};d[s.TimeSpike]={dayOfWeek:[1,5],timeslices:[{START:72e3,END:86400}]},d[s.ChargeCenter]={redPointDayOfMonth:[26,27,28,29,30,31,1,2,3,4]};var u={sequenceA:l,sequenceB:c,key:s,activityTimeStamp:p,regularActivityConfig:d,getSequenceA:function(e){return i(a,e)},getSequenceB:function(e){return i(r,e)}};e.exports=u},"./constants/modules/rank.js":function(e,t,o){"use strict";var i=o("./models/util.js"),s=o("./configs/app/index.js").constant,n=function(){return{SnapshotName:{Hot:"同城排行",New:"精选新品",Subject:"精选专题"},Api:{HotList:"v2/ranklist?page={0}&size={1}",NewList:"v3/newlist?page={0}&size={1}",Subject:"rank_subjects?page={0}&size={1}"},SnapshotGoodsListSize:10,Title:{Hot:"同城排行",New:"新品推荐",Rank:"排行榜"},ShareInfoForRank:{title:"排行榜",shareURL:"rank.html",message:"如何找到便宜又优质的热门商品？点这里查看",thumbnailURL:i.getCDNImgURL("share/rank_v2.png"),waterMark:s.WaterMark.None,forceShareToWeChatTimeline:!0,appShareNotUseDelete:!0},ShareInfoForHot:{title:"同城排行",shareURL:"rank_hot.html",message:"如何找到同城热卖商品？点这里查看",thumbnailURL:i.getCDNImgURL("share/rank.jpg"),waterMark:s.WaterMark.None,forceShareToWeChatTimeline:!0,appShareNotUseDelete:!0},ShareInfoForNew:{title:"新品尝鲜",shareURL:"rank_new.html",message:"如何找到最新发布的优质商品？点这里查看",thumbnailURL:i.getCDNImgURL("share/rank_new.png"),waterMark:s.WaterMark.None,forceShareToWeChatTimeline:!0,appShareNotUseDelete:!0},BannerUrl:{New:i.getCDNImgURL("base/banner_rank_new.png"),Hot:i.getCDNImgURL("base/banner_rank_hot.png")},HintText1:"专题看完了，去看看",HintText2:"吧"}}();e.exports=n},"./constants/tracking/index.js":function(e,t,o){"use strict";var i=o("./constants/tracking/rank.js");e.exports={Rank:i}},"./constants/subject.js":function(e,t){"use strict";e.exports={LANG_NO_SUBJECT:"找不到这个专题",TOP_NUM:20,BASE_NUM:20,SPECIAL_99_ID:384,ONE_PURCHASE_ID:452,FRUITS_GROUP_ID:502,PREFERENTIAL_FAMILY_ID:559,shareInfo:{DefaultDesc:"优质商品精心挑选，走过路过不要错过"},MaxRollContentLen:10,LOAD_SIZE:50,ListClass:{Default:"",Single:"subject-single-goods",Double:"subject-double-goods"},ReferPageName:{PreferentialFamily:"preferential_family"},SubjectType:{carnivalSubject:"carnival",categoryDaySubject:"category_day",brandDaySubject:"brand_day"},SubjectsCollectionType:{spec99:"spec99"},SubjectsCollectionTitle:{spec99:"9块9特卖"}}},"./components/widgets/SingleListItemV2/index.js":function(e,t,o){"use strict";var i=o("./components/vendor/react.min.js"),s="undefined"!=typeof window?o("./components/common/index.js"):{},n=o("./components/widgets/SingleListItemV2/localGroups.js"),a=o("./manager/index.js").goods.getInstance(),r=i.createClass({displayName:"SingleListItemV2",getInitialState:function(){return{}},getDefaultProps:function(){return{goodsID:null,goodsData:{}}},getGoodsData:function(){return a.getGoodsDataByID(this.props.goodsID)||this.props.goodsData},handleGoodsClick:function(e){var t=this,o=t.props.extraTrackingParams;e&&(e.preventDefault(),e.stopPropagation());var i={queries:{item_index:t.props.inViewIndex}},n=this.getGoodsData(),a=function(){var e=n.forwardUrl||"goods.html?goods_id="+t.props.goodsID;t.props.referPageName&&(e+="&refer_page_name="+n.referPageName),e+="&is_spike="+(2===n.eventType?"1":"0"),s.navigation.forward(e)};s.page.setPageScrollPosition(i,function(){o?(o.idx=t.props.inViewIndex,o.goods_id=n.goodsID,o.event_type=n.eventType,o.is_app=n.isApp,s.logger.trackingRecord(o,a)):a()})},componentWillMount:function(){var e=this.getGoodsData();e&&!a.getGoodsDataByID(e.goodsID)&&a.updateGoodsInfo(e),this.setState({nationalFlag:e.nationalFlag,soldQuantity:e.hideSoldQuantity||"0"===e.soldQuantity.toString()?"":e.soldQuantity,likeFirstItem:this.props.hasSlipAbove||0===this.props.inViewIndex})},render:function(){var e,t=this.getGoodsData(),o=t.goodsID,s=this.props.inViewIndex;this.state.nationalFlag&&(e=i.createElement("img",{className:"national-flag",src:this.state.nationalFlag}));var a;this.state.soldQuantity&&(a=i.createElement("span",null,"已团",this.state.soldQuantity,"件"));var r;return this.state.likeFirstItem||(r=i.createElement("div",{className:"top-line"})),i.createElement("div",{className:"single-list-item-v2"+(this.state.likeFirstItem?" first-item":""),onClick:this.handleGoodsClick},i.createElement("div",{className:"std-goods-image-square goods-image"},i.createElement("img",{"data-url":t.thumbUrl,"data-index":s})),i.createElement("div",{className:"detail"},i.createElement("p",{className:"goods-name"},e,t.goodsName),i.createElement(n,{goodsID:o}),i.createElement("div",{className:"core"},i.createElement("div",{className:"info"},a),i.createElement("span",{className:"sale-price"},i.createElement("i",null,"￥"),t.price)),i.createElement("div",{className:"enter-button enter-button-arrow"},"去开团"),r))}});e.exports=r},"./components/widgets/SingleListItemV2/localGroups.js":function(e,t,o){"use strict";var i=o("./components/vendor/react.min.js"),s=o("./manager/index.js").goods.getInstance(),n=o("./command/GoodsCommand.js").getInstance(),a=o("./proxy/GoodsProxy.js").getInstance(),r=i.createClass({displayName:"LocalGroups",getInitialState:function(){return{list:[],bubble:"",style:{display:"none"}}},getDefaultProps:function(){return{goodsID:null}},componentWillMount:function(){this.setupLocalGroups()},componentDidMount:function(){var e=this;a.registerLocalGroups(this.props.goodsID,function(){e.setupLocalGroups()}),n.loadLocalGroups(this.props.goodsID)},setupLocalGroups:function(){var e=s.getLocalGroups(this.props.goodsID);if(e&&e.list.length){var t=[];e.list.forEach(function(e){t.push({avatar:e.avatar,display:e.avatar?"":"none"})}),this.setState({list:t,bubble:e.bubble,style:{display:""}})}},avatarLoadFailed:function(e){if(this.state.list[e]){var t=this.state.list.slice();t[e].display="none",this.setState({list:t})}},render:function(){var e=this,t=[],o=e.state.list.length;return e.state.list.forEach(function(s,n){t.push(i.createElement("div",{className:"avatar"+(1===o?" single-avatar":""),key:n},i.createElement("img",{src:s.avatar,style:{display:s.display},onError:function(){e.avatarLoadFailed(n)}})))}),i.createElement("div",{className:"local-groups",style:e.state.style},i.createElement("span",{className:"local-groups-bubble"},e.state.bubble),t.reverse())}});e.exports=r},"./manager/index.js":function(e,t,o){"use strict";var i=o("./manager/GoodsManager.js"),s=o("./manager/PopupManager.js"),n=o("./manager/PageManager.js"),a=o("./manager/ActivityManager.js"),r=o("./manager/ModuleListManager.js");e.exports={mall:o("./manager/MallManager.js"),mallCollection:o("./manager/MallCollectionManager.js"),goods:i,popup:s,page:n,activity:a,moduleList:r}},"./manager/GoodsManager.js":function(e,t,o){"use strict";function i(){this.goodsInfos={}}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=o("./models/common/goodsInfo/index.js");i.prototype={getGoodsInfoByID:function(e){return e=e.toString(),this.goodsInfos[e]},getGoodsDataByID:function(e){var t=this.getGoodsInfoByID(e)||{};return t.data},updateGoodsInfo:function(){var e,t,o=arguments[0];if(null!=o){if("object"!==("undefined"==typeof o?"undefined":s(o)))e=arguments[0].toString(),o=arguments[1]||{},t=arguments[2];else{if(e=o.goodsID||o.goods_id||o.key,!e)return;e=e.toString(),t=arguments[1]}var i=this.goodsInfos[e];return i?i.update(o):(i=new n(e,o),this.goodsInfos[e]=i),"function"==typeof t&&t(),i}},shouldLoadLocalGroups:function(e){var t=this.getGoodsInfoByID(e);return t&&t.shouldLoadLocalGroups},getLocalGroups:function(e){var t=this.getGoodsInfoByID(e);return t?t.getLocalGroups():null},setLocalGroupsLoading:function(e){var t=this.getGoodsInfoByID(e);t&&t.setLocalGroupsLoading()}},e.exports={instance:null,getInstance:function(){return this.instance||(this.instance=new i),this.instance}}},"./models/common/goodsInfo/index.js":function(e,t,o){"use strict";function i(){var e=arguments[0];if(!e)return null;var t;if("object"!==("undefined"==typeof e?"undefined":s(e)))t=arguments[0].toString(),e=arguments[1]||{};else{if(t=e.goodsID||e.goods_id||e.key,!t)return;t=t.toString()}this.key=this.goodsID=t,this.init(e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=o("./constants/goods/index.js"),a=n.EventType,r=o("./models/util.js"),l=o("./models/common/goodsInfo/localGroup.js"),c={Default:0,Loading:1,Setting:2,Loaded:3};i.prototype={init:function(e){this.data={localGroupsInfo:{list:[],bubble:"",status:c.Default},set localGroups(e){if(e){var t=[];if(r.isArray(e))t=e;else{if(!r.isArray(e.list))return;t=e.list}var o=this;o.localGroupsInfo={list:[],bubble:e.bubble||"来拼团吧",status:c.Setting},t.forEach(function(e){var t=new l(e);o.localGroupsInfo.list.push(t)}),o.localGroupsInfo.status=null!=e.status?e.status:c.Loaded}},get localGroups(){return this.localGroupsInfo},get isCompleteLottery(){var e=parseInt(this.eventType,10);return!!e&&[a.LUCKY_DRAW,a.FREE_TRIAL,a.CAPITAL_GIFT_LOTTERY,a.DEPOSITE_GROUP].indexOf(e)>=0},get showDiscount(){var e=parseInt(this.eventType,10);return!e||[a.CAPITAL_GIFT,a.CAPITAL_GIFT_LOTTERY].indexOf(e)===-1},get showExpress(){var e=this.goodsType||"";if(e&&e===n.GoodsType.TRADE_COUPON)return!1;var t=this.catID2||"";return!t||t!==n.CategoriesType.CHARGE_CENTER&&t!==n.CategoriesType.VIP_CHARGE},get hideSoldQuantity(){return this.isCompleteLottery},get isSpike(){return parseInt(this.eventType,10)===a.SPIKE},get isFreeTrial(){return parseInt(this.eventType,10)===a.FREE_TRIAL},get isDepositeGroup(){return parseInt(this.eventType,10)===a.DEPOSITE_GROUP}},this.update(e)},update:function(e){e=e||{};var t=this;for(var o in e)if(e.hasOwnProperty(o)){if(!t.data.__lookupSetter__(o)&&t.data.__lookupGetter__(o))continue;t.data[o]=e[o]}},get shouldLoadLocalGroups(){return this.data.localGroupsInfo.status===c.Default},getLocalGroups:function(){return this.data.localGroups},setLocalGroupsLoading:function(){this.data.localGroupsInfo.status=c.Loading}},e.exports=i},"./models/common/goodsInfo/localGroup.js":function(e,t,o){"use strict";function i(e){if(!e)return null;if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}this.init(e)}var s=o("./models/util.js"),n={name:"游客",avatar:s.getCDNImgURL("base/logo.jpg"),userNum:1};i.prototype={init:function(e){this.avatar=s.getAvatarURL(e.avatar)||n.avatar,this.cityName=e.city_name||"",this.expireTime=parseInt(e.expire_time,10)||0,this.goodsID=e.goods_id,this.groupOrderID=e.group_order_id,this.nickname=e.nickname||n.name,this.usersNum=e.usersNum||n.usersNum}},e.exports=i},"./manager/PopupManager.js":function(e,t,o){"use strict";function i(){this.init()}var s=o("./constants/popup/index.js"),n={Waiting:0,Consuming:1,Consumed:2,Removed:-1};i.prototype={Constant:{TaskName:s.IndexPopup},init:function(){this.pointer=0,this.total=s.IndexOrder.length,this.squence=[]},produce:function(e,t){t=t||{};var o=s.IndexOrder.indexOf(e);if(o!==-1){this.squence[o]=this.squence[o]||{status:n.Waiting};var i=this;"function"==typeof t.show&&(i.squence[o].show=t.show),i.squence[o].withoutDelay=t.withoutDelay||!1,o===this.pointer&&this.consume()}},consume:function(){for(;this.pointer<this.total&&this.squence[this.pointer]&&this.squence[this.pointer].status!==n.Waiting;)this.pointer++;if(!(this.pointer>=this.total)&&this.squence[this.pointer]){var e=this.squence[this.pointer].show;"function"==typeof e&&(this.squence[this.pointer].status=n.Consuming,e()),this.squence[this.pointer].withoutDelay&&this.completeByOrder(this.pointer)}},remove:function(e){var t=s.IndexOrder.indexOf(e);t!==-1&&(this.squence[t]=this.squence[t]||{},this.squence[t].status=n.Removed,t===this.pointer&&this.consume())},completeByOrder:function(e){e===this.pointer&&(this.squence[e].status=n.Consumed,this.pointer++,this.consume())},completeByName:function(e){var t=s.IndexOrder.indexOf(e);this.completeByOrder(t)}},e.exports={instance:null,getInstance:function(){return this.instance||(this.instance=new i),this.instance}}},"./constants/popup/index.js":function(e,t){"use strict";var o={Double12:"double12",NewYear:"new_year",PromotionActivity:"promotion_activity",UnpayedAlarm:"unpayed_alarm",CouponExpire:"coupon_expire",ForceContact:"force_contact"},i=[o.ForceContact,o.PromotionActivity,o.UnpayedAlarm,o.CouponExpire];e.exports={IndexPopup:o,IndexOrder:i}},"./manager/ModuleListManager.js":function(e,t,o){"use strict";function i(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n,a=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}();n=o("./components/common/util.js");var r=function(){function e(t){s(this,e),this.name=t.name,this.pageManager=t.pageManager,this.requestContext=t.requestContext,this.savedKey=[this.pageManager.getPageName(),this.name].join("_")}return a(e,[{key:"getModuleListID",value:function(){var e=this.savedKey;return this.requestContext?this.requestContext.cookies[e]:n.getCookieByName(e)||localStorage.getItem(e)}},{key:"setModuleListID",value:function(){var e,t=864e5,o=[this.savedKey,n.getRandomString(6)].join("_");return this.requestContext?(this.requestContext.setCookie(this.savedKey,o,t),o):(n.saveToLocalStorage(this.savedKey,o),n.setCookie((e={},i(e,this.savedKey,o),i(e,"msec",t),e)),o)}},{key:"listID",get:function(){var e=this.pageManager.getQuery();return e.is_back&&this.getModuleListID()?this.getModuleListID():this.setModuleListID()}}]),e}();e.exports={getInstance:function(e){return new r(e)}}},"./manager/MallManager.js":function(e,t,o){"use strict";function i(){this.Constant=n,this.malls={},this.collectedMalls=[],this.lastFavTime=0}var s=o("./models/common/MallInfo.js"),n=o("./constants/mall/index.js");i.prototype.getMallInfoByID=function(e){if(e)return this.malls[e.toString()]},i.prototype.getMallDataByID=function(e){var t=this.getMallInfoByID(e);return(t||{}).data},i.prototype.updateMallInfo=function(e){e=e||{};var t=e.mallID;if(t){t=t.toString();var o=this.getMallInfoByID(t);return o||(o=this.malls[t]=new s(t)),o.update(e),o}},e.exports={instance:null,getInstance:function(){return this.instance||(this.instance=new i),this.instance}}},"./models/common/MallInfo.js":function(e,t,o){"use strict";function i(e,t){e&&(this.id=this.key=this.mallID=e.toString(),this.data={},t&&this.update(t))}o("./models/util.js");i.prototype.update=function(e){if(e=e||{},!e.mallID||e.mallID.toString()===this.mallID)for(var t in e)if(e.hasOwnProperty(t)){var o=e[t];if(!this.data.__lookupSetter__(t)&&this.data.__lookupGetter__(t))continue;if(void 0===o)continue;this.data[t]=o}},e.exports=i},"./constants/mall/index.js":function(e,t){"use strict";e.exports={DescHint:{ShowMore:"查看更多",Hide:"收起"}}},"./manager/MallCollectionManager.js":function(e,t,o){"use strict";function i(){this.collectedMalls=[],this.lastFavTime=0}var s=o("./constants/storage/index.js"),n=s.LocalStorageKey.MallCollection,a=s.SessionStorageKey.CollectionMallIDsCheck,r=o("./models/DataFormat/mall.js"),l=o("./manager/MallManager.js").getInstance();i.prototype.setFuncs=function(e){e=e||{},this.saveFunc=this.saveFunc||e.saveFunc,this.loadFunc=this.loadFunc||e.loadFunc},i.prototype.saveCollection=function(){var e=this.encodeCollection();this.saveFunc?this.saveFunc(e):"undefined"!=typeof localStorage&&localStorage.setItem(n,e)},i.prototype.loadCollection=function(){var e=this;this.loadFunc?this.loadFunc(function(t){e.decodeCollection(t)}):"undefined"!=typeof localStorage&&e.decodeCollection(localStorage.getItem(n))},i.prototype.encodeCollection=function(){var e=[];for(var t in this.collectedMalls)this.collectedMalls.hasOwnProperty(t)&&this.collectedMalls[t]&&e.push(t);return[this.lastFavTime,e.join("|")].join(":")},i.prototype.decodeCollection=function(e){var t=(e||"").split(":"),o=parseInt(t[0],10)||0;this.updateLastFavTime(o);var i=(t[1]||"").split("|");this.updateFavMallIDs(i)},i.prototype.like=function(e){e=(e||"").toString(),e&&(this.collectedMalls[e]=!0,this.saveCollection())},i.prototype.checkLike=function(e){if(e=(e||"").toString())return this.collectedMalls[e]},i.prototype.dislike=function(e){e=(e||"").toString(),e&&(delete this.collectedMalls[e],this.saveCollection())},i.prototype.checkDislike=function(e){if(e=(e||"").toString())return!this.collectedMalls[e]},i.prototype.updateLastFavTime=function(e){this.lastFavTime=e||this.lastFavTime||0},i.prototype.updateFavMallIDs=function(e,t){t&&(this.collectedMalls={});var o=this;e=e||[],e.forEach(function(e){e=(e||"").toString(),e&&(o.collectedMalls[e]=!0)}),this.saveCollection()},i.prototype.appendFavMallList=function(e,t){t&&(this.collectedMalls={});var o=this;e=e||[];var i=[];return e.forEach(function(e){var t=r.info(e);if(t){l.updateMallInfo(t.data);var s=t.data.mallID;s&&!o.collectedMalls[s]&&(o.collectedMalls[s]=!0,i.push({props:t.props,mallID:s}))}}),this.saveCollection(),i},i.prototype.notCheckedFromSession=function(){return"undefined"!=typeof sessionStorage&&!sessionStorage.getItem(a)},i.prototype.init=function(e){e=e||{},this.isNative=e.isNative,this.setFuncs(e);var t=this;this.notCheckedFromSession()?(o("./proxy/MallCollectionProxy.js").getInstance().registerLikeIDs({onSuccess:function(){sessionStorage.setItem(a,"1")},onFailed:function(){t.loadCollection()}}),o("./command/MallCollectionCommand.js").getInstance().requestLikeIDs()):this.loadCollection()},i.prototype.clear=function(){this.saveFunc?this.saveFunc(""):"undefined"!=typeof localStorage&&localStorage.removeItem(n)},e.exports={instance:null,getInstance:function(){return this.instance||(this.instance=new i),this.instance}}},"./models/DataFormat/mall.js":function(e,t,o){"use strict";function i(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var s=o("./models/util.js");e.exports={listItem:function(e,t){var o=e.group||{},i=e.goods_id,n={goodsID:i,goodsName:e.goods_name,price:s.StdFormat.price(e.price||o.price,100),shortGoodsName:e.short_name||e.goods_name,normalPrice:s.StdFormat.price(e.normal_price,100),discount:s.StdFormat.price((e.market_price||e.normal_price)-(e.price||o.price),100),customerNum:parseInt(e.customer_num||o.customer_num,10),soldQuantity:s.StdFormat.sales(e.cnt),eventType:null!=e.event_type?parseInt(e.event_type,10)||0:null,country:e.country||""};e.image_url&&(n.imageUrl=s.cdnCompress(e.image_url,t.type,t.webpEnable));var a=e.hd_thumb_url||e.thumb_url;a&&(n.thumbUrl=n.imgUrl=s.cdnCompress(a,t.type,t.webpEnable)),n.imgUrl=n.thumbUrl||n.imageUrl;var r={key:"goods_"+i,forwardUrl:function(){var e="goods.html?goods_id="+i;return t.referPageName&&(e+="&refer_page_name="+t.referPageName),e}(),listItemName:"doubleGridItem",eventType:null!=e.event_type?parseInt(e.event_type,10)||0:null,get extraTrackingParams(){return t.clickTrackingParams&&t.mallID?s.extend(t.clickTrackingParams,{goods_id:i}):null},withLocalGroups:t.withLocalGroups,isDoubleList:!0};return{data:n,props:r}},info:function(e,t){var o;e=e||{};var s=(o={mallID:e.mall_id,logo:e.logo,mallName:e.mall_name,hasCoupon:void 0!==e.mall_coupon_available?parseInt(e.mall_coupon_available,10)>0:void 0,isOpen:void 0!==e.is_open?parseInt(e.is_open,10)>0:void 0},i(o,"isOpen",void 0!==e.is_open?parseInt(e.is_open,10)>0:void 0),i(o,"sales",void 0!==e.mall_sales?parseInt(e.mall_sales,10)||0:void 0),o),n={};return{data:s,props:n}}}},"./proxy/MallCollectionProxy.js":function(e,t,o){"use strict";function i(){s.call(this)}var s=o("./proxy/base.js"),n=o("./node_modules/webpack/node_modules/node-libs-browser/node_modules/util/util.js"),a=o("./event/mallCollection.js"),r=a.constant,l=o("./manager/MallCollectionManager.js").getInstance();n.inherits(i,s),i.prototype.registerLike=function(e){var t=a.get(r.Like,{mallID:e.mallID});this.register(t.getKey(),e,t)},i.prototype.receiveLike=function(e,t,o){!e&&t&&(l.like(o.mallID),l.updateLastFavTime(t.time)),this.receive(o.getKey(),e,t,o)},i.prototype.registerDislike=function(e){
var t=a.get(r.Dislike,{mallID:e.mallID});this.register(t.getKey(),e)},i.prototype.receiveDislike=function(e,t,o){!e&&t&&(l.dislike(o.mallID,t.time),l.updateLastFavTime(t.time)),this.receive(o.getKey(),e,t,o)},i.prototype.registerLikeIDs=function(e){var t=a.get(r.LikeIDs);this.register(t.getKey(),e)},i.prototype.receiveLikeIDs=function(e,t,o){!e&&t&&(l.updateFavMallIDs(t.mall_id_list,!0),l.updateLastFavTime(t.favorite_mall_update_time)),this.receive(o.getKey(),e,t,o)},i.prototype.registerLikeList=function(e){var t=a.get(r.LikeList,e.query);this.register(t.getKey(),e)},i.prototype.receiveLikeList=function(e,t,o){var i=[];!e&&t&&(i=l.appendFavMallList(t.mall_list),l.updateLastFavTime(t.favorite_mall_update_time)),this.receive(o.getKey(),e,i,o)},e.exports={instance:null,getInstance:function(){return this.instance||(this.instance=new i),this.instance}}},"./proxy/base.js":function(e,t){"use strict";function o(){this.callbacksMap={}}o.prototype.register=function(e,t){t=t||{};var o="function"==typeof t.onSuccess?t.onSuccess:null,i="function"==typeof t.onFailed?t.onFailed:null;e&&(o||i)&&(this.callbacksMap[e]||(this.callbacksMap[e]=[]),this.callbacksMap[e].push({onSuccess:o,onFailed:i}))},o.prototype.receive=function(e,t,o,i){if(i&&(o=o||{},e&&(i.setRequested&&i.setRequested(),this.callbacksMap[e]))){var s=this.callbacksMap[e]||[];s.forEach(function(e,i){t&&e.onFailed?e.onFailed(t,o):!t&&e.onSuccess&&e.onSuccess(o)})}},e.exports=o},"./event/mallCollection.js":function(e,t,o){"use strict";function i(e,t){s.call(this,e,t)}var s=o("./event/base.js"),n=o("./node_modules/webpack/node_modules/node-libs-browser/node_modules/util/util.js"),a={LikeIDs:{method:"GET",route:"favorite/mall/id/list"},LikeList:{method:"GET",route:"favorite/mall/list?page={$page}&size={$size}"},Like:{method:"POST",route:"favorite/mall/like/{$mallID}"},Dislike:{method:"POST",route:"favorite/mall/unlike/{$mallID}"}};n.inherits(i,s),e.exports={events:null,constant:a,get:function(e,t){this.events||(this.events={});var o=new i(e,t),s=o.getKey();return this.events[s]?o=this.events[s]:this.events[s]=o,o}}},"./event/base.js":function(e,t,o){"use strict";function i(e,t){this.init(e),this.init(t,!0),this.formatRoute(),this.requestStatus=s.unrequested}var s=o("./constants/network.js");i.prototype.getKey=function(){return this.key||this.createKey(),this.key},i.prototype.getMethod=function(){return(this.method||"get").toUpperCase()},i.prototype.getRoute=function(){return this.route},i.prototype.isRequesting=function(){return this.requestStatus===s.RequestStatus.requesting},i.prototype.setRequesting=function(){this.requestStatus=s.RequestStatus.requesting},i.prototype.setRequested=function(){this.requestStatus=s.RequestStatus.requested},i.prototype.init=function(e,t){e=e||{};for(var o in e)e.hasOwnProperty(o)&&(t||null==this[o])&&(this[o]=e[o])},i.prototype.createKey=function(){this.key=[this.getMethod(),this.getRoute()].join(":")},i.prototype.formatRoute=function(){if(this.route){var e=this;this.route=this.route.replace(/{\$[a-zA-Z0-9]+}/g,function(t){var o=t.slice(2,-1);return e[o]||""})}},e.exports=i},"./command/MallCollectionCommand.js":function(e,t,o){"use strict";function i(){}var s=o("./network/index.js").getInstance(),n=o("./event/mallCollection.js"),a=n.constant,r=o("./proxy/MallCollectionProxy.js").getInstance(),l=o("./manager/MallCollectionManager.js").getInstance();i.prototype.like=function(e){if(!l.checkLike(e)){var t=n.get(a.Like,{mallID:e});t&&!t.isRequesting()&&(t.setRequesting(),s.apiRequest(t.getMethod(),t.getRoute(),null,function(e){r.receiveLike(0,e,t)},function(e,o){r.receiveLike(e||-1,o,t)}))}},i.prototype.dislike=function(e){if(l.checkLike(e)){var t=n.get(a.Dislike,{mallID:e});t&&!t.isRequesting()&&(t.setRequesting(),s.apiRequest(t.getMethod(),t.getRoute(),null,function(e){r.receiveDislike(0,e,t)},function(e,o){r.receiveDislike(e||-1,o,t)}))}},i.prototype.requestLikeIDs=function(){var e=n.get(a.LikeIDs);e&&!e.isRequesting()&&(e.setRequesting(),s.apiRequest(e.getMethod(),e.getRoute(),null,function(t){r.receiveLikeIDs(0,t,e)},function(t,o){r.receiveLikeIDs(t||-1,o,e)}))},i.prototype.requestLikeList=function(e){var t=n.get(a.LikeList,e);t&&!t.isRequesting()&&(t.setRequesting(),s.apiRequest(t.getMethod(),t.getRoute(),null,function(e){r.receiveLikeList(0,e,t)},function(e,o){r.receiveLikeList(e||-1,o,t)}))},e.exports={instance:null,getInstance:function(){return this.instance||(this.instance=new i),this.instance}}},"./command/GoodsCommand.js":function(e,t,o){"use strict";function i(){this.LocalGroupsCommand=s.getInstance()}var s=o("./command/LocalGroupsCommand.js");i.prototype.loadFirstLocalGroups=function(e){e&&this.LocalGroupsCommand.loadFirst(e)},i.prototype.loadLocalGroups=function(e,t){e&&this.LocalGroupsCommand.load(e)},e.exports={instance:null,getInstance:function(){return this.instance||(this.instance=new i),this.instance}}},"./command/LocalGroupsCommand.js":function(e,t,o){"use strict";function i(){this.isFirst=!0,this.savingGoodsIDs=[],this.savingTimer=null}var s=o("./manager/index.js").goods.getInstance(),n=o("./proxy/GoodsProxy.js").getInstance(),a=o("./network/index.js").getInstance(),r=1e3,l=20,c=100;i.prototype.loadFirst=function(e){var t=[],o=this;e.forEach(function(i){!i||o.savingGoodsIDs.indexOf(i)>=0||t.indexOf(e)>=0||s.shouldLoadLocalGroups(i)&&t.push(i)}),this.savingGoodsIDs=this.savingGoodsIDs.concat(t),this.solve()},i.prototype.load=function(e){if(e&&!(this.savingGoodsIDs.indexOf(e)>=0)&&s.shouldLoadLocalGroups(e)){if(this.savingGoodsIDs.push(e),this.savingGoodsIDs.length>=l)return void this.solve();if(!this.savingTimer){var t=r;this.isFirst&&(t=c,this.isFirst=!1);var o=this;this.savingTimer=setTimeout(function(){o.solve()},t)}}},i.prototype.request=function(){if(a.apiRequest&&!(this.savingGoodsIDs.length<=0)){var e=this.savingGoodsIDs.slice();e.forEach(function(e){s.setLocalGroupsLoading(e)}),this.savingGoodsIDs=[],a.apiRequest("POST","goods/local_groups",{goods_ids:e},function(e){n.receiveLocalGroups(e)},function(){},!0)}},i.prototype.solve=function(){this.savingTimer&&(clearTimeout(this.savingTimer),this.savingTimer=null),this.request()},e.exports={instance:null,getInstance:function(){return this.instance||(this.instance=new i),this.instance}}},"./proxy/GoodsProxy.js":function(e,t,o){"use strict";function i(){}var s=o("./proxy/LocalGroupsProxy.js").getInstance();i.prototype.receiveLocalGroups=function(e){s.receive(e)},i.prototype.registerLocalGroups=function(e,t){s.register(e,t)},e.exports={instance:null,getInstance:function(){return this.instance||(this.instance=new i),this.instance}}},"./proxy/LocalGroupsProxy.js":function(e,t,o){"use strict";function i(){this.callbacksMap={}}var s=o("./manager/index.js").goods.getInstance();i.prototype.receive=function(e){for(var t in e)if(e.hasOwnProperty(t)&&t){var o=e[t];s.updateGoodsInfo(t,{localGroups:o}),this.callbacksMap[t]&&this.callbacksMap[t].forEach(function(e){"function"==typeof e&&e()})}},i.prototype.register=function(e,t){e&&"function"==typeof t&&(e=e.toString(),this.callbacksMap[e]||(this.callbacksMap[e]=[]),this.callbacksMap[e].push(t))},e.exports={instance:null,getInstance:function(){return this.instance||(this.instance=new i),this.instance}}},"./components/widgets/DoubleGridItemV2/index.js":function(e,t,o){"use strict";var i=o("./components/vendor/react.min.js"),s="undefined"!=typeof window?o("./components/common/index.js"):{},n=o("./components/widgets/DoubleGridItemV2/localGroups.js"),a=o("./manager/index.js").goods.getInstance(),r=i.createClass({displayName:"DoubleGridItemV2",getInitialState:function(){return{}},getDefaultProps:function(){return{goodsID:null,goodsData:{}}},getGoodsData:function(){return a.getGoodsDataByID(this.props.goodsID)||this.props.goodsData},handleGoodsClick:function(e){var t=this,o=t.props.extraTrackingParams;e&&(e.preventDefault(),e.stopPropagation());var i={queries:{item_index:t.props.inViewIndex}},n=this.getGoodsData(),a=function(){var e=n.forwardUrl||"goods.html?goods_id="+t.props.goodsID;t.props.referPageName&&(e+="&refer_page_name="+n.referPageName),e+="&is_spike="+(2===n.eventType?"1":"0"),s.navigation.forward(e)};s.page.setPageScrollPosition(i,function(){o?(o.idx=t.props.inViewIndex,o.goods_id=n.goodsID,o.event_type=n.eventType,o.is_app=n.isApp,s.logger.trackingRecord(o,a)):a()})},componentWillMount:function(){var e=this.getGoodsData();e&&!a.getGoodsDataByID(e.goodsID)&&a.updateGoodsInfo(e),this.setState({nationalFlag:e.nationalFlag,soldQuantity:e.hideSoldQuantity||"0"===e.soldQuantity.toString()?"":e.soldQuantity})},render:function(){var e,t=this.getGoodsData(),o=t.goodsID,s=this.props.inViewIndex;this.state.nationalFlag&&(e=i.createElement("img",{className:"national-flag",src:this.state.nationalFlag}));var a;this.state.soldQuantity&&(a=i.createElement("p",{className:"sold-quantity"},"已团",this.state.soldQuantity,"件"));var r=!1,l=!1;return i.createElement("div",{className:"double-grid-one-v2"},i.createElement("div",{className:"double-grid-item-v2",onClick:this.handleGoodsClick},i.createElement("div",{className:"std-goods-image-square"},r,i.createElement("img",{"data-url":t.imgUrl,"data-index":s})),i.createElement("div",{className:"detail"},i.createElement("div",{className:"name-block"},i.createElement("p",{className:"goods-name"},e,t.goodsName),l),i.createElement("div",{className:"core"},i.createElement("div",{className:"info"},i.createElement("p",{className:"sale-price"},i.createElement("i",null,"￥"),t.price),a),i.createElement(n,{goodsID:o})))))}});e.exports=r},"./components/widgets/DoubleGridItemV2/localGroups.js":function(e,t,o){"use strict";var i=o("./components/vendor/react.min.js"),s=o("./manager/index.js").goods.getInstance(),n=o("./command/GoodsCommand.js").getInstance(),a=o("./proxy/GoodsProxy.js").getInstance(),r=i.createClass({displayName:"LocalGroups",getInitialState:function(){return{list:[],bubble:"",style:{display:"none"}}},getDefaultProps:function(){return{goodsID:null}},componentWillMount:function(){this.setupLocalGroups()},componentDidMount:function(){var e=this;a.registerLocalGroups(this.props.goodsID,function(){e.setupLocalGroups()}),n.loadLocalGroups(this.props.goodsID)},setupLocalGroups:function(){var e=s.getLocalGroups(this.props.goodsID);if(e&&e.list.length){var t=[];e.list.forEach(function(e){t.push({avatar:e.avatar,display:e.avatar?"":"none"})}),this.setState({list:t,bubble:e.bubble,style:{display:""}})}},avatarLoadFailed:function(e){if(this.state.list[e]){var t=this.state.list.slice();t[e].display="none",this.setState({list:t})}},render:function(){var e=this,t=[],o=e.state.list.length;return e.state.list.forEach(function(s,n){t.push(i.createElement("div",{className:"avatar"+(1===o?" single-avatar":""),key:n},i.createElement("img",{src:s.avatar,style:{display:s.display},onError:function(){e.avatarLoadFailed(n)}})))}),i.createElement("div",{className:"local-groups",style:e.state.style},i.createElement("span",null),t.reverse())}});e.exports=r},"./components/widgets/PortalListItem/index.js":function(e,t,o){"use strict";var i=o("./components/vendor/react.min.js"),s="undefined"!=typeof window?o("./components/common/index.js"):{},n=o("./components/widgets/PortalListItem/localGroups.js"),a=o("./manager/index.js").goods.getInstance(),r=i.createClass({displayName:"PortalListItem",getInitialState:function(){return{}},getDefaultProps:function(){return{goodsID:null,goodsData:{},itemProps:{}}},getGoodsData:function(){return a.getGoodsDataByID(this.props.goodsID)||this.props.goodsData},handleGoodsClick:function(e){var t=this,o=t.props.itemProps.extraTrackingParams;e&&(e.preventDefault(),e.stopPropagation());var i={queries:{item_index:t.props.inViewIndex}},n=this.getGoodsData(),a=function(){var e=t.props.itemProps.forwardUrl||"goods.html?goods_id="+t.props.goodsID;t.props.itemProps.referPageName&&(e+="&refer_page_name="+n.referPageName),e+="&is_spike="+(n.isSpike?"1":"0"),s.navigation.forward(e)};s.page.setPageScrollPosition(i,function(){o?(o.idx=t.props.inViewIndex,o.goods_id=n.goodsID,o.event_type=n.eventType,o.is_app=n.isApp,s.logger.trackingRecord(o,a)):a()})},componentWillMount:function(){var e=this.getGoodsData();e&&!a.getGoodsDataByID(e.goodsID)&&a.updateGoodsInfo(e);var t={goodsID:e.goodsID,event:"goods_show",pageName:"index",eventType:e.eventType,isApp:e.isApp,index:this.props.inViewIndex};this.props.itemProps.imprParams&&(t.params=this.props.itemProps.imprParams),this.setState({nationalFlag:e.nationalFlag,soldQuantity:e.hideSoldQuantity||"0"===e.soldQuantity.toString()?"":e.soldQuantity,isCompleteLottery:e.isCompleteLottery,imgLogData:JSON.stringify(t)})},render:function(){var e,t=this.getGoodsData(),o=t.goodsID,s=this.props.inViewIndex;this.state.nationalFlag&&(e=i.createElement("img",{className:"national-flag",src:this.state.nationalFlag}));var a;this.state.isCompleteLottery?a=i.createElement("span",null,t.customerNum,"人团",i.createElement("i",null,"·"),"单买价",t.normalPrice,"元"):this.state.soldQuantity&&(a=i.createElement("span",null,"已团",this.state.soldQuantity,"件"));var r=t.isFreeTrial||t.isDepositeGroup?"免费试用":"去开团";return i.createElement("div",{className:"portal-list-item",onClick:this.handleGoodsClick},i.createElement("div",{className:"std-goods-image goods-image","data-log":this.state.imgLogData},i.createElement("img",{"data-url":t.imageUrl,"data-index":s})),i.createElement("p",{className:"goods-name"},e,t.goodsName),i.createElement("div",{className:"detail"},i.createElement("div",{className:"left-side"},i.createElement("div",{className:"sale-price"},i.createElement("i",null,"￥"),t.price),i.createElement("div",{className:"group-desc"},a)),i.createElement("div",{className:"right-side"},i.createElement(n,{goodsID:o}),i.createElement("div",{className:"enter-button enter-button-arrow"},r))))}});e.exports=r},"./components/widgets/PortalListItem/localGroups.js":function(e,t,o){"use strict";var i=o("./components/vendor/react.min.js"),s="undefined"!=typeof window?o("./components/common/index.js"):{},n=o("./manager/index.js").goods.getInstance(),a=o("./command/GoodsCommand.js").getInstance(),r=o("./proxy/GoodsProxy.js").getInstance(),l=i.createClass({displayName:"LocalGroups",getInitialState:function(){return{list:[],bubble:"",style:{display:"none"}}},getDefaultProps:function(){return{goodsID:null}},componentWillMount:function(){this.setupLocalGroups()},componentDidMount:function(){var e=this;r.registerLocalGroups(this.props.goodsID,function(){e.setupLocalGroups()}),a.loadLocalGroups(this.props.goodsID)},setupLocalGroups:function(){var e=n.getLocalGroups(this.props.goodsID);if(e&&e.list.length){var t=[];e.list.forEach(function(e){t.push({avatar:e.avatar,display:e.avatar?"":"none",groupOrderID:e.groupOrderID})}),this.setState({list:t,bubble:e.bubble,style:{display:""}})}},avatarLoadFailed:function(e){var t=this.state.list[e],o={op:"error",event:"local_groups_avatar_missing",group_order_id:t.groupOrderID,avatar:t.avatar};if(this.state.list[e]){var i=this.state.list.slice();s.logger.trackingRecord(o),i[e].display="none",this.setState({list:i})}},render:function(){var e=this,t=[],o=e.state.list.length;return e.state.list.forEach(function(s,n){t.push(i.createElement("div",{className:"avatar"+(1===o?" single-avatar":""),key:n},i.createElement("img",{src:s.avatar,style:{display:s.display},onError:function(){e.avatarLoadFailed(n)}})))}),i.createElement("div",{className:"local-groups",style:e.state.style},i.createElement("span",null),t.reverse())}});e.exports=l},"./components/widgets/Banner2/index.js":function(e,t,o){"use strict";var i=o("./components/vendor/react.min.js"),s=o("./components/widgets/Banner2/banner.js"),n="undefined"!=typeof window?o("./components/common/index.js"):{},a={},r=o("./constants/tracking/portal.js"),l=o("./constants/constant_ui.js").ImgBase64,c=i.createClass({displayName:"Banner",getInitialState:function(){return{loaded:!1,defaultImg:l.Default}},getDefaultProps:function(){return{data:[],isShowed:!1}},componentWillMount:function(){},componentDidMount:function(){var e=this;n.ui.getWindowWidth();this.props.data.length>0&&!this.state.loaded&&this.props.isShowed&&(a=s(e.refs.banner),a.load(this.props.data,function(){a.show()},r.BannerClick),this.setState({loaded:!0}))},componentWillReceiveProps:function(e){var t=this;a.show&&e.isShowed&&t.props.data!==e.data&&e.data.length>0&&(a.reload(e.data),t.setState({loaded:!0}))},render:function(){return i.createElement("div",{id:"rp-banner",ref:"banner"},i.createElement("div",{className:"portal-banner-bg std-goods-image"}))},componentDidUpdate:function(e,t){var o=this;!o.state.loaded&&o.props.data.length>0&&o.props.isShowed&&!a.show&&(a=s(o.refs.banner),a.load(o.props.data,function(){a.show(),o.setState({loaded:!0})},r.BannerClick))}});e.exports=c},"./components/widgets/Banner2/banner.js":function(e,t,o){"use strict";var i="undefined"!=typeof window?o("./components/vendor/iSlider.js"):{},s="undefined"!=typeof window?o("./components/common/index.js"):{},n="showDownloadNotification",a=o("./components/widgets/DownloadNotification/index.js"),r=o("./components/vendor/react.min.js"),l=o("./components/vendor/react-dom.min.js");e.exports=function(e){function t(e,t){var o=e,i="",n="";e.forwardUrl&&(i=e.forwardUrl),e.imgUrl&&(o=s.image.upaiyunCompress(e.imgUrl)),n+=" data-goods_id="+(e.goodsID||0),n+=" data-subject_id="+(e.subjectID||0),"undefined"!=typeof t&&(n+=' data-index="'+(t+1));var a='<img src="'+o+'" data-url="'+i+'"'+n+'"/>';return e.html&&(a=e.html),{content:a}}function o(e){var t=e.data;t&&t.length&&t.length>1?(e.isLooping=!0,e.isAutoplay=!0,e.animateTime=u,e.duration=h,e.rebindTouch()):(e.isLooping=!1,e.isAutoplay=!1),e.loadData(e.data,0),e.reset()}var c,p,d=e||document.getElementById("rp-banner"),u=600,h=3e3,m=null,g=function(){d.style.display=""},f=function(){d.style.display="none"},v=function(){c&&c.play()},y={showDownloadNotification:function(){var e="该商品是APP专享团商品，请在APP中购买和参团。",t={cid:"appbanner"},o=document.createElement("DIV");document.body.appendChild(o),l.render(r.createElement(a,{title:"APP专享团",content:e,queries:t,show:!0}),o)}};p=function(e){return e===n?void y[e](event):void(e&&e.length>0&&s.navigation.forward(e))};var b=function(e,n,a){var r=[],l=n;c&&(c.data=[]),m||(m=a||null);for(var g=0;g<e.length;g++){var f=t(e[g],g);c?c.pushData(f):r.push(f)}if(!c){var v={dom:d,data:r,isLooping:!1,isAutoplay:!1,animateTime:u,duration:h,fixPage:!1,plugins:[["dot",{locate:d,dotWrapClass:"rp-islider-dot-wrap",dotClass:"rp-islider-dot"}]]};r.length>1?(v.isLooping=!0,v.isAutoplay=!0,v.isTouchable=!0):v.isTouchable=!1,c=new i(v),d.addEventListener("click",function(e){if(m&&e){var t=e.target.dataset;0!==parseInt(t.goods_id,10)&&(m.page_element="goods",m.element_id=t.goods_id),0!==parseInt(t.subject_id,10)&&(m.page_element="subject",m.element_id=t.subject_id),m.idx=t.index||null,s.logger.trackingRecord(m,function(){p(e.target.dataset.url)})}else p(e.target.dataset.url)})}0!==e.length&&s.util.call(l,!0),o(c)},_=function(e){b(e)},I=function(e,i){c.data.splice(i,0,t(e)),o(c)};return{load:b,show:g,hide:f,play:v,reload:_,on:function(e,t){c.on(e,t)},click:function(e){p=e},loaded:function(){return!!c},insert:I}}},"./components/vendor/iSlider.js":function(e,t,o){var i;(function(e){!function(s){"use strict";function n(){}function a(e,t){return t.indexOf(e)>-1}function r(e){return"[object Array]"===Object.prototype.toString.call(e)}function l(e){return"[object Object]"===Object.prototype.toString.call(e)}function c(e,t){return e.className.match(new RegExp("(\\s|^)("+t+")(\\s|$)"))}function p(e,t){c(e,t)||(e.className+=" "+t)}function d(e,t){c(e,t)&&(e.className=e.className.replace(RegExp("(\\s|^)("+t+")(\\s|$)"),"$3"))}function u(e){return!/<\/?[^>]*>/.test(e)&&/^(?:(https|http|ftp|rtsp|mms):)?(\/\/)?(\w+:{0,1}\w*@)?([^\?#:\/]+\.[a-z]+|\d+\.\d+\.\d+\.\d+)?(:[0-9]+)?((?:\.?\/)?([^\?#]*)?(\?[^#]+)?(#.+)?)?$/.test(e)}function h(e){return Array.prototype.slice.apply(e,Array.prototype.slice.call(arguments,1))}function m(e){return e.replace(/^[a-z]/,function(e){return e.toUpperCase()})}var g=function(){var e=h(arguments,0,3);if(!e.length)throw new Error("Parameters required!");var t=l(e.slice(-1)[0])?e.pop():{};switch(e.length){case 2:t.data=t.data||e[1];case 1:t.dom=t.dom||e[0]}if(!t.dom)throw new Error("Container can not be empty!");if(!t.data||!t.data.length)throw new Error("Data must be an array and must have more than one element!");this._opts=t,t=null,e=null,this._setting(),this.fire("initialize"),this._renderWrapper(),this._initPlugins(),this._bindHandler(),this.fire("initialized"),this._autoPlay()};g.VERSION="2.1.7",g.EVENTS=["initialize","initialized","pluginInitialize","pluginInitialized","renderComplete","slide","slideStart","slideEnd","slideChange","slideChanged","slideRestore","slideRestored","loadData","reset","destroy"],g.EASING=[["linear","ease","ease-in","ease-out","ease-in-out"],/cubic-bezier\(([^\d]*(\d+.?\d*)[^\,]*\,?){4}\)/],g.FIX_PAGE_TAGS=["SELECT","INPUT","TEXTAREA","BUTTON","LABEL"],g.NODE_TYPE={unknown:"unknown",empty:"empty",pic:"pic",dom:"dom",html:"html",node:"node",element:"element"},g.TRANSITION_END_EVENT=null,g.BROWSER_PREFIX=null,function(){var e=document.createElement("fakeElement");[["WebkitTransition","webkitTransitionEnd","webkit"],["transition","transitionend",null],["MozTransition","transitionend","moz"],["OTransition","oTransitionEnd","o"]].some(function(t){if(void 0!==e.style[t[0]])return g.TRANSITION_END_EVENT=t[1],g.BROWSER_PREFIX=t[2],!0})}(),g.DEVICE_EVENTS=function(){var e=!!("ontouchstart"in s&&!/Mac OS X /.test(s.navigator.userAgent)||s.DocumentTouch&&document instanceof s.DocumentTouch);return{hasTouch:e,startEvt:e?"touchstart":"mousedown",moveEvt:e?"touchmove":"mousemove",endEvt:e?"touchend":"mouseup",cancelEvt:e?"touchcancel":"mouseout",resizeEvt:"onorientationchange"in s?"orientationchange":"resize"}}(),g.extend=function(){var e,t,o=arguments;switch(o.length){case 0:return;case 1:e=g.prototype,t=o[0];break;case 2:e=o[0],t=o[1]}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},g.plugins={},g.regPlugin=function(e,t){g.plugins[e]=g.plugins[e]||t},g.styleProp=function(e,t){return g.BROWSER_PREFIX?t?g.BROWSER_PREFIX+m(e):"-"+g.BROWSER_PREFIX+"-"+e:e},g.setStyle=function(e,t,o){e.style[g.styleProp(t,1)]=o},g.getStyle=function(e,t){return e.style[g.styleProp(t,1)]},g._animateFuncs={normal:function(){function e(e,t,o,i,s){g.setStyle(e,"transform","translateZ(0) translate"+t+"("+(s+o*(i-1))+"px)")}return e.effect=g.styleProp("transform"),e}()};var f=g.prototype;f.extend=g.extend,f._setting=function(){var e=this;e._plugins=g.plugins,e._animateFuncs=g._animateFuncs,e._holding=!1,e._locking=!1,e._intermediateScene=null,e._transitionEndHandler=null,e._LSN={autoPlay:null,resize:null,transitionEnd:null},e.currentEl=null,e._EventHandle={},e.onMoving=!1,e.onSliding=!1,e.direction=null;var t=this._opts;e.wrap=t.dom,e.data=t.data,e.isVertical=!!t.isVertical,e.isOverspread=!!t.isOverspread,e.duration=t.duration||2e3,e.initIndex=t.initIndex>0&&t.initIndex<=t.data.length-1?t.initIndex:0,e.fixPage=function(){var e=t.fixPage;return e!==!1&&0!==e&&(!(r(e)&&e.length>0||"string"==typeof e&&""!==e)||[].concat(e).toString())}(),e.fillSeam=!!t.fillSeam,e.slideIndex=e.slideIndex||e.initIndex||0,e.axis=e.isVertical?"Y":"X",e.reverseAxis="Y"===e.axis?"X":"Y",e.width="number"==typeof t.width?t.width:e.wrap.offsetWidth,e.height="number"==typeof t.height?t.height:e.wrap.offsetHeight,e.ratio=e.height/e.width,e.scale=e.isVertical?e.height:e.width,e.offset=e.offset||{X:0,Y:0},e.isTouchable=null==t.isTouchable||!!t.isTouchable,e.isLooping=!!(t.isLooping&&e.data.length>1),e.dampingForce=Math.max(0,Math.min(1,parseFloat(t.dampingForce)||0)),e.delay=t.delay||0,e.isAutoplay=!!(t.isAutoplay&&e.data.length>1),e.animateType=t.animateType in e._animateFuncs?t.animateType:"normal",e._animateFunc=e._animateFuncs[e.animateType],e._animateReverse=function(){var t=[];for(var o in e._animateFuncs)e._animateFuncs.hasOwnProperty(o)&&e._animateFuncs[o].reverse&&t.push(o);return t}(),e.isVertical&&"card"===e.animateType&&(e.isOverspread=!0),e.log=t.isDebug?function(){s.console.log.apply(s.console,arguments)}:n,e._damping=function(){return function(t){return.62*Math.atan(Math.abs(t)/e.scale)*(1-e.dampingForce)*e.scale*(t>0?1:-1)}}(),e.animateTime=null!=t.animateTime&&t.animateTime>-1?t.animateTime:300,e.animateEasing=a(t.animateEasing,g.EASING[0])||g.EASING[1].test(t.animateEasing)?t.animateEasing:"ease",e.deviceEvents=g.DEVICE_EVENTS,e.fingerRecognitionRange=t.fingerRecognitionRange>-1?parseInt(t.fingerRecognitionRange):10,e.events={},g.EVENTS.forEach(function(o){var i=t["on"+o.toLowerCase()];"function"==typeof i&&e.on(o,i,1)}),e.pluginConfig=function(){var e={};return r(t.plugins)&&t.plugins.forEach(function(t){r(t)?e[t[0]]=t.slice(1):"string"==typeof t&&(e[t]=[])}),e}()},f._initPlugins=function(){var e=this.pluginConfig,t=this._plugins;for(var o in e)e.hasOwnProperty(o)&&t.hasOwnProperty(o)&&(this.log("[INIT PLUGIN]:",o,t[o]),t[o]&&"function"==typeof t[o]&&typeof t[o].apply&&t[o].apply(this,e[o]));this.fire("pluginInitialized")},f._itemType=function(e){if(isNaN(e)||(e=this.data[e]),e.hasOwnProperty("type"))return e.type;var t,o=e.content,i=g.NODE_TYPE;return t=null==o?i.empty:Boolean(o.nodeName)&&Boolean(o.nodeType)?i.node:"string"==typeof o?u(o)?i.pic:i.html:i.unknown,e.type=t,t},f._renderItem=function(e,t){var o,i=this,s=this.data.length,n=function(){var t=' src="'+o.content+'"';t+=o.height/o.width>i.ratio?' height="100%"':' width="100%"',i.isOverspread&&(e.style.cssText+="background-image:url("+o.content+");background-repeat:no-repeat;background-position:50% 50%;background-size:cover",t+=' style="display:block;opacity:0;height:100%;width:100%;"'),e.innerHTML="<img"+t+" />"};if(e.innerHTML="",e.style.background="",this.isLooping||null!=this.data[t]){t=(s+t)%s,o=this.data[t];var a=this._itemType(o),r=g.NODE_TYPE;switch(this.log("[RENDER]:",a,t,o),e.className="islider-"+a,a){case r.pic:if(2===o.load)n();else{var l=new Image;l.src=o.content,l.onload=function(){o.height=l.height,o.width=l.width,n(),o.load=2}}break;case r.dom:case r.html:e.innerHTML=o.content;break;case r.node:case r.element:if(11===o.content.nodeType){var c=document.createElement("div");c.appendChild(o.content),o.content=c}e.appendChild(o.content)}}},f._renderIntermediateScene=function(){null!=this._intermediateScene&&(this._renderItem.apply(this,this._intermediateScene),this._intermediateScene=null)},f._changedStyles=function(){var e=["islider-prev","islider-active","islider-next"];this.els.forEach(function(t,o){d(t,e.join("|")),p(t,e[o]),this.fillSeam&&this.originScale(t)}.bind(this))},f._renderWrapper=function(){var e;this.outer?(e=this.outer,e.innerHTML=""):e=document.createElement("ul"),e.className="islider-outer",this.els=[];for(var t=0;t<3;t++){var o=document.createElement("li");this.els.push(o),this._animateFunc(o,this.axis,this.scale,t,0),this.fixPage||(o.style.overflow="auto"),!this.isVertical||"rotate"!==this.animateType&&"flip"!==this.animateType?this._renderItem(o,t-1+this.slideIndex):this._renderItem(o,1-t+this.slideIndex),e.appendChild(o)}this._changedStyles(),this.fillSeam&&this.els.forEach(function(e,t){p(e,"islider-sliding"+(1===t?"-focus":""))}),s.setTimeout(function(){this._preloadImg(this.slideIndex)}.bind(this),200),this.outer||(this.outer=e,this.wrap.appendChild(e)),this.currentEl=this.els[1],this.fire("renderComplete",this.slideIndex,this.currentEl,this)},f._preloadImg=function(e){if(this.data.length>3){var t=this.data,o=t.length,i=this,s=function(e){var o=t[e];if("pic"===i._itemType(o)&&!o.load){var s=new Image;s.src=o.content,s.onload=function(){o.width=s.width,o.height=s.height,o.load=2},o.load=1}};s((e+2)%o),s((e-2+o)%o)}},f._watchTransitionEnd=function(e,t){this._unWatchTransitionEnd();var o=function(){this._unWatchTransitionEnd(),"slideChanged"===t&&this._changedStyles(),this.fire.call(this,t,this.slideIndex,this.currentEl,this),this._renderIntermediateScene(),this.play(),this.onSliding=!1,this.direction=null}.bind(this);g.TRANSITION_END_EVENT&&(this.currentEl.addEventListener(g.TRANSITION_END_EVENT,o),this._transitionEndHandler={el:this.currentEl,handler:o}),this._LSN.transitionEnd=s.setTimeout(o,e)},f._unWatchTransitionEnd=function(){this._LSN.transitionEnd&&s.clearTimeout(this._LSN.transitionEnd),null!==this._transitionEndHandler&&(this._transitionEndHandler.el.removeEventListener(g.TRANSITION_END_EVENT,this._transitionEndHandler.handler),this._transitionEndHandler=null)},f.rebindTouch=function(){var e=this.outer,t=this.deviceEvents;this.isTouchable||(t.hasTouch||(e.style.cursor="pointer",e.ondragstart=function(e){return!e}),e.addEventListener(t.startEvt,this),e.addEventListener(t.moveEvt,this),e.addEventListener(t.endEvt,this),!t.hasTouch&&e.addEventListener("mouseout",this),this.isTouchable=!0)},f._bindHandler=function(){var e=this.outer,t=this.deviceEvents;this.isTouchable&&(t.hasTouch||(e.style.cursor="pointer",e.ondragstart=function(e){return!e}),e.addEventListener(t.startEvt,this),e.addEventListener(t.moveEvt,this),e.addEventListener(t.endEvt,this),!t.hasTouch&&e.addEventListener("mouseout",this)),s.addEventListener(t.resizeEvt,this),s.addEventListener("focus",this,!1),s.addEventListener("blur",this,!1)},f.handleEvent=function(e){var t=this.deviceEvents;switch(e.type){case"mousedown":if(0!==e.button)break;case"touchstart":this.startHandler(e);break;case t.moveEvt:this.moveHandler(e);break;case t.endEvt:case t.cancelEvt:this.endHandler(e);break;case t.resizeEvt:this.resizeHandler();break;case"focus":this.play();break;case"blur":this.pause()}},f.startHandler=function(e){if(this.fixPage&&g.FIX_PAGE_TAGS.indexOf(e.target.tagName.toUpperCase())<0&&!this._isItself(e.target)&&e.preventDefault(),!this._holding&&!this._locking){var t=this.deviceEvents;this.onMoving=!0,this.pause(),this.log("[EVENT]: start"),this.fire("slideStart",e,this),this.startTime=(new Date).getTime(),this.startX=t.hasTouch?e.targetTouches[0].pageX:e.pageX,this.startY=t.hasTouch?e.targetTouches[0].pageY:e.pageY}},f.moveHandler=function(e){if(this.onMoving){this.log("[EVENT]: moving");var t=this.deviceEvents,o=this.data.length,i=this.axis,s=this.reverseAxis,n={};e.hasOwnProperty("offsetRatio")?(n[i]=e.offsetRatio*this.scale,n[s]=0):(n.X=t.hasTouch?e.targetTouches[0].pageX-this.startX:e.pageX-this.startX,n.Y=t.hasTouch?e.targetTouches[0].pageY-this.startY:e.pageY-this.startY),this.offset=n,e.offsetRatio=n[i]/this.scale,Math.abs(n[i])-Math.abs(n[s])>10&&(e.preventDefault(),this._unWatchTransitionEnd(),this.isLooping||(n[i]>0&&0===this.slideIndex||n[i]<0&&this.slideIndex===o-1)&&(n[i]=this._damping(n[i])),this.els.forEach(function(e,t){e.style.visibility="visible",g.setStyle(e,"transition","none"),this._animateFunc(e,i,this.scale,t,n[i],n[i]),this.fillSeam&&this.seamScale(e)}.bind(this)),this.fire("slide",e,this))}},f.endHandler=function(e){function t(o){if(null!=o)if("A"===o.tagName){if(o.href)return"_blank"===o.getAttribute("target")?s.open(o.href):s.location.href=o.href,e.preventDefault(),!1}else{if("LI"===o.tagName&&o.className.search(/^islider\-/)>-1)return!1;t(o.parentNode)}}if(this.onMoving){this.log("[EVENT]: end"),this.onMoving=!1;var o=this.offset,i=this.axis,n=this.scale/2,a=(new Date).getTime(),r=this.fingerRecognitionRange;n=a-this.startTime>300?n:14;var l=Math.abs(o[i]),c=Math.abs(o[this.reverseAxis]);this.fire("slideEnd",e,this),o[i]>=n&&c<l?this.slideTo(this.slideIndex-1):o[i]<-n&&c<l?this.slideTo(this.slideIndex+1):Math.abs(this.offset[i])>=r&&this.slideTo(this.slideIndex),Math.abs(this.offset[i])<r&&this.fixPage&&e.target&&t(e.target),this.offset.X=this.offset.Y=0}},f.resizeHandler=function(){var e,t,o=this._LSN.resize,i=+new Date;this.deviceEvents.hasTouch?(o&&s.clearInterval(o),o=s.setInterval(function(){this.height!==this.wrap.offsetHeight||this.width!==this.wrap.offsetWidth?(o&&s.clearInterval(o),o=s.setInterval(function(){e===this.wrap.offsetWidth&&t===this.wrap.offsetHeight?(o&&s.clearInterval(o),this.reset(),this.log("[EVENT]: resize")):(e=this.wrap.offsetWidth,t=this.wrap.offsetHeight);
}.bind(this),12)):+new Date-i>=1e3&&o&&s.clearInterval(o)}.bind(this),12)):(o&&s.clearTimeout(o),o=s.setTimeout(function(){this.height===this.wrap.offsetHeight&&this.width===this.wrap.offsetWidth||(o&&s.clearInterval(o),this.reset(),this.log("[EVENT]: resize"))}.bind(this),200))},f.slideTo=function(e,t){if(this.isAutoplay&&this.pause(),!this._locking){this.unhold(),this.onSliding=!0;var o,i=this.animateTime,s=this.animateType,n=this._animateFunc,r=this.data,l=this.els,c=this.axis,u=e,h=e-this.slideIndex,m=this.offset,f=0;"object"==typeof t&&(t.animateTime>-1&&(i=t.animateTime),"string"==typeof t.animateType&&t.animateType in this._animateFuncs&&(s=t.animateType,n=this._animateFuncs[s])),0!==m[c]&&(f=Math.abs(m[c])/this.scale*i),Math.abs(h)>1&&this._renderItem(h>0?this.els[2]:this.els[0],u),this._preloadImg(u),r[u]?this.slideIndex=u:this.isLooping?this.slideIndex=h>0?0:r.length-1:h=0,this.log("[SLIDE TO]: "+this.slideIndex);var v,y,b;0===h?o="slideRestore":((this.isVertical&&a(s,this._animateReverse))^h>0?(l.push(l.shift()),v=l[2],y=l[0],b=1):(l.unshift(l.pop()),v=l[0],y=l[2],b=-1),this.currentEl=l[1],1===Math.abs(h)?(this._renderIntermediateScene(),this._renderItem(v,u+h)):Math.abs(h)>1&&(this._renderItem(v,u+b),this._intermediateScene=[y,u-b]),g.setStyle(v,"transition","none"),f=i-f,o="slideChange",this.fillSeam&&(l.forEach(function(e){d(e,"islider-sliding|islider-sliding-focus")}),p(this.currentEl,"islider-sliding-focus"),p(v,"islider-sliding")),this.direction=b);for(var _=0;_<3;_++)l[_]!==v&&g.setStyle(l[_],"transition",(n.effect||"all")+" "+f+"ms "+this.animateEasing),n.call(this,l[_],c,this.scale,_,0,b),this.fillSeam&&this.seamScale(l[_]);this._watchTransitionEnd(f,o+"d"),this.fire(o,this.slideIndex,this.currentEl,this)}},f.slideNext=function(){this.slideTo.apply(this,[this.slideIndex+1].concat(h(arguments)))},f.slidePrev=function(){this.slideTo.apply(this,[this.slideIndex-1].concat(h(arguments)))},f.regPlugin=function(){var e=h(arguments),t=e.shift(),o=e[0];(this._plugins.hasOwnProperty(t)||"function"==typeof o)&&("function"==typeof o&&(this._plugins[t]=o,e.shift()),a(t,this._opts.plugins)||(this._opts.plugins.push(e.length?[].concat([t],e):t),"function"==typeof this._plugins[t]&&this._plugins[t].apply(this,e)))},f.bind=f.delegate=function(e,t,o){function i(e){for(var i=s.event?s.event:e,n=i.target,a=document.querySelectorAll(t),r=0;r<a.length;r++)if(n===a[r]){o.call(n);break}}this.wrap.addEventListener(e,i,!1);var n=e+";"+t;this._EventHandle.hasOwnProperty(n)?(this._EventHandle[n][0].push(o),this._EventHandle[n][1].push(i)):this._EventHandle[n]=[[o],[i]]},f.unbind=f.unDelegate=function(e,t,o){var i=e+";"+t;if(this._EventHandle.hasOwnProperty(i)){var s=this._EventHandle[i][0].indexOf(o);if(s>-1)return this.wrap.removeEventListener(e,this._EventHandle[i][1][s]),this._EventHandle[i][0][s]=this._EventHandle[i][1][s]=null,!0}return!1},f.destroy=function(){var e=this.outer,t=this.deviceEvents;this.fire("destroy"),this.isTouchable&&(e.removeEventListener(t.startEvt,this),e.removeEventListener(t.moveEvt,this),e.removeEventListener(t.endEvt,this),!t.hasTouch&&e.removeEventListener("mouseout",this)),s.removeEventListener(t.resizeEvt,this),s.removeEventListener("focus",this),s.removeEventListener("blur",this);var o;for(o in this._EventHandle)for(var i=this._EventHandle[o][1],n=0;n<i.length;n++)"function"==typeof i[n]&&this.wrap.removeEventListener(o.substr(0,o.indexOf(";")),i[n]);this._EventHandle=null;for(o in this._LSN)this._LSN.hasOwnProperty(o)&&this._LSN[o]&&s.clearTimeout(this._LSN[o]);this._LSN=null,this.wrap.innerHTML=""},f.on=function(e,t,o){a(e,g.EVENTS)&&"function"==typeof t&&(!(e in this.events)&&(this.events[e]=[]),o?this.events[e].unshift(t):this.events[e].push(t))},f.has=function(e,t){return e in this.events&&-1<this.events[e].indexOf(t)},f.off=function(e,t){if(e in this.events){var o=this.events[e].indexOf(t);o>-1&&delete this.events[e][o]}},f.fire=function(e){var t=h(arguments,1);e.split(/\x20+/).forEach(function(e){if(this.log("[EVENT FIRE]:",e,t),e in this.events)for(var o=this.events[e],i=0;i<o.length;i++)"function"==typeof o[i]&&o[i].apply&&o[i].apply(this,t)}.bind(this))},f.reset=function(){this.pause(),this._unWatchTransitionEnd(),this.width="number"==typeof this._opts.width?this._opts.width:this.wrap.offsetWidth,this.height="number"==typeof this._opts.height?this._opts.height:this.wrap.offsetHeight,this.ratio=this.height/this.width,this.scale=this.isVertical?this.height:this.width,this._renderWrapper(),this._autoPlay(),this.fire("reset slideRestored",this.slideIndex,this.currentEl,this)},f.loadData=function(e,t){this.pause(),this._unWatchTransitionEnd(),this.slideIndex=t||0,this.data=e,this._renderWrapper(),this._autoPlay(),this.fire("loadData slideChanged",this.slideIndex,this.currentEl,this)},f.pushData=function(e){var t=this.data.length;this.data=this.data.concat(e),this.isLooping&&0===this.slideIndex?this._renderItem(this.els[0],this.data.length-1):t-1===this.slideIndex&&(this._renderItem(this.els[2],t),this._autoPlay())},f.unshiftData=function(e){if(e){r(e)||(e=[e]);var t=e.length;this.data=e.concat(this.data),0===this.slideIndex&&this._renderItem(this.els[0],t-1),this.slideIndex+=t}},f._autoPlay=function(){this.delay>0?s.setTimeout(this.play.bind(this),this.delay):this.play()},f.play=function(){this.pause(),this.isAutoplay&&(this.isLooping||this.slideIndex<this.data.length-1)&&(this._LSN.autoPlay=s.setTimeout(this.slideNext.bind(this),this.duration))},f.pause=function(){this._LSN.autoPlay&&s.clearTimeout(this._LSN.autoPlay)},f.hold=function(){this._holding=!0},f.unhold=function(){this._holding=!1,this.unlock()},f.lock=function(){this.hold(),this._locking=!0},f.unlock=function(){this._locking=!1},f.seamScale=function(e){var t=/scale([XY]?)\(([^\)]+)\)/,o=g.getStyle(e,"transform");t.test(o)?g.setStyle(e,"transform",o.replace(t,function(e,t,o){var i={};return t?(i[t]=parseFloat(o),"scale"+this.axis+"("+(t===this.axis?1.001*i[this.axis]:1.001)+")"):(o.indexOf(",")>-1?(o=o.split(","),i.X=parseFloat(o[0]),i.Y=parseFloat(o[1])):i.Y=i.X=parseFloat(o),i[this.axis]*=1.001,"scale("+i.X+", "+i.Y+")")}.bind(this))):g.setStyle(e,"transform",o+" scale"+this.axis+"(1.001)")},f.originScale=function(e){var t=/([\x20]?scale)([XY]?)\(([^\)]+)\)/;g.setStyle(e,"transform",g.getStyle(e,"transform").replace(t,function(e,t,o,i){return e={},o?"1.001"===i?"":(e[o]=parseFloat(i),"scale"+this.axis+"("+(o===this.axis?e[this.axis]/1.001:1)+")"):(i.indexOf(",")>-1?(i=i.split(","),e.X=parseFloat(i[0]),e.Y=parseFloat(i[1])):e.Y=e.X=parseFloat(i),e[this.axis]/=1.001,"scale("+e.X+", "+e.Y+")")}.bind(this)))},f._isItself=function(e){var t=this.fixPage;if("string"==typeof t){for(var o,i=[],s=e;!c(s,"islider-outer")&&s!==this.wrap;)i.push(s),s=s.parentNode;if(s=i.pop(),i.length)try{if(o=Array.prototype.slice.call(s.querySelectorAll(t)),o.length)for(var n=0;n<i.length;n++)if(o.indexOf(i[n])>-1)return!0}catch(e){return!1}}return!1},f.subjectTo=function(e,t){if(!(!e instanceof g)){var o=this;o.animateTime=e.animateTime,o.isLooping=e.isLooping,o.isAutoplay=!1,e.on("slideStart",function(e){o.startHandler(e)}),e.on("slide",function(e){o.moveHandler(e)}),e.on("slideEnd",function(e){o.endHandler(e)}),e.on("slideChange",function(e){var t=o.data.length,i=o.direction;i>0&&(e-o.slideIndex+t)%t===1?o.slideNext():i<0&&(e-o.slideIndex-t)%t===-1&&o.slidePrev()}),e.on("slideRestore",function(e){o.slideIndex!==e&&o.slideTo(e)})}},g.regPlugin("dot",function(e){function t(){var e=document.createDocumentFragment();n.forEach(function(e,t){e.removeEventListener(r,a[t],!1)}),n=[],a=[],p.innerHTML="";for(var t=0;t<s.length;t++)n[t]=document.createElement("li"),n[t].className=c,n[t].setAttribute("index",t),t===i.slideIndex&&(n[t].className+=" active"),a[t]=function(){i.slideTo(parseInt(this.getAttribute("index"),10))},n[t].addEventListener(r,a[t],!1),e.appendChild(n[t]);p.appendChild(e)}function o(e){return"relative"===e?i.wrap:Boolean(e.nodeName)&&Boolean(e.nodeType)?e:i.wrap.parentNode}var i=this,s=i.data,n=[],a=[],r=i.deviceEvents.endEvt,l=e.dotWrapClass||"islider-dot-wrap",c=e.dotClass||"islider-dot",p=document.createElement("ul");p.className=l,t(),o(!(!e||null==e.locate)&&e.locate).appendChild(p),i.on("slideChange",function(){for(var e=0;e<s.length;e++)n[e].className=c,e===this.slideIndex&&(n[e].className+=" active")}),i.on("loadData",function(){s=this.data,t()},1)}),"object"==typeof e&&e&&"object"==typeof t&&t?e.exports=g:o("./node_modules/webpack/buildin/amd-define.js").amd?(i=function(){return g}.call(t,o,t,e),!(void 0!==i&&(e.exports=i))):s.iSlider=s.iSlider||g}(window||this)}).call(t,o("./node_modules/webpack/buildin/module.js")(e))},"./node_modules/webpack/buildin/module.js":function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},"./node_modules/webpack/buildin/amd-define.js":function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},"./components/widgets/DownloadNotification/index.js":function(e,t,o){"use strict";var i=o("./components/vendor/react.min.js"),s="undefined"!=typeof window?o("./components/common/index.js"):{},n=o("./components/widgets/Group/util.js"),a={src:"weixin",campaign:"gzh",cid:"appzxdownload"},r=i.createClass({displayName:"DownloadNotification",getInitialState:function(){return{style:{display:"none"}}},getDefaultProps:function(){return{title:"",content:"",queries:{},show:!1}},componentWillReceiveProps:function(e){e.show===!1&&this.hide(),e.show===!0&&this.show()},hide:function(){this.setState({style:{display:"none"}}),"function"==typeof this.props.hideFunc&&s.util.call(this.props.hideFunc)},show:function(){this.setState({style:{display:""}})},getSendData:function(e,t){var o={},i=e.groupOrderID,a=e.goodsName,r=e.thumbUrl,l=n.getUserAgentInfo();return o=s.util.extend(l,{group_order_id:i,group:{goods_name:a,thumb_url:r}}),t||(o.confirm="去购买",o.goods={goods_id:e.goodsID,status:e.status,group_role:e.groupRole}),o},downloadApp:function(e,t){var o=this,i="download.html?"+s.url.buildQuery(a,o.props.queries);if(e){var n=this.getSendData(e,t);if(n.version&&n.platform){var r="/app_group/track/set";s.request.apiRequest("POST",r,n,function(e){e&&e.success===!0&&s.navigation.forward(i)},function(e){},null,null,!1,!1,!0)}}else s.navigation.forward(i)},componentDidMount:function(){this.show()},render:function(){var e=o("./node_modules/url-loader/index.js?limit=1000000!./components/widgets/DownloadNotification/images/cancel_icon.png"),t=this.props.data,s=this.props.joinGroup;return i.createElement("div",{style:this.state.style,className:"lotteryRuleContainer"},i.createElement("div",{id:"lotteryRuleMask"}),i.createElement("div",{className:"lotteryRule lotteryRuleModule"},i.createElement("img",{src:e,className:"lotteryRuleCancelImg",onClick:this.hide}),i.createElement("span",{className:"lotteryRuleHead lotteryRuleModuleHead"},i.createElement("p",{className:"font-size:18px;"},this.props.title),i.createElement("div",{style:{padding:"20px",fontSize:"15px",fontWeight:"normal"}},i.createElement("div",null,this.props.content)),i.createElement("div",{style:{borderRadius:"5px",margin:"40px 13px 13px 13px",padding:"10px",textAlign:"center",backgroundColor:"#fe243d"},onClick:this.downloadApp.bind(this,t,s)},i.createElement("div",{style:{fontSize:"18px",color:"white",fontWeight:"normal"}},"下载APP")))))}});e.exports=r},"./components/widgets/Group/util.js":function(e,t){"use strict";e.exports={formatTime:function(e,t){t=t||"yyyy/MM/dd hh:mm:ss";var o={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var i in o)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?o[i]:("00"+o[i]).substr((""+o[i]).length)));return t},transferToTime:function(e,t){t=t||{};var o=Math.floor(e/1e3),i=Math.floor(o/3600);if(t.onlyHour)return i;i<10&&(i="0"+i),o%=3600;var s=Math.floor(o/60);if(s<10&&(s="0"+s),o%=60,o<10&&(o="0"+o),t.removeHours)return[s,o].join(":");if(t.needMs){var n=Math.floor(e%1e3)/100;return[i,s,o,n].join(":")}return[i,s,o].join(":")},getStringCharLength:function(e){for(var t=0,o=0;o<e.length;o++)t+=e.charCodeAt(o)<0||e.charCodeAt(o)>255?2:1;return t},utfStrTruncation:function(e,t,o){o=o||"...";var i=this.getStringCharLength(e);if(i<=t)return e;for(var s=e,n=0,a=0;n<e.length;n++)if(a+=e.charCodeAt(n)<0||e.charCodeAt(n)>255?2:1,a>t){s=e.slice(0,n)+o;break}return s},getUserAgentInfo:function(){var e=navigator.userAgent,t="",o="",i="";return e.indexOf("Android")!==-1?(t=e.slice(e.indexOf("Android")),o=t.slice("Android".length,t.indexOf(";")),i="Android"):e.indexOf("iPhone")!==-1?(i="iOS",t=e.slice(e.indexOf("iPhone OS")),o=t.slice("iPhone OS".length,t.indexOf("like"))):e.indexOf("iPad")!==-1&&(i="iOS",t=e.slice(e.indexOf("CPU OS")),o=t.slice("CPU OS".length,t.indexOf("like"))),o=o.replace(/_/g,".").trim(),{platform:i,version:o}}}},"./node_modules/url-loader/index.js?limit=1000000!./components/widgets/DownloadNotification/images/cancel_icon.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFMAAABTCAYAAADjsjsAAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo4REJDNzdDNDk4QkUxMUU1ODNCOENCNEI3QUIxNzI1QiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo4REJDNzdDNTk4QkUxMUU1ODNCOENCNEI3QUIxNzI1QiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjhEQkM3N0MyOThCRTExRTU4M0I4Q0I0QjdBQjE3MjVCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjhEQkM3N0MzOThCRTExRTU4M0I4Q0I0QjdBQjE3MjVCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+/1rBewAABtVJREFUeNrsnVtsFFUYx09LKd1SLml9oLVUIRZReCIaEmNrIiWlionW6EvxkhAoqI1pxNbUcBMlUq08gFJISLwVH4yNUQMKPNFEEzUkxkqAJl6gtDzYipR2Sy/W7z/7nXY6bHdnd+fMnN2dL/knpWznfN9vz/WbM2cy/rnnQeFb/LbwXMfkz1ka+HM7aSVpOelu0jJSEamAFCDNI90kDZKukQZIf5Muki6QzpM6SVe8DsQLmPmkKtI6UjmpxMbfzGHlm363xvKZS6QzpG9JJ0j9qQoTIJ4kbSBVkGYrKKOErw+Nkk6R2khfcM1WbpmKr4/m+japhwOrUgTSaijjES6zh30oSlaY6AcPkv4gNVqapxfdSiP78j77lhQwMWBsJ3WRXiRlazTwwpcX2Lcd7Ku2MCt4VH1DhaMOf+G72de1usEMcJM+SVqaRFNE+Pod6QOnvvxEYWJO+CM36YwknHPD560cwzIvYWJk/okn3MluKzmWKi9gbiJ9RZqfQivD+RzTJjdhNpAOa7IUVbGIQWyvugFzG2lfkvaPsfSjzRyrMphbuZB0sWaO2XGYj5IOpHiNDFdDEfNjTsIs5TXuLJF+hpg/sTttigYzl9ROWiDS1xYwg9xEYbakyDwyUVtB2p8ITKxba32O0+bWa+OBiSrdmmYDjp0BqTVSc8+MMJ9c6vO7xZZGmtCHg1koQslU32ZeARbahbnNzsiVxpY70+rICvM20mafV1TbzKwiwqwn5fmsohoYvRwJZo6qqdCchi0ia/3DrkUaaNlhSLFh3T7H/AtzGq1ahHZROG45T1eLjNyAGFlfKYa2qB3bclv3iezyB8R/ff0iqBYmWGEvwLFwNbNGVak36pvExFDQCBLBqgaJsgab9rjRCDaEa+b5wuE7dWYb7/hZOVAzSJSFMl2wimv3luVbYWLfj9KdFiqB5ux+xbimbAUugRTMbJ0VZpUbJSPI4NGPjZ+dApq9dYPIeepx4+ehA4fdBCms7CTMMrdKHjn0qRG0E0ABMreudhIkru2BlZthFpPucLN0J4BqAhJWQv1msYS5ygsPEgE6q+w+Edj4rA4gpa2SMD1L/sYDFCDz9u8NzVvPfK8DSCEZAmapl17EAtQKUvUCIAYrlTDv9NoTO0AzV9ylK0ghxxzAXKSDN5GAZiwqEHPf26MrSFihhFmgi0fhgAJk3kcHxazFxWL8crcI7tJyH0S+THTk6OSVHFAw7QHQ2d98ZtRIgLzx3Eti4mqfjjADsmbO080zAA1+2BZq4gTSWG/rC1JIhpk6eoamnb3moal/E9DArgahuwHmgG5OyT4SNXL48y8dXcsrsgEJc1gnrwBMgkQGaHhnixiorXclH5qABSXMPp1AhstJupEPTdD6JcyrOoGEhctJWoHmtR81+lZNrFfC/NNrT3DDTYKMlJM0A81avszoWzUB+peE2eWlF0ilBZ6vsZ0BMgNF36oJ0C4Js9NLkPHkJCVQTOQ1AdopYZ71GiQm6LGm0gygNJHXBOhZCbNbhB58d83MyV0kLm42t8Z1HayINAB6aeG5jm7zCuiMmyCdTKVpALTDvAKCnUhGkJoAPW6FiXMtRlWvt1UmdyXQsfMX3QQ6yuymwcQM/rRSkAiOU2mqcpIG0OqNxpflEtDT1F/2W2HClN2ZQsZHJnfdSKWh1kugirNN05iZd8G1cw11/DyNsV9+DU2BqEa6lZME0HFaWY39oGyHRx8zm2qBlhO33iI1Cd/s2F7S6+YTt6zJYTw4NOhzimqDIsxDVlaYOBbsiM8qqh1hVhFhwt5Bl+Pzmrk7Jr0b7j/CwexloL6FN4DssQsThong7z63Wwynds2Y5s+MUJW3YB7s85taEzCToVhhwnDKX6vPcNLA4mSkD0S7b47H2s75HA0GUQ9AiQYTVfoJ0r9pDBKxV9uZ4djZ0YHjaJ8hjachyHGO/YKdD9vdHvM1qS4NB6Q6jl04CRN2SKTXc+gNHLNQAVOujhpTvIZOcIwxL1zi2QXXzPOtVOxDxzm2uLLX8W4pxEIfJ1FdTyGQ1zmmuBM9iezPxE24+4WHmxgctE6OJaEbi4ludsW0aTV31MnYj06w76s5FuElTDmxxynTlZwISKakRSX77kjK0clt2FjL45gvnIYd1BgifHuTfT3l5IUzFTi6U4Se2ELzGdEI4gj7BN+2q/jCVT0gcIWbzxIRyv/1ewixn31Ywj4pezuL6qctkJF+TYTeK1HDo+WoCwBRxnEus4h96FFdqFuHMOOtJ8dY8bzCxo6lzStsrM2ujQVbzIOB+eVKeBYRJ1rhqLC5/LlBHnVxV7BXTH+50m+ky153yv8LMADFEoFE0nkfqgAAAABJRU5ErkJggg=="},"./constants/tracking/portal.js":function(e,t){"use strict";var o=function(){return{CategoryBoardClick:{op:"click",event:"sub_opt_entry_clk",page_name:"index",page_section:"opt",page_element:"sub_opt"},VisitPortal:{op:"pv",event:"index_show",page_name:"index"},BannerClick:{op:"click",event:"top_banner_clk",page_name:"index",page_section:"top_banner"},EntryClick:{op:"click",event:"icon_clk",page_name:"index",page_section:"icon_list"},MainGoodsClick:{op:"click",event:"goods_clk",page_name:"index",page_section:"goods_list"},MainGoodsButtonClick:{op:"click",event:"buy_clk",page_name:"index",page_section:"goods_list",page_element:"buy_btn"},MainSubjectGoodsClick:{op:"click",event:"subject_goods_clk",page_name:"index",page_section:"subject"},MainSubjectForMore:{op:"click",event:"subject_more_clk",page_name:"index",page_section:"subject",page_element:"more_btn"},TopBarClick:{op:"click",event:"opt_entry_clk",page_name:"index",page_section:"opt_list",page_element:"opt"},SuperSpikeVisitTrackingData:{op:"click",event:"super_spike_clk",page_name:"index"},CategoryGoodsClick:{op:"click",event:"opt_goods_clk",page_name:"index",page_section:"opt_goods_list"},CategoryGoodsImpr:{op:"impr",event:"opt_goods_impr",page_section:"opt_goods_list"},SortTypeBarClick:{op:"click",event:"sort_btn_clk",page_name:"index",page_element:"sort_btn"},RecommendEntranceClick:{op:"click",page_name:"index",page_section:"icon_list_2",page_element:"icon"},ForceContact:{op:"impr",page_name:"index",page_section:"subscribe_popup",style:"qrcode"}}}();e.exports=o},"./components/widgets/QuickEntrance2/index.js":function(e,t,o){"use strict";o("./components/widgets/QuickEntrance2/style.scss");var i=o("./components/vendor/react.min.js"),s="undefined"!=typeof window?o("./components/common/index.js"):{},n=(o("./components/common/util.js"),o("./constants/index.js").Modules.Entrance.key),a=o("./components/common/uiWidgets/redPoint/index.js"),r=o("./components/common/image.js"),l=o("./constants/tracking/portal.js"),c=o("./constants/user/grade.js"),p=o("./components/widgets/QuickEntrance2/iScrollAdapter.js"),d=.75,u=i.createClass({displayName:"QuickEntrance",iScrollAdapter:null,hasRefreshed:!1,getInitialState:function(){return{data:[]}},getDefaultProps:function(){return{data:[],webpEnable:!1,redPointData:{},grade:c.Role.BanList,useScroll:!1,needRefresh:!1}},goQuickEntrance:function(e){if(s.logger&&s.navigation&&"undefined"!=typeof localStorage){var t=this.props.data[e];t.redPointKey&&a.tick(t.redPointKey);var o=l.EntryClick;o.page_element=t.pageSrc,o.idx=parseInt(e||0,10),s.logger.trackingRecord(o,function(){t.key===n.Oversea?s.navigation.haitao():s.navigation.forward(t.forwardUrl)})}},dealData:function(e){var t=this;e=e||[],e.length&&null!==e[0].priority&&e.sort(function(e,t){return e.priority-t.priority});var o,i=[],a=t.props.grade;s.user&&(a=a||s.user.getGrade(),o=s.user.selfInfo.getInstance(a));var l=!1,p=!1;return o?(l=o.getShowPortalLotteryIcon(),p=o.getShowPortalFreeTrialIcon()):(l=!!(c.Result[a][c.Scene.PortalLottery]&c.ExtraField.PortalLottery.Icon),p=!!(c.Result[a][c.Scene.PortalFreeTrial]&c.ExtraField.PortalFreeTrial.Icon)),e.forEach(function(e,o){/\.gif$/.test(e.imgUrl)||(e.imgUrl=r.cdnCompress(e.imgUrl,null,t.props.webpEnable)),e.key===n.TimeSpike&&(e.tipImgUrl=r.getCDNImgURL("entrance/active_red_point.gif")),e.key===n.Lottery?e.show=l:e.key===n.FreeTrial?e.show=p:e.key===n.Oversea&&(e.show=!p),e.show&&i.push(e)}),i},componentWillMount:function(){this.data=this.dealData(this.props.data)},componentDidMount:function(){var e=this;a.updateData(this.props.redPointData),this.props.useScroll&&(d=.77,this.iScrollAdapter=new p,this.iScrollAdapter.load({containerID:"quick-entrance-3",itemsQueryString:"#quick-entrance-3 .qe3-item",onItemTapped:function(t){e.goQuickEntrance(t)}}));var t=this.data||[];t.forEach(function(e,t){e.redPointKey&&a.updatePoint(e.redPointKey)})},componentWillReceiveProps:function(e){e=e||{},e.needRefresh&&!this.hasRefreshed&&(this.hasRefreshed=!0,this.iScrollAdapter.refresh())},render:function(){var e=this,t=this.data||this.dealData(this.props.data),o=Math.ceil(t.length/2),s=[t.slice(0,o),t.slice(o)],n=s.map(function(t,s){var n=t.map(function(t,n){var r;if(t.redPointKey){var l=a.getID(t.redPointKey);r=i.createElement("redPoint",{id:l}),t.showDynamicTip&&(r=i.createElement("redPoint",{id:l,className:"no-default-redpoint"},i.createElement("div",{className:"entrance-icon-tip"},i.createElement("img",{className:"entrance-icon-tip-img",src:t.tipImgUrl}))))}var c=s*o+n;return i.createElement("div",{key:c,"data-index":c,className:"qe3-item",onClick:function(t){if(!e.props.useScroll){var o=parseInt(t.currentTarget.dataset.index||0,10);e.goQuickEntrance(o)}}},i.createElement("div",{className:"qe3-cube"},i.createElement("div",{className:"qe3-item-img-box"},i.createElement("img",{src:t.imgUrl}),r),i.createElement("div",{className:"qe3-cube-text"},i.createElement("span",null,t.name))))});return i.createElement("li",{key:s,className:"qe3-row"},n)}),r=d*o+"rem",l={width:r},c="quick-entrance-3";return c+=this.props.useScroll?" quick-entrance-3-scroll":"",i.createElement("div",{id:"quick-entrance-3",className:c},i.createElement("ul",{className:"qe3-scroller",style:l},n))}});e.exports=u},"./components/widgets/QuickEntrance2/style.scss":function(e,t){},"./components/widgets/QuickEntrance2/iScrollAdapter.js":function(e,t,o){"use strict";function i(){this.containerID=null,this.itemsQueryString="",this.onItemTapped=null,this.iScrollInstance=null}var s="undefined"!=typeof window?o("./static/src/assets/js/module/iscroll-probe.js"):{};i.prototype.load=function(e){e=e||{},this.dealParams(e),this.validateParams()&&(this.setupModel(),this.finish())},i.prototype.dealParams=function(e){this.containerID=e.containerID||this.containerID,this.itemsQueryString=e.itemsQueryString||this.itemsQueryString,this.onItemTapped=e.onItemTapped||this.onItemTapped},i.prototype.validateParams=function(){return!!this.containerID},i.prototype.setupModel=function(){this.iScrollInstance=new s("#"+this.containerID,{scrollbars:!0,scrollX:!0,scrollY:!1,tap:!0,shrinkScrollbars:"scale",eventPassthrough:"vertical"})},i.prototype.finish=function(){var e=document.querySelectorAll(this.itemsQueryString)||[],t=this;if(t.onItemTapped&&e.length>0)for(var o=0;o<e.length;o++){var i=e[o];!function(e,o){e&&e.addEventListener("tap",function(){t.onItemTapped(o)})}(i,o)}},i.prototype.refresh=function(){this.iScrollInstance.refresh()},e.exports=i},"./static/src/assets/js/module/iscroll-probe.js":function(e,t,o){var i,s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};/*! iScroll v5.2.0 ~ (c) 2008-2016 Matteo Spinelli ~ http://cubiq.org/license */
!function(n,a,r){function l(e,t){this.wrapper="string"==typeof e?a.querySelector(e):e,this.scroller=this.wrapper.children[0],this.scrollerStyle=this.scroller.style,this.options={resizeScrollbars:!0,mouseWheelSpeed:20,snapThreshold:.334,disablePointer:!u.hasPointer,disableTouch:u.hasPointer||!u.hasTouch,disableMouse:u.hasPointer||u.hasTouch,startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0,bindToWrapper:"undefined"==typeof n.onmousedown};for(var o in t)this.options[o]=t[o];this.translateZ=this.options.HWCompositing&&u.hasPerspective?" translateZ(0)":"",this.options.useTransition=u.hasTransition&&this.options.useTransition,this.options.useTransform=u.hasTransform&&this.options.useTransform,this.options.eventPassthrough=this.options.eventPassthrough===!0?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY="vertical"!=this.options.eventPassthrough&&this.options.scrollY,this.options.scrollX="horizontal"!=this.options.eventPassthrough&&this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing="string"==typeof this.options.bounceEasing?u.ease[this.options.bounceEasing]||u.ease.circular:this.options.bounceEasing,this.options.resizePolling=void 0===this.options.resizePolling?60:this.options.resizePolling,this.options.tap===!0&&(this.options.tap="tap"),this.options.useTransition||this.options.useTransform||/relative|absolute/i.test(this.scrollerStyle.position)||(this.scrollerStyle.position="relative"),"scale"==this.options.shrinkScrollbars&&(this.options.useTransition=!1),this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1,3==this.options.probeType&&(this.options.useTransition=!1),this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable()}function c(e,t,o){var i=a.createElement("div"),s=a.createElement("div");return o===!0&&(i.style.cssText="position:absolute;z-index:9999",s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px"),s.className="iScrollIndicator","h"==e?(o===!0&&(i.style.cssText+=";height:7px;left:2px;right:2px;bottom:0",s.style.height="100%"),i.className="iScrollHorizontalScrollbar"):(o===!0&&(i.style.cssText+=";width:7px;bottom:2px;top:2px;right:1px",s.style.width="100%"),i.className="iScrollVerticalScrollbar"),i.style.cssText+=";overflow:hidden",t||(i.style.pointerEvents="none"),i.appendChild(s),i}function p(e,t){this.wrapper="string"==typeof t.el?a.querySelector(t.el):t.el,this.wrapperStyle=this.wrapper.style,this.indicator=this.wrapper.children[0],this.indicatorStyle=this.indicator.style,this.scroller=e,this.options={listenX:!0,listenY:!0,interactive:!1,resize:!0,defaultScrollbars:!1,shrink:!1,fade:!1,speedRatioX:0,speedRatioY:0};for(var o in t)this.options[o]=t[o];if(this.sizeRatioX=1,this.sizeRatioY=1,this.maxPosX=0,this.maxPosY=0,this.options.interactive&&(this.options.disableTouch||(u.addEvent(this.indicator,"touchstart",this),u.addEvent(n,"touchend",this)),this.options.disablePointer||(u.addEvent(this.indicator,u.prefixPointerEvent("pointerdown"),this),u.addEvent(n,u.prefixPointerEvent("pointerup"),this)),this.options.disableMouse||(u.addEvent(this.indicator,"mousedown",this),u.addEvent(n,"mouseup",this))),this.options.fade){this.wrapperStyle[u.style.transform]=this.scroller.translateZ;var i=u.style.transitionDuration;if(!i)return;this.wrapperStyle[i]=u.isBadAndroid?"0.0001ms":"0ms";var s=this;u.isBadAndroid&&d(function(){"0.0001ms"===s.wrapperStyle[i]&&(s.wrapperStyle[i]="0s")}),this.wrapperStyle.opacity="0"}}var d=n.requestAnimationFrame||n.webkitRequestAnimationFrame||n.mozRequestAnimationFrame||n.oRequestAnimationFrame||n.msRequestAnimationFrame||function(e){n.setTimeout(e,1e3/60)},u=function(){function e(e){return i!==!1&&(""===i?e:i+e.charAt(0).toUpperCase()+e.substr(1))}var t={},o=a.createElement("div").style,i=function(){for(var e,t=["t","webkitT","MozT","msT","OT"],i=0,s=t.length;i<s;i++)if(e=t[i]+"ransform",e in o)return t[i].substr(0,t[i].length-1);return!1}();t.getTime=Date.now||function(){return(new Date).getTime()},t.extend=function(e,t){for(var o in t)e[o]=t[o]},t.addEvent=function(e,t,o,i){e.addEventListener(t,o,!!i)},t.removeEvent=function(e,t,o,i){e.removeEventListener(t,o,!!i)},t.prefixPointerEvent=function(e){return n.MSPointerEvent?"MSPointer"+e.charAt(7).toUpperCase()+e.substr(8):e},t.momentum=function(e,t,o,i,s,n){var a,l,c=e-t,p=r.abs(c)/o;return n=void 0===n?6e-4:n,a=e+p*p/(2*n)*(c<0?-1:1),l=p/n,a<i?(a=s?i-s/2.5*(p/8):i,c=r.abs(a-e),l=c/p):a>0&&(a=s?s/2.5*(p/8):0,c=r.abs(e)+a,l=c/p),{destination:r.round(a),duration:l}};var l=e("transform");return t.extend(t,{hasTransform:l!==!1,hasPerspective:e("perspective")in o,hasTouch:"ontouchstart"in n,hasPointer:!(!n.PointerEvent&&!n.MSPointerEvent),hasTransition:e("transition")in o}),t.isBadAndroid=function(){var e=n.navigator.appVersion;if(/Android/.test(e)&&!/Chrome\/\d/.test(e)){var t=e.match(/Safari\/(\d+.\d)/);return!(t&&"object"===("undefined"==typeof t?"undefined":s(t))&&t.length>=2)||parseFloat(t[1])<535.19}return!1}(),t.extend(t.style={},{transform:l,transitionTimingFunction:e("transitionTimingFunction"),transitionDuration:e("transitionDuration"),transitionDelay:e("transitionDelay"),transformOrigin:e("transformOrigin")}),t.hasClass=function(e,t){var o=new RegExp("(^|\\s)"+t+"(\\s|$)");return o.test(e.className)},t.addClass=function(e,o){if(!t.hasClass(e,o)){var i=e.className.split(" ");i.push(o),e.className=i.join(" ")}},t.removeClass=function(e,o){if(t.hasClass(e,o)){var i=new RegExp("(^|\\s)"+o+"(\\s|$)","g");e.className=e.className.replace(i," ")}},t.offset=function(e){for(var t=-e.offsetLeft,o=-e.offsetTop;e=e.offsetParent;)t-=e.offsetLeft,o-=e.offsetTop;return{left:t,top:o}},t.preventDefaultException=function(e,t){for(var o in t)if(t[o].test(e[o]))return!0;return!1},t.extend(t.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),t.extend(t.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(e){return e*(2-e)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(e){return r.sqrt(1- --e*e)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(e){var t=4;return(e-=1)*e*((t+1)*e+t)+1}},bounce:{style:"",fn:function(e){return(e/=1)<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}},elastic:{style:"",fn:function(e){var t=.22,o=.4;return 0===e?0:1==e?1:o*r.pow(2,-10*e)*r.sin((e-t/4)*(2*r.PI)/t)+1}}}),t.tap=function(e,t){var o=a.createEvent("Event");o.initEvent(t,!0,!0),o.pageX=e.pageX,o.pageY=e.pageY,e.target.dispatchEvent(o)},t.click=function(e){var t,o=e.target;/(SELECT|INPUT|TEXTAREA)/i.test(o.tagName)||(t=a.createEvent(n.MouseEvent?"MouseEvents":"Event"),t.initEvent("click",!0,!0),t.view=e.view||n,t.detail=1,t.screenX=o.screenX||0,t.screenY=o.screenY||0,t.clientX=o.clientX||0,t.clientY=o.clientY||0,t.ctrlKey=!!e.ctrlKey,t.altKey=!!e.altKey,t.shiftKey=!!e.shiftKey,t.metaKey=!!e.metaKey,t.button=0,t.relatedTarget=null,t._constructed=!0,o.dispatchEvent(t))},t}();l.prototype={version:"5.2.0",_init:function(){this._initEvents(),(this.options.scrollbars||this.options.indicators)&&this._initIndicators(),this.options.mouseWheel&&this._initWheel(),this.options.snap&&this._initSnap(),this.options.keyBindings&&this._initKeys()},destroy:function(){this._initEvents(!0),clearTimeout(this.resizeTimeout),this.resizeTimeout=null,this._execEvent("destroy")},_transitionEnd:function(e){e.target==this.scroller&&this.isInTransition&&(this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd")))},_start:function(e){if(1!=u.eventType[e.type]){var t;if(t=e.which?e.button:e.button<2?0:4==e.button?1:2,0!==t)return}if(this.enabled&&(!this.initiated||u.eventType[e.type]===this.initiated)){!this.options.preventDefault||u.isBadAndroid||u.preventDefaultException(e.target,this.options.preventDefaultException)||e.preventDefault();var o,i=e.touches?e.touches[0]:e;this.initiated=u.eventType[e.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this.startTime=u.getTime(),this.options.useTransition&&this.isInTransition?(this._transitionTime(),this.isInTransition=!1,o=this.getComputedPosition(),this._translate(r.round(o.x),r.round(o.y)),this._execEvent("scrollEnd")):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,this._execEvent("scrollEnd")),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=i.pageX,this.pointY=i.pageY,this._execEvent("beforeScrollStart")}},_move:function(e){if(this.enabled&&u.eventType[e.type]===this.initiated){this.options.preventDefault&&e.preventDefault();var t,o,i,s,n=e.touches?e.touches[0]:e,a=n.pageX-this.pointX,l=n.pageY-this.pointY,c=u.getTime();if(this.pointX=n.pageX,this.pointY=n.pageY,this.distX+=a,this.distY+=l,i=r.abs(this.distX),s=r.abs(this.distY),!(c-this.endTime>300&&i<10&&s<10)){if(this.directionLocked||this.options.freeScroll||(i>s+this.options.directionLockThreshold?this.directionLocked="h":s>=i+this.options.directionLockThreshold?this.directionLocked="v":this.directionLocked="n"),"h"==this.directionLocked){if("vertical"==this.options.eventPassthrough)e.preventDefault();else if("horizontal"==this.options.eventPassthrough)return void(this.initiated=!1);l=0}else if("v"==this.directionLocked){if("horizontal"==this.options.eventPassthrough)e.preventDefault();else if("vertical"==this.options.eventPassthrough)return void(this.initiated=!1);a=0}a=this.hasHorizontalScroll?a:0,l=this.hasVerticalScroll?l:0,t=this.x+a,o=this.y+l,(t>0||t<this.maxScrollX)&&(t=this.options.bounce?this.x+a/3:t>0?0:this.maxScrollX),(o>0||o<this.maxScrollY)&&(o=this.options.bounce?this.y+l/3:o>0?0:this.maxScrollY),this.directionX=a>0?-1:a<0?1:0,this.directionY=l>0?-1:l<0?1:0,this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(t,o),c-this.startTime>300&&(this.startTime=c,this.startX=this.x,this.startY=this.y,1==this.options.probeType&&this._execEvent("scroll")),this.options.probeType>1&&this._execEvent("scroll")}}},_end:function(e){if(this.enabled&&u.eventType[e.type]===this.initiated){this.options.preventDefault&&!u.preventDefaultException(e.target,this.options.preventDefaultException)&&e.preventDefault();var t,o,i=(e.changedTouches?e.changedTouches[0]:e,u.getTime()-this.startTime),s=r.round(this.x),n=r.round(this.y),a=r.abs(s-this.startX),l=r.abs(n-this.startY),c=0,p="";if(this.isInTransition=0,this.initiated=0,this.endTime=u.getTime(),!this.resetPosition(this.options.bounceTime)){if(this.scrollTo(s,n),!this.moved)return this.options.tap&&u.tap(e,this.options.tap),this.options.click&&u.click(e),void this._execEvent("scrollCancel");if(this._events.flick&&i<200&&a<100&&l<100)return void this._execEvent("flick");if(this.options.momentum&&i<300&&(t=this.hasHorizontalScroll?u.momentum(this.x,this.startX,i,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:s,duration:0},o=this.hasVerticalScroll?u.momentum(this.y,this.startY,i,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:n,duration:0},s=t.destination,n=o.destination,c=r.max(t.duration,o.duration),this.isInTransition=1),this.options.snap){var d=this._nearestSnap(s,n);this.currentPage=d,c=this.options.snapSpeed||r.max(r.max(r.min(r.abs(s-d.x),1e3),r.min(r.abs(n-d.y),1e3)),300),s=d.x,n=d.y,this.directionX=0,this.directionY=0,p=this.options.bounceEasing}return s!=this.x||n!=this.y?((s>0||s<this.maxScrollX||n>0||n<this.maxScrollY)&&(p=u.ease.quadratic),void this.scrollTo(s,n,c,p)):void this._execEvent("scrollEnd")}}},_resize:function(){var e=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){e.refresh()},this.options.resizePolling)},resetPosition:function(e){var t=this.x,o=this.y;return e=e||0,!this.hasHorizontalScroll||this.x>0?t=0:this.x<this.maxScrollX&&(t=this.maxScrollX),!this.hasVerticalScroll||this.y>0?o=0:this.y<this.maxScrollY&&(o=this.maxScrollY),(t!=this.x||o!=this.y)&&(this.scrollTo(t,o,e,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.scrollerWidth=this.scroller.offsetWidth,this.scrollerHeight=this.scroller.offsetHeight,this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=u.offset(this.wrapper),this._execEvent("refresh"),this.resetPosition()},on:function(e,t){this._events[e]||(this._events[e]=[]),this._events[e].push(t)},off:function(e,t){if(this._events[e]){var o=this._events[e].indexOf(t);o>-1&&this._events[e].splice(o,1)}},_execEvent:function(e){if(this._events[e]){var t=0,o=this._events[e].length;if(o)for(;t<o;t++)this._events[e][t].apply(this,[].slice.call(arguments,1))}},scrollBy:function(e,t,o,i){e=this.x+e,t=this.y+t,o=o||0,this.scrollTo(e,t,o,i)},scrollTo:function(e,t,o,i){i=i||u.ease.circular,this.isInTransition=this.options.useTransition&&o>0;var s=this.options.useTransition&&i.style;!o||s?(s&&(this._transitionTimingFunction(i.style),this._transitionTime(o)),this._translate(e,t)):this._animate(e,t,o,i.fn)},scrollToElement:function(e,t,o,i,s){if(e=e.nodeType?e:this.scroller.querySelector(e)){var n=u.offset(e);n.left-=this.wrapperOffset.left,n.top-=this.wrapperOffset.top,o===!0&&(o=r.round(e.offsetWidth/2-this.wrapper.offsetWidth/2)),i===!0&&(i=r.round(e.offsetHeight/2-this.wrapper.offsetHeight/2)),n.left-=o||0,n.top-=i||0,n.left=n.left>0?0:n.left<this.maxScrollX?this.maxScrollX:n.left,n.top=n.top>0?0:n.top<this.maxScrollY?this.maxScrollY:n.top,t=void 0===t||null===t||"auto"===t?r.max(r.abs(this.x-n.left),r.abs(this.y-n.top)):t,this.scrollTo(n.left,n.top,t,s)}},_transitionTime:function(e){if(this.options.useTransition){e=e||0;var t=u.style.transitionDuration;if(t){if(this.scrollerStyle[t]=e+"ms",!e&&u.isBadAndroid){this.scrollerStyle[t]="0.0001ms";var o=this;d(function(){"0.0001ms"===o.scrollerStyle[t]&&(o.scrollerStyle[t]="0s")})}if(this.indicators)for(var i=this.indicators.length;i--;)this.indicators[i].transitionTime(e)}}},_transitionTimingFunction:function(e){if(this.scrollerStyle[u.style.transitionTimingFunction]=e,this.indicators)for(var t=this.indicators.length;t--;)this.indicators[t].transitionTimingFunction(e)},_translate:function(e,t){if(this.options.useTransform?this.scrollerStyle[u.style.transform]="translate("+e+"px,"+t+"px)"+this.translateZ:(e=r.round(e),t=r.round(t),this.scrollerStyle.left=e+"px",this.scrollerStyle.top=t+"px"),this.x=e,this.y=t,this.indicators)for(var o=this.indicators.length;o--;)this.indicators[o].updatePosition()},_initEvents:function(e){var t=e?u.removeEvent:u.addEvent,o=this.options.bindToWrapper?this.wrapper:n;t(n,"orientationchange",this),t(n,"resize",this),this.options.click&&t(this.wrapper,"click",this,!0),this.options.disableMouse||(t(this.wrapper,"mousedown",this),t(o,"mousemove",this),t(o,"mousecancel",this),t(o,"mouseup",this)),u.hasPointer&&!this.options.disablePointer&&(t(this.wrapper,u.prefixPointerEvent("pointerdown"),this),t(o,u.prefixPointerEvent("pointermove"),this),t(o,u.prefixPointerEvent("pointercancel"),this),t(o,u.prefixPointerEvent("pointerup"),this)),u.hasTouch&&!this.options.disableTouch&&(t(this.wrapper,"touchstart",this),t(o,"touchmove",this),t(o,"touchcancel",this),t(o,"touchend",this)),t(this.scroller,"transitionend",this),t(this.scroller,"webkitTransitionEnd",this),t(this.scroller,"oTransitionEnd",this),t(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var e,t,o=n.getComputedStyle(this.scroller,null);return this.options.useTransform?(o=o[u.style.transform].split(")")[0].split(", "),e=+(o[12]||o[4]),t=+(o[13]||o[5])):(e=+o.left.replace(/[^-\d.]/g,""),t=+o.top.replace(/[^-\d.]/g,"")),{x:e,y:t}},_initIndicators:function(){function e(e){if(n.indicators)for(var t=n.indicators.length;t--;)e.call(n.indicators[t])}var t,o=this.options.interactiveScrollbars,i="string"!=typeof this.options.scrollbars,s=[],n=this;this.indicators=[],this.options.scrollbars&&(this.options.scrollY&&(t={el:c("v",o,this.options.scrollbars),interactive:o,defaultScrollbars:!0,customStyle:i,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenX:!1},this.wrapper.appendChild(t.el),s.push(t)),this.options.scrollX&&(t={el:c("h",o,this.options.scrollbars),interactive:o,defaultScrollbars:!0,customStyle:i,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenY:!1},this.wrapper.appendChild(t.el),s.push(t))),this.options.indicators&&(s=s.concat(this.options.indicators));for(var a=s.length;a--;)this.indicators.push(new p(this,s[a]));this.options.fadeScrollbars&&(this.on("scrollEnd",function(){e(function(){this.fade()})}),this.on("scrollCancel",function(){e(function(){this.fade()})}),this.on("scrollStart",function(){e(function(){this.fade(1)})}),this.on("beforeScrollStart",function(){e(function(){this.fade(1,!0)})})),this.on("refresh",function(){e(function(){this.refresh()})}),this.on("destroy",function(){e(function(){this.destroy()}),delete this.indicators})},_initWheel:function(){u.addEvent(this.wrapper,"wheel",this),u.addEvent(this.wrapper,"mousewheel",this),u.addEvent(this.wrapper,"DOMMouseScroll",this),this.on("destroy",function(){clearTimeout(this.wheelTimeout),this.wheelTimeout=null,u.removeEvent(this.wrapper,"wheel",this),u.removeEvent(this.wrapper,"mousewheel",this),u.removeEvent(this.wrapper,"DOMMouseScroll",this)})},_wheel:function(e){if(this.enabled){e.preventDefault();var t,o,i,s,n=this;if(void 0===this.wheelTimeout&&n._execEvent("scrollStart"),clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout(function(){n.options.snap||n._execEvent("scrollEnd"),n.wheelTimeout=void 0},400),"deltaX"in e)1===e.deltaMode?(t=-e.deltaX*this.options.mouseWheelSpeed,o=-e.deltaY*this.options.mouseWheelSpeed):(t=-e.deltaX,o=-e.deltaY);else if("wheelDeltaX"in e)t=e.wheelDeltaX/120*this.options.mouseWheelSpeed,o=e.wheelDeltaY/120*this.options.mouseWheelSpeed;else if("wheelDelta"in e)t=o=e.wheelDelta/120*this.options.mouseWheelSpeed;else{if(!("detail"in e))return;t=o=-e.detail/3*this.options.mouseWheelSpeed}if(t*=this.options.invertWheelDirection,o*=this.options.invertWheelDirection,this.hasVerticalScroll||(t=o,o=0),this.options.snap)return i=this.currentPage.pageX,s=this.currentPage.pageY,t>0?i--:t<0&&i++,o>0?s--:o<0&&s++,void this.goToPage(i,s);i=this.x+r.round(this.hasHorizontalScroll?t:0),s=this.y+r.round(this.hasVerticalScroll?o:0),this.directionX=t>0?-1:t<0?1:0,this.directionY=o>0?-1:o<0?1:0,i>0?i=0:i<this.maxScrollX&&(i=this.maxScrollX),s>0?s=0:s<this.maxScrollY&&(s=this.maxScrollY),this.scrollTo(i,s,0),this.options.probeType>1&&this._execEvent("scroll")}},_initSnap:function(){this.currentPage={},"string"==typeof this.options.snap&&(this.options.snap=this.scroller.querySelectorAll(this.options.snap)),this.on("refresh",function(){var e,t,o,i,s,n,a=0,l=0,c=0,p=this.options.snapStepX||this.wrapperWidth,d=this.options.snapStepY||this.wrapperHeight;if(this.pages=[],this.wrapperWidth&&this.wrapperHeight&&this.scrollerWidth&&this.scrollerHeight){if(this.options.snap===!0)for(o=r.round(p/2),i=r.round(d/2);c>-this.scrollerWidth;){for(this.pages[a]=[],e=0,s=0;s>-this.scrollerHeight;)this.pages[a][e]={x:r.max(c,this.maxScrollX),y:r.max(s,this.maxScrollY),width:p,height:d,cx:c-o,cy:s-i},s-=d,e++;c-=p,a++}else for(n=this.options.snap,e=n.length,t=-1;a<e;a++)(0===a||n[a].offsetLeft<=n[a-1].offsetLeft)&&(l=0,t++),this.pages[l]||(this.pages[l]=[]),c=r.max(-n[a].offsetLeft,this.maxScrollX),s=r.max(-n[a].offsetTop,this.maxScrollY),o=c-r.round(n[a].offsetWidth/2),i=s-r.round(n[a].offsetHeight/2),this.pages[l][t]={x:c,y:s,width:n[a].offsetWidth,height:n[a].offsetHeight,cx:o,cy:i},c>this.maxScrollX&&l++;this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0),this.options.snapThreshold%1===0?(this.snapThresholdX=this.options.snapThreshold,this.snapThresholdY=this.options.snapThreshold):(this.snapThresholdX=r.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold),this.snapThresholdY=r.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold))}}),this.on("flick",function(){var e=this.options.snapSpeed||r.max(r.max(r.min(r.abs(this.x-this.startX),1e3),r.min(r.abs(this.y-this.startY),1e3)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,e)})},_nearestSnap:function(e,t){if(!this.pages.length)return{x:0,y:0,pageX:0,pageY:0};var o=0,i=this.pages.length,s=0;if(r.abs(e-this.absStartX)<this.snapThresholdX&&r.abs(t-this.absStartY)<this.snapThresholdY)return this.currentPage;for(e>0?e=0:e<this.maxScrollX&&(e=this.maxScrollX),t>0?t=0:t<this.maxScrollY&&(t=this.maxScrollY);o<i;o++)if(e>=this.pages[o][0].cx){e=this.pages[o][0].x;break}for(i=this.pages[o].length;s<i;s++)if(t>=this.pages[0][s].cy){t=this.pages[0][s].y;break}return o==this.currentPage.pageX&&(o+=this.directionX,o<0?o=0:o>=this.pages.length&&(o=this.pages.length-1),e=this.pages[o][0].x),s==this.currentPage.pageY&&(s+=this.directionY,s<0?s=0:s>=this.pages[0].length&&(s=this.pages[0].length-1),t=this.pages[0][s].y),{x:e,y:t,pageX:o,pageY:s}},goToPage:function(e,t,o,i){i=i||this.options.bounceEasing,e>=this.pages.length?e=this.pages.length-1:e<0&&(e=0),t>=this.pages[e].length?t=this.pages[e].length-1:t<0&&(t=0);var s=this.pages[e][t].x,n=this.pages[e][t].y;o=void 0===o?this.options.snapSpeed||r.max(r.max(r.min(r.abs(s-this.x),1e3),r.min(r.abs(n-this.y),1e3)),300):o,this.currentPage={x:s,y:n,pageX:e,pageY:t},this.scrollTo(s,n,o,i)},next:function(e,t){var o=this.currentPage.pageX,i=this.currentPage.pageY;o++,o>=this.pages.length&&this.hasVerticalScroll&&(o=0,i++),this.goToPage(o,i,e,t)},prev:function(e,t){var o=this.currentPage.pageX,i=this.currentPage.pageY;o--,o<0&&this.hasVerticalScroll&&(o=0,i--),this.goToPage(o,i,e,t)},_initKeys:function(e){var t,o={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};if("object"==s(this.options.keyBindings))for(t in this.options.keyBindings)"string"==typeof this.options.keyBindings[t]&&(this.options.keyBindings[t]=this.options.keyBindings[t].toUpperCase().charCodeAt(0));else this.options.keyBindings={};for(t in o)this.options.keyBindings[t]=this.options.keyBindings[t]||o[t];u.addEvent(n,"keydown",this),this.on("destroy",function(){u.removeEvent(n,"keydown",this)})},_key:function(e){if(this.enabled){var t,o=this.options.snap,i=o?this.currentPage.pageX:this.x,s=o?this.currentPage.pageY:this.y,n=u.getTime(),a=this.keyTime||0,l=.25;switch(this.options.useTransition&&this.isInTransition&&(t=this.getComputedPosition(),this._translate(r.round(t.x),r.round(t.y)),this.isInTransition=!1),this.keyAcceleration=n-a<200?r.min(this.keyAcceleration+l,50):0,e.keyCode){case this.options.keyBindings.pageUp:this.hasHorizontalScroll&&!this.hasVerticalScroll?i+=o?1:this.wrapperWidth:s+=o?1:this.wrapperHeight;break;case this.options.keyBindings.pageDown:this.hasHorizontalScroll&&!this.hasVerticalScroll?i-=o?1:this.wrapperWidth:s-=o?1:this.wrapperHeight;break;case this.options.keyBindings.end:i=o?this.pages.length-1:this.maxScrollX,s=o?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:i=0,s=0;break;case this.options.keyBindings.left:i+=o?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:s+=o?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:i-=o?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:s-=o?1:5+this.keyAcceleration>>0;break;default:return}if(o)return void this.goToPage(i,s);i>0?(i=0,this.keyAcceleration=0):i<this.maxScrollX&&(i=this.maxScrollX,this.keyAcceleration=0),s>0?(s=0,this.keyAcceleration=0):s<this.maxScrollY&&(s=this.maxScrollY,this.keyAcceleration=0),this.scrollTo(i,s,0),this.keyTime=n}},_animate:function(e,t,o,i){function s(){var p,h,m,g=u.getTime();return g>=c?(n.isAnimating=!1,n._translate(e,t),void(n.resetPosition(n.options.bounceTime)||n._execEvent("scrollEnd"))):(g=(g-l)/o,m=i(g),p=(e-a)*m+a,h=(t-r)*m+r,n._translate(p,h),n.isAnimating&&d(s),void(3==n.options.probeType&&n._execEvent("scroll")))}var n=this,a=this.x,r=this.y,l=u.getTime(),c=l+o;this.isAnimating=!0,s()},handleEvent:function(e){switch(e.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(e);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(e);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(e);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(e);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(e);break;case"keydown":this._key(e);break;case"click":this.enabled&&!e._constructed&&(e.preventDefault(),e.stopPropagation())}}},p.prototype={handleEvent:function(e){switch(e.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(e);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(e);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(e)}},destroy:function(){this.options.fadeScrollbars&&(clearTimeout(this.fadeTimeout),this.fadeTimeout=null),this.options.interactive&&(u.removeEvent(this.indicator,"touchstart",this),u.removeEvent(this.indicator,u.prefixPointerEvent("pointerdown"),this),u.removeEvent(this.indicator,"mousedown",this),u.removeEvent(n,"touchmove",this),u.removeEvent(n,u.prefixPointerEvent("pointermove"),this),u.removeEvent(n,"mousemove",this),u.removeEvent(n,"touchend",this),u.removeEvent(n,u.prefixPointerEvent("pointerup"),this),u.removeEvent(n,"mouseup",this)),this.options.defaultScrollbars&&this.wrapper.parentNode.removeChild(this.wrapper)},_start:function(e){var t=e.touches?e.touches[0]:e;e.preventDefault(),e.stopPropagation(),this.transitionTime(),this.initiated=!0,this.moved=!1,this.lastPointX=t.pageX,this.lastPointY=t.pageY,this.startTime=u.getTime(),this.options.disableTouch||u.addEvent(n,"touchmove",this),this.options.disablePointer||u.addEvent(n,u.prefixPointerEvent("pointermove"),this),this.options.disableMouse||u.addEvent(n,"mousemove",this),this.scroller._execEvent("beforeScrollStart")},_move:function(e){var t,o,i,s,n=e.touches?e.touches[0]:e,a=u.getTime();this.moved||this.scroller._execEvent("scrollStart"),this.moved=!0,t=n.pageX-this.lastPointX,this.lastPointX=n.pageX,o=n.pageY-this.lastPointY,this.lastPointY=n.pageY,i=this.x+t,s=this.y+o,this._pos(i,s),1==this.scroller.options.probeType&&a-this.startTime>300?(this.startTime=a,this.scroller._execEvent("scroll")):this.scroller.options.probeType>1&&this.scroller._execEvent("scroll"),e.preventDefault(),e.stopPropagation()},_end:function(e){if(this.initiated){if(this.initiated=!1,e.preventDefault(),e.stopPropagation(),u.removeEvent(n,"touchmove",this),u.removeEvent(n,u.prefixPointerEvent("pointermove"),this),u.removeEvent(n,"mousemove",this),this.scroller.options.snap){var t=this.scroller._nearestSnap(this.scroller.x,this.scroller.y),o=this.options.snapSpeed||r.max(r.max(r.min(r.abs(this.scroller.x-t.x),1e3),r.min(r.abs(this.scroller.y-t.y),1e3)),300);this.scroller.x==t.x&&this.scroller.y==t.y||(this.scroller.directionX=0,this.scroller.directionY=0,this.scroller.currentPage=t,this.scroller.scrollTo(t.x,t.y,o,this.scroller.options.bounceEasing))}this.moved&&this.scroller._execEvent("scrollEnd")}},transitionTime:function(e){e=e||0;var t=u.style.transitionDuration;if(t&&(this.indicatorStyle[t]=e+"ms",!e&&u.isBadAndroid)){this.indicatorStyle[t]="0.0001ms";var o=this;d(function(){"0.0001ms"===o.indicatorStyle[t]&&(o.indicatorStyle[t]="0s")})}},transitionTimingFunction:function(e){this.indicatorStyle[u.style.transitionTimingFunction]=e},refresh:function(){this.transitionTime(),this.options.listenX&&!this.options.listenY?this.indicatorStyle.display=this.scroller.hasHorizontalScroll?"block":"none":this.options.listenY&&!this.options.listenX?this.indicatorStyle.display=this.scroller.hasVerticalScroll?"block":"none":this.indicatorStyle.display=this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none",this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll?(u.addClass(this.wrapper,"iScrollBothScrollbars"),u.removeClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="8px":this.wrapper.style.bottom="8px")):(u.removeClass(this.wrapper,"iScrollBothScrollbars"),u.addClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="2px":this.wrapper.style.bottom="2px"));this.wrapper.offsetHeight;this.options.listenX&&(this.wrapperWidth=this.wrapper.clientWidth,this.options.resize?(this.indicatorWidth=r.max(r.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8),this.indicatorStyle.width=this.indicatorWidth+"px"):this.indicatorWidth=this.indicator.clientWidth,this.maxPosX=this.wrapperWidth-this.indicatorWidth,"clip"==this.options.shrink?(this.minBoundaryX=-this.indicatorWidth+8,this.maxBoundaryX=this.wrapperWidth-8):(this.minBoundaryX=0,this.maxBoundaryX=this.maxPosX),this.sizeRatioX=this.options.speedRatioX||this.scroller.maxScrollX&&this.maxPosX/this.scroller.maxScrollX),this.options.listenY&&(this.wrapperHeight=this.wrapper.clientHeight,this.options.resize?(this.indicatorHeight=r.max(r.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8),this.indicatorStyle.height=this.indicatorHeight+"px"):this.indicatorHeight=this.indicator.clientHeight,this.maxPosY=this.wrapperHeight-this.indicatorHeight,"clip"==this.options.shrink?(this.minBoundaryY=-this.indicatorHeight+8,this.maxBoundaryY=this.wrapperHeight-8):(this.minBoundaryY=0,this.maxBoundaryY=this.maxPosY),this.maxPosY=this.wrapperHeight-this.indicatorHeight,this.sizeRatioY=this.options.speedRatioY||this.scroller.maxScrollY&&this.maxPosY/this.scroller.maxScrollY),this.updatePosition()},updatePosition:function(){var e=this.options.listenX&&r.round(this.sizeRatioX*this.scroller.x)||0,t=this.options.listenY&&r.round(this.sizeRatioY*this.scroller.y)||0;this.options.ignoreBoundaries||(e<this.minBoundaryX?("scale"==this.options.shrink&&(this.width=r.max(this.indicatorWidth+e,8),this.indicatorStyle.width=this.width+"px"),e=this.minBoundaryX):e>this.maxBoundaryX?"scale"==this.options.shrink?(this.width=r.max(this.indicatorWidth-(e-this.maxPosX),8),
this.indicatorStyle.width=this.width+"px",e=this.maxPosX+this.indicatorWidth-this.width):e=this.maxBoundaryX:"scale"==this.options.shrink&&this.width!=this.indicatorWidth&&(this.width=this.indicatorWidth,this.indicatorStyle.width=this.width+"px"),t<this.minBoundaryY?("scale"==this.options.shrink&&(this.height=r.max(this.indicatorHeight+3*t,8),this.indicatorStyle.height=this.height+"px"),t=this.minBoundaryY):t>this.maxBoundaryY?"scale"==this.options.shrink?(this.height=r.max(this.indicatorHeight-3*(t-this.maxPosY),8),this.indicatorStyle.height=this.height+"px",t=this.maxPosY+this.indicatorHeight-this.height):t=this.maxBoundaryY:"scale"==this.options.shrink&&this.height!=this.indicatorHeight&&(this.height=this.indicatorHeight,this.indicatorStyle.height=this.height+"px")),this.x=e,this.y=t,this.scroller.options.useTransform?this.indicatorStyle[u.style.transform]="translate("+e+"px,"+t+"px)"+this.scroller.translateZ:(this.indicatorStyle.left=e+"px",this.indicatorStyle.top=t+"px")},_pos:function(e,t){e<0?e=0:e>this.maxPosX&&(e=this.maxPosX),t<0?t=0:t>this.maxPosY&&(t=this.maxPosY),e=this.options.listenX?r.round(e/this.sizeRatioX):this.scroller.x,t=this.options.listenY?r.round(t/this.sizeRatioY):this.scroller.y,this.scroller.scrollTo(e,t)},fade:function(e,t){if(!t||this.visible){clearTimeout(this.fadeTimeout),this.fadeTimeout=null;var o=e?250:500,i=e?0:300;e=e?"1":"0",this.wrapperStyle[u.style.transitionDuration]=o+"ms",this.fadeTimeout=setTimeout(function(e){this.wrapperStyle.opacity=e,this.visible=+e}.bind(this,e),i)}}},l.utils=u,"undefined"!=typeof e&&e.exports?e.exports=l:(i=function(){return l}.call(t,o,t,e),!(void 0!==i&&(e.exports=i)))}(window,document,Math)},"./components/app/portal_v2/index.js":function(e,t,o){(function(t){"use strict";var i="undefined"!=typeof window?o("./components/common/index.js"):{},s=o("./components/vendor/react.min.js"),n=o("./components/vendor/react-dom.min.js"),a=o("./components/widgets/BaseList2/index.js"),r=o("./components/widgets/Banner2/index.js"),l=o("./components/widgets/QuickEntrance2/index.js"),c=o("./components/widgets/RecommendEntrance/index.js"),p=o("./components/app/portal_v2/banner.js"),d=o("./components/app/portal_v2/entries.js"),u=o("./components/app/portal_v2/goodsList.js"),h=o("./components/app/portal_v2/categoryGoodsList.js"),m=o("./components/widgets/CaptainFreeGoodsPopup/index.js"),g=(o("./components/app/portal_v2/captainFreeGoodsList.js"),o("./components/widgets/CouponExpirePopup/index.js")),f="undefined"!=typeof window?o("./components/common/uiWidgets/ForceContact/index.js"):{},v=o("./components/app/portal_v2/couponExpireList.js"),y=o("./components/widgets/NavBar/index.js"),b=o("./constants/tracking/portal.js"),_=o("./components/widgets/MidYearPromoAct/Popup.js"),I=o("./components/widgets/MidYearPromoAct/Banner.js"),w=o("./components/widgets/MidYearPromoAct/Bubble.js"),S=o("./components/app/createPageComponent.js"),x=o("./components/widgets/ErrorPage.js"),k=o("./components/common/uiWidgets/tabbar/footer.js"),E=o("./models/GoodsList.js"),T=o("./models/CategoryGoodsList.js"),D=(o("./models/CategoryGoodsListV3.js"),o("./configs/index.js").app),C=o("./abtest/index.js"),P=o("./models/DataFormat/portal.js"),N=o("./models/GoodsListV3.js"),j=o("./models/HomeSubject.js"),L=o("./models/QQSubjectGoodsList.js"),A=o("./models/UserAB.js"),G=o("./models/PortalOperations.js"),M=o("./models/PortalRecommendEntrance.js"),R=o("./constants/user/grade.js"),F=o("./components/widgets/CategoryBoard/index.js"),U=o("./components/widgets/GoodsSortBar/index.js"),O=o("./manager/index.js").popup.getInstance(),B=o("./components/widgets/UnpayedAlarm/index.js"),H=o("./components/common/uiWidgets/tabbar/index.js"),q=o("./components/widgets/PortalPromotionSlip/index.js"),W=C.catSortGoodsApi,z=o("./constants/category_sort.js"),V=z.SortTypes,Y=z.DefaultSortType,X=function(e,t){return[e,t].join("-")},Q=o("./components/widgets/SubscribeTopBanner/index.js"),K=o("./models/common/pageInfo.js"),J=o("./manager/index.js").moduleList,Z=s.createClass({displayName:"Portal",getInitialState:function(){return{bannerData:[],quickEntrances:[],recommendEntrances:[],scrollData:{},list:[],currentList:[],needUpdateFavorite:!1,mobileAppGroups:[],currentNavItemId:0,categoryGoods:{},curCategoryGoods:{},nextSp:0,nbsl:0,captainFreeInfo:{goodsList:[],couponCount:0},couponExpireInfo:{couponList:[],couponCount:0},currentSortType:Y,showCatSort:!1,hostname:"",extraClassList:[],withIOSStickyNavBar:!1,appDownloadInfo:null}},navItemsData:[],getDefaultProps:function(){return{data:{}}},dealBanner:function(){},loadMoreDataFunc:function(e,t){var o=this;if(!t){var i=function(t){o.setState({list:o.state.list.concat(t.list),pSlip:t.pSlip}),e(t.list)};u.pageIndex+=Math.floor(u.sizeNum/20),u.loadGoodsNum+=u.sizeNum,u.sizeNum=20,u.requestGoodsData(i)}},loadMoreCategoryDataFunc:function(e,t,o){var s=this;if(!t){var n=function(t,o){var n=X(o.optID,s.state.currentSortType),a=s.state.categoryGoods,r=a[n]||[];r=r.concat(t);var l={};l[n]=r,i.util.merge(l,a),s.setState({categoryGoods:a}),e(t)};h.requestGoodsData(n,o)}},initData:function(e,t){var o=this;o.setState({nbsl:e.nbsl,hostname:e.hostname}),o.nodeServerTime=e.nodeServerTime;var i=e.lastNavItemId;o.lastNavItemId=i;var s=e.lastSortType||Y,n=e.portalData||{},a=e.categoryData||{},r=n.operations||a.operations;o.operations=r;var l=n.mobile_app_groups,c=X(i,s);u.init(n.pageIndex,n.pageSize),r.forEach(function(e){if(0!=e.optID)for(var t=0;t<=V.length;t++)h.init(e.optID,i==e.optID?a.pageIndex:0,100,t)}),o.navItemsData=r;var p=n.recommendEntrances||a.recommendEntrances,m=C.portalEntrance.isTester(e.uid,e.hostname);if(o.setState({useScrollEntrance:m,quickEntrances:d.getQuickEntrances(m,e.nodeServerTime)}),0==i)o.setState({currentNavItemId:i,currentList:n.list.slice(0,n.firstShowSize||10),list:n.list,pSlip:n.pSlip,mobileAppGroups:l,recommendEntrances:p},function(){t&&t()});else{var g=o.state.categoryGoods||{},f=o.state.curCategoryGoods||{};g[c]=a.list,f[c]=a.list.slice(0,a.firstShowSize||20)||[],o.setState({currentNavItemId:i,currentSortType:s,categoryGoods:g,curCategoryGoods:f,recommendEntrances:p},function(){t&&t()})}},componentWillMount:function(){var e=this;e.initData(this.props.data)},componentDidMount:function(){function e(){var e=r.state.appDownloadInfo;if(e.isSubscribed)O.remove(O.Constant.TaskName.ForceContact);else if(e.portalPageForceContact){var t=new Date,o=t.getMonth()+1+"_"+t.getDate(),s=localStorage.getItem(i.constant.LocalStorageKey.AccessToken)||"",n=o+"_"+s;if(n===localStorage.getItem(i.constant.LocalStorageKey.ForceContactIndex))return void O.remove(O.Constant.TaskName.ForceContact);localStorage.setItem(i.constant.LocalStorageKey.ForceContactIndex,n),O.produce(O.Constant.TaskName.ForceContact,{show:function(){r.generateForceContactPopup(function(){O.remove(O.Constant.TaskName.ForceContact)})}})}else O.remove(O.Constant.TaskName.ForceContact)}function t(){if("undefined"==typeof _)O.remove(O.Constant.TaskName.PromotionActivity);else{var e=document.createElement("DIV");document.body.appendChild(e),n.render(s.createElement(_,null),e)}}function o(){var e=document.createElement("DIV");document.body.appendChild(e),n.render(s.createElement(B,{setRedPoint:function(){H.setBadgeVisible("personal",!0,1)}}),e)}function a(){var e=new Date,t=e.getMonth()+1+"_"+e.getDate(),o=localStorage.getItem(i.constant.LocalStorageKey.AccessToken)||"",s=t+"_"+o;return o&&s!==localStorage.getItem(i.constant.LocalStorageKey.CouponExpireIndex)?void v.request(function(e){e&&(i.util.merge(e,r.state.couponExpireInfo),r.setState(r.state),e.couponCount&&localStorage.setItem(i.constant.LocalStorageKey.CouponExpireIndex,s),O.produce(O.Constant.TaskName.CouponExpire,{show:function(){r.generateCouponExpirePopup()}}))}):void O.remove(O.Constant.TaskName.CouponExpire)}var r=this,l=i.util.getSelfUID(),c=r.state.hostname,d=i.util.isEnableFriendSys();r.setState({showCatSort:W.isTester(l,c)});var u=function(){p(r.state.mobileAppGroups,function(e){r.setState({bannerData:e})}),function(){var e="index";i.notification.start(e)}(),i.platform.isWeChatPlatform()?e():O.remove(O.Constant.TaskName.ForceContact),t(),o(),a(),i.user.updateGrade(r.props.data.grade),H.checkUnreadMsg(),d&&H.checkFriendsRecommend()};if(i.platform.isWeChatPlatform()){var h={},m={contact_url_type:i.constant.ContactURLType.HighPrice,check_app_login:1,check_weixin_sp:i.constant.ForceContactAppIDs.indexOf(i.config.AppID.WeChat)>=0?"1":null,check_sub_content:i.platform.isShowSMAlertPlatform()?"1":"2",check_user_sharable:0},g=function(){if(h.grade&&(h.userInfo||h.userInfoFailed)&&!h.userInfoFailed){var e=h.userInfo,t=i.user.selfInfo.getInstance(h.grade),o={isSubscribed:e.is_subscribed,portalPageForceContact:t.getPortalPageContact()};r.setState({appDownloadInfo:o},function(){u()})}};i.user.requestSelfInfo(m,function(e){h.userInfo=e,g()},function(){h.userInfoFailed=!0,g()}),i.user.getGrade(function(e){h.grade=e,g()})}else u()},render:function(){if(this.props.data.error)return s.createElement(x,this.props.data.error);var e=this,t=e.state||{},o=t.currentNavItemId||0,i=e.generateGoodsList(),n={};e.props.data.portalData&&(n=e.props.data.portalData.redPointData);var p;t.pSlip&&(p=s.createElement(q,{goodsList:t.pSlip}));var d;t.recommendEntrances&&t.recommendEntrances.length>0&&(d=s.createElement(c,{entranceList:t.recommendEntrances,extraTrackingParams:b.RecommendEntranceClick}));var u=e.getSubscribeTopBanner(),h=0!==e.lastNavItemId&&0===o;return s.createElement("div",{id:"index-content-v2"},s.createElement(k,{data:this.props.data.footerData}),u,s.createElement(w,{innerFrom:"index_bubble",nodeServerTime:e.nodeServerTime}),s.createElement(y,{navItems:e.navItemsData,selectedId:t.currentNavItemId,onNavItemSelected:e.onNavItemSelected,nbsl:t.nbsl,extraClassList:t.extraClassList}),s.createElement("div",{id:"index-main-content",className:t.withIOSStickyNavBar?"index-main-content-without-padding":""},s.createElement("div",{id:"index-recommend",style:{display:0==t.currentNavItemId?"block":"none"}},s.createElement(r,{data:t.bannerData,isShowed:0==t.currentNavItemId}),s.createElement(l,{data:t.quickEntrances,webpEnable:e.props.data.webpEnable,redPointData:n,grade:e.props.data.grade,useScroll:t.useScrollEntrance,needRefresh:h}),d,s.createElement(I,{innerFrom:"index_banner",nodeServerTime:e.nodeServerTime}),p,s.createElement("div",{id:"app-group-index"}),s.createElement("section",{className:"main-view tuan-index",id:"goods_list"},s.createElement(a,{list:t.list,currentList:t.currentList,doImpr:!0,nextSp:t.nextSp,isShowed:0==t.currentNavItemId,loadMoreDataFunc:this.loadMoreDataFunc,needUpdateFavorite:t.needUpdateFavorite}))),s.createElement("div",{id:"index-catlist"},s.createElement(F,{show:0!=t.currentNavItemId,operations:e.navItemsData,extraTrackingParams:b.CategoryBoardClick,selectedId:t.currentNavItemId}),s.createElement(U,{isShowed:0!==t.currentNavItemId&&t.showCatSort,sortTypes:V,currentSortType:t.currentSortType,currentSortName:V[t.currentSortType].name,onSortItemSelected:e.onSortItemSelected}),i)))},onSortItemSelected:function(e){var t=function(e,t){var o;return e.forEach(function(e,i){e.optID==t&&(o=e)}),o},s=o("./components/common/uiWidgets/spinner/index.js");s.show();var n=this;if(n.saveCurrentSortType(e),n.state.currentSortType!==e){var a=X(n.state.currentNavItemId,e),r={sp:document.body.scrollTop};n.state.scrollData[a]=r;var l=h.checkStateIsLoaded(n.state.currentNavItemId,e),c=(n.state.scrollData[a]||{}).sp||0,p=t(n.navItemsData,n.state.currentNavItemId);p.sortType=e,p.hostname=n.state.hostname,l?n.setState({currentSortType:e,scrollData:n.state.scrollData,nextSp:c},function(){s.hide()}):h.requestGoodsData(function(t){var o=n.state.categoryGoods||{};o[a]=t,n.setState({currentSortType:e,scrollData:n.state.scrollData,categoryGoods:o,nextSp:c},function(){s.hide()})},p,!0);var d=b.SortTypeBarClick;d.opt_id=p.optID,d.sort_type=V[e].track,i.logger.trackingRecord(d)}else s.hide()},onNavItemSelected:function(e,t){var s=o("./components/common/uiWidgets/spinner/index.js");s.show();var n=this,a=X(n.state.currentNavItemId,n.state.currentSortType),r=X(e.optID,Y);if(n.state.currentNavItemId!=e.optID){var l={sp:document.body.scrollTop};n.state.scrollData[a]=l;var c=h.checkStateIsLoaded(e.optID,n.state.currentSortType),p=n.state.list.length>0,d=0;e.hostname=n.state.hostname,!p||!c&&e.optID?0==e.optID?u.requestGoodsData(function(t){n.setState({currentNavItemId:e.optID,scrollData:n.state.scrollData,list:t.list,pSlip:t.pSlip,nextSp:d},function(){s.hide()})},!0):h.requestGoodsData(function(t){var o=n.state.categoryGoods||{};o[r]=t,n.setState({currentSortType:Y,currentNavItemId:e.optID,scrollData:n.state.scrollData,categoryGoods:o,nextSp:d},function(){s.hide()}),n.saveCurrentSortType(Y)},e):n.setState({currentNavItemId:e.optID,currentSortType:Y,scrollData:n.state.scrollData,nextSp:d},function(){s.hide()}),document.body.scrollTop=0,n.saveCurrentNavItemId(e.optID);var m=i.ui.getWindowWidth()/2,g=document.getElementById("nav-bar"),f=(g.children[e.index]||{}).offsetLeft||0;f+=20;var v=Math.max(f-m,0);g.scrollLeft=v<5?0:v;var y=b.TopBarClick;y.element_id=e.optID||0,y.idx=t,i.logger.trackingRecord(y);var _=i.url.getParameter("src")||"";_&&i.navigation.replaceURL(i.url.buildURL({src:null,cid:null,campaign:null}))}else s.hide()},generateGoodsList:function(){for(var e=this,t=e.navItemsData||[],o=e.state.currentSortType,i=[],n=0;n<t.length;n++){var r=t[n];if(0!=r.optID){for(var l=X(e.state.currentNavItemId,o),c=[],p=function(){},d=0;d<V.length;d++){var u=X(r.optID,d),h=l==u,m=e.state.categoryGoods[u]||[],g=e.state.curCategoryGoods[u]||[];c.push(s.createElement("div",{key:"base-list-"+u,style:{display:h?"":"none"}},s.createElement(a,{list:m||[],currentList:g||[],doImpr:!0,loadMoreDataFunc:h?e.loadMoreCategoryDataFunc:p,nextSp:h?e.state.nextSp:0,isShowed:h,needUpdateFavorite:!1,useRealTimeData:!0,params:r})))}i.push(s.createElement("section",{key:"index-section-"+r.optID,className:"main-view tuan-index",id:"goods_list",style:{display:e.state.currentNavItemId==r.optID?"":"none"}},c))}}return i},saveCurrentNavItemId:function(e){i.navigation.replaceQuery({lastNavItemId:e})},saveCurrentSortType:function(e){i.navigation.replaceQuery({lastSortType:e})},getLastNavItemId:function(){return i.url.getParameter("navItemId")||0},componentDidUpdate:function(e,t){var i=o("./components/common/uiWidgets/spinner/index.js");i.hide()},generateCaptainFreePopup:function(){var e=this;if(e.state.captainFreeInfo.couponCount>0){var t=document.createElement("DIV");document.body.appendChild(t),n.render(s.createElement(m,{show:!0,goodsList:e.state.captainFreeInfo.goodsList,couponCount:e.state.captainFreeInfo.couponCount}),t)}},generateForceContactPopup:function(e){i.logger.trackingRecord(b.ForceContact);var t=document.createElement("DIV");document.body.appendChild(t),n.render(s.createElement(f,{type:D.constant.QRCodeType.PPAlert,closeCallback:e}),t)},generateCouponExpirePopup:function(){var e=this;if(e.state.couponExpireInfo.couponCount>0){var t=document.createElement("DIV");document.body.appendChild(t),n.render(s.createElement(g,{show:!0,couponExpireList:e.state.couponExpireInfo.couponList,couponCount:e.state.couponExpireInfo.couponCount}),t)}},getSubscribeTopBanner:function(){var e;"undefined"!=typeof document&&(e=document.querySelector(".cf-container"));var t=this;return s.createElement(Q.Module,{loadCallback:function(e){e&&i.platform.isIOSWeChatPlatform()&&t.setState({withIOSStickyNavBar:!0})},type:Q.Constant.Type.Portal,parentNodeName:"portal-top-banner",stickyDiv:e,stickyClassChange:function(e){t.changeNavBarClassList(e)}})},changeNavBarClassList:function(e){this.setState({extraClassList:e||[]})}}),$=(i.navigation||{}).forward;$&&(i.navigation.forward=function(e){var t=i.url.getParameter("src")||"";return t&&(e=i.url.buildURL({src:i.url.getParameter("src"),cid:i.url.getParameter("cid"),campaign:i.url.getParameter("campaign")},e)),$(e)}),e.exports=S({view:Z,fetchData:function(e){function o(e){var t=e.match(/([^\/]+).html/i);return t?t[1]:""}function i(e,t){var o=new K({url:e,query:t});return o.getPageID()}function s(e,t,o){var i=new K({url:e,query:t}),s=J.getInstance({pageManager:i,name:"goods",requestContext:o});return s.listID}function n(){var e=R.Result[k.grade][R.Scene.PortalPromotionSlip]&&C.portalPromotionSlip.isTester(d),o=R.Result[k.grade][R.Scene.PortalLottery]&R.ExtraField.PortalLottery.Goods&&!e,i=R.Result[k.grade][R.Scene.PortalFreeTrial]&R.ExtraField.PortalFreeTrial.Goods&&!e,s=new G({req:a.__req,cache:!1,accessToken:p}),n=C.portalRecommendEntrance.isTester(d,a.hostname),r=null;if(n){var l=new M({req:a.__req,accessToken:p,cache:!1});r=l.get()}else r=null;if(0===h){var c=function(){var e=f;(!e||e<50)&&(e=50),w.portalData.pageIndex=1,w.portalData.pageSize=e,w.portalData.firstShowSize=g+10},u=new L({req:a.__req,size:f,cache:!1,accessToken:p,showLottery:o,showFreeTrial:i,withLocalGroups:y}),v=C.splitIndexGoodsApi,S=v.isTester(d);if(S){var D=new N({req:a.__req,size:f,cache:!1,accessToken:p,showLottery:o,showFreeTrial:i,listID:x,withLocalGroups:y}),A=new j({req:a.__req,cache:!1,accessToken:p,showPromotionSlip:e});return t.all([D.get(),A.get(),u.get(),s.get(),r]).then(function(e){var t=e[0],o=e[1],i=e[2],s=e[3],n=e[4];return u.isQQPlatform&&(t.goodsList=i.goodsList),w.portalData={list:P.unionList(t.goodsList,o.list),pSlip:o.pSlip,redPointData:t.listUpdateTime,favoriteUpdateTime:t.favoriteUpdateTime,mobile_app_groups:o.mobile_app_groups,operations:s,recommendEntrances:n},c(),w.webpEnable=D.webpEnable||A.webpEnable,w.grade=k.grade,w})}var F=new E({req:a.__req,size:f,cache:!1,accessToken:p,showLottery:o,showFreeTrial:i,showPromotionSlip:e,withLocalGroups:y});return t.all([F.get(),u.get(),s.get(),r]).then(function(e){var t=e[1];return w.portalData=e[0],w.portalData.operations=e[2],w.portalData.recommendEntrances=e[3],u.isQQPlatform&&(w.portalData.list=t.goodsList),c(),w.webpEnable=F.webpEnable,w.grade=k.grade,w})}var U={name:I.name,req:a.__req,cache:!1,accessToken:p,optId:h,optType:1,size:100,offset:0,withLocalGroups:b};_&&(U.sortType=V[m].track);var O=new T(U);return t.all([O.get(),s.get(),r]).then(function(e){var t=f;return(!t||t<100)&&(t=100),w.categoryData=e[0],w.categoryData.operations=e[1],w.categoryData.recommendEntrances=e[2],w.categoryData.firstShowSize=g+10,w.categoryData.pageIndex=Math.ceil(t/100),w.webpEnable=O.webpEnable,w.grade=k.grade,w})}var a=e.requestContext,r=D.constant.CookieKey.AccessToken,l=a.cookies,c=a.queries,p=l[r],d=l[D.constant.CookieKey.UID],u=l[D.constant.CookieKey.EnableFriendSys]==d&&!!d,h=parseInt(c.lastNavItemId,10)||0,m=parseInt(c.lastSortType,10)||0,g=parseInt(c.item_index,10)||0,f=0;f=0===h?20*Math.ceil((g+10)/20):100*Math.ceil(g/100),f>500&&(f=0===h?20:100);var v=parseInt(c.nbsl,10)||0,y=C.subjectList.isTester(d,{page:"index",plan:c.plan}),b=C.subjectList.isTester(d,{page:"catgoods",plan:c.plan}),_=C.catSortGoodsApi.isTester(d,a.hostname),I=C.portalAdOptGoods.get(d,a.hostname),w={};w.footerData={page:o(a.pathname),referrer:c.referrer,enableFriendSys:u};var S=i(a.pathname,c);w.pageID=S;var x=s(a.pathname,c,a);w.listID=x,w.nbsl=v,w.lastSortType=m,w.lastNavItemId=h,w.uid=d,w.hostname=a.hostname,w.nodeServerTime=Date.now();var k=new A({req:a.__req,cache:!1,accessToken:p,res:a.__res});return k.getGrade().then(n,n)}})}).call(t,o("./node_modules/imports-loader/index.js?this=>global!./node_modules/exports-loader/index.js?global.Promise!./node_modules/es6-promise/dist/es6-promise.js"))},"./components/widgets/RecommendEntrance/style.scss":function(e,t){},"./components/app/portal_v2/banner.js":function(e,t,o){"use strict";var i="undefined"!=typeof window?o("./components/common/index.js"):{},s="undefined"!=typeof window?o("./components/app/portal_v2/bannerData.js"):{};e.exports=function(e,t){var o=null,n=function(e){for(var t=[],o=0;o<e.length;o++){var i=e[o];(i.home_banner_2||i.home_banner)&&t.push({subjectID:i.subject_id||"",goodsID:i.goods_id||"",imgUrl:(i.home_banner_2||"").length>0?i.home_banner_2:i.home_banner})}return t},a=function(e){e=e||[];var t=[];s.APP.show&&t.push(s.APP),null!=s.GROUP_APP&&s.GROUP_APP.show&&i.platform.isNativePlatform()&&t.push(s.GROUP_APP),null!=s.GROUP_NOT_APP&&s.GROUP_NOT_APP.show&&!i.platform.isNativePlatform()&&t.push(s.GROUP_NOT_APP);for(var o=0;o<e.length;o++){var n=e[o],a={imgUrl:n.imgUrl,show:!0,isInput:!1,forwardUrl:""};n.partnerFromUrl&&n.partnerID?a.forwardUrl="partner.html?"+i.buildQuery({partner_id:n.partnerID,from:n.partnerFromUrl}):n.subjectID?(a.forwardUrl="subject.html?subject_id="+n.subjectID,a.subjectID=n.subjectID):n.goodsID&&(a.forwardUrl="goods.html?goods_id="+n.goodsID,a.goodsID=n.goodsID),1065==n.subjectID&&(a.forwardUrl="urgent_170120.html"),t.push(a),0==o&&null!=s.DOUBLE_11&&s.DOUBLE_11.show&&t.push(s.DOUBLE_11)}return t},r=function(e,t){return void t(e)},l="subjects";i.request.apiRequest("GET",l,null,function(e){o=n(e),r(o,function(e){e=a(e),t(e)})},function(e){o=[],t(o)},!0)}},"./components/app/portal_v2/bannerData.js":function(e,t,o){"use strict";var i="undefined"!=typeof window?o("./components/common/index.js"):{},s={APP:{imgUrl:i.image.getCDNImgURL("app/v2/app_banner.jpg"),forwardUrl:"download.html?src=weixin&campaign=gzh&cid=sybanner",show:!1,isInput:!1},ACTIVITY:{imgUrl:i.image.getCDNImgURL("assetfile/banner_base.png"),forwardUrl:"http://mp.weixin.qq.com/s?__biz=MzIxNzA1NDEyNQ==&mid=404496271&idx=1&sn=47393699251ff68fc82bf5f299bbf118",show:!1,isInput:!1},GROUP_APP:{imgUrl:i.image.getCDNImgURL("activity/app_group_banner_new.jpg"),forwardUrl:function(e){return i.navigation.GroupUrl+"?is_group_app=1&group_order_id="+e},show:!1,isInput:!0},DOUBLE_11:{imgUrl:i.image.getCDNImgURL("activity/20151111.png"),forwardUrl:"",show:!1,isInput:!1},BLACK_FRIDAY:{imgUrl:i.image.getCDNImgURL("activity/black_friday_banner_555.png"),forwardUrl:"haitao.html",show:!1,isInput:!1},SHIPPING_HINT:{imgUrl:i.image.getCDNImgURL("activity/shipping_hint_banner_new.jpg"),forwardUrl:"shipping_hint.html",show:!1,isInput:!1}};e.exports=s},"./components/app/portal_v2/entries.js":function(e,t,o){"use strict";function i(e,t,o){return"number"==typeof e&&"number"==typeof t&&"number"==typeof o&&e<=o&&o<=t}function s(e,t){var o=c.activityTimeStamp||{};if(!e.key||!o[e.key])return!1;var s=o[e.key];return i(s.START,s.END,t)}function n(e,t){e=e||{};var o=c.regularActivityConfig||{};if(!e.key||!o[e.key])return!1;var s=o[e.key],n=s.dayOfWeek||[],a=s.timeslices||[],r=new Date(t),l=r.getDay();r.setHours(0),r.setMinutes(0),r.setSeconds(0);var p=Math.floor(r.getTime()/1e3);if(n.indexOf(l)>=0)for(var d=0;d<a.length;d++){var u=a[d],h=u.START,m=u.END;if(i(h,m,Math.floor(t/1e3)-p))return!0}return!1}function a(e,t){e=e||{};var o=c.regularActivityConfig||{};if(!e.key||!o[e.key])return!0;var i=o[e.key],s=i.redPointDayOfMonth||[],n=new Date(t),a=n.getDate();return!(s.length>0&&s.indexOf(a)<0)}var r,l=o("./constants/index.js");r=o("./components/common/image.js");var c=l.Modules.Entrance,p=function(e,t){var o=[],i=e?c.getSequenceB(t):c.getSequenceA(t),l=t||Date.now();return o=i.map(function(e,t){var o=e,i=o.imgUrlInCdn;return o.imageForActivity&&(s(e,l)||n(e,l))&&(i=o.imageForActivity),o.imgUrl=r.getCDNImgURL(i),a(e,l)||delete o.redPointKey,o})};e.exports={getQuickEntrances:p}},"./components/app/portal_v2/goodsList.js":function(e,t,o){"use strict";var i="undefined"!=typeof window?o("./components/common/index.js"):{},s=o("./components/common/uiWidgets/redPoint/index.js"),n=o("./abtest/index.js"),a=n.splitIndexGoodsApi,r=n.subjectList,l=n.portalPromotionSlip,c=o("./constants/tracking/portal.js"),p=832,d=o("./models/DataFormat/portal.js"),u=o("./manager/index.js").goods.getInstance(),h=o("./manager/index.js").page.getInstance(),m=o("./manager/index.js").moduleList;e.exports={pageIndex:1,sizeNum:0,loadGoodsNum:0,appGroupData:[],isSplitIndexGoodsApi:!1,init:function(e,t){if(this.pageIndex=e||1,this.sizeNum=t||(this.pageIndex<=1?50:20),i.user){var o=i.user.userID;this.isSplitIndexGoodsApi=!0,this.withLocalGroups=r.isTester(o,{page:"index"});var s=i.user.getGrade(),n=i.user.selfInfo.getInstance(s);this.showPortalPromotionSlip=n.getShowPortalPromotionSlip()&&l.isTester(o),this.showLottery=n.getShowPortalLotteryGoods()&&!i.appUtil.isCurrentVersionInReview()&&!this.showPortalPromotionSlip,this.showFreeTrial=n.getShowPortalFreeTrialGoods()&&!this.showPortalPromotionSlip}},requestGoodsData:function(e,t){var o=this.pageIndex,r=this.sizeNum,l=this,c=null,d=null,u=function(){if(c&&d){var t=l.getGoodsDatasFromData(i.util.extend(c,d));1===o&&s.updateData(c.list_update_time),e&&e(t)}};if(t||o>=1){var g=i.util.format(n.portalGoodsList.getRoute(i.user.userID,location.hostname),o,r);if(i.platform.isQQPlatform()&&(g=i.util.format("v2/subject/"+p+"/goods?page={0}&size={1}",o,r)),1===o&&(g+="&list_update_time=true"),"undefined"!=typeof window&&window.rawData){var f=window.rawData.listID;f||(f=m.getInstance({pageManager:h,name:"goods"}).listID),g+="&list_id="+f}i.request.apiRequest("GET",g,null,function(e){e.listID=f,c=e,u()},function(){c={},u()}),1===o&&this.isSplitIndexGoodsApi?i.request.apiRequest("GET",a.ApiRoutes.HomeShow,null,function(e){d=e,u()},function(){d={},u()},!0):d={}}},getGoodsDatasFromData:function(e){var t={list:[]},o=[],s=this;i.util.isArray(e.goods_list)&&e.goods_list.forEach(function(t){var n=d.listItem(t,{webpEnable:i.image.webpEnable,showLottery:s.showLottery,showFreeTrial:s.showFreeTrial,withLocalGroups:s.withLocalGroups,listItemName:s.withLocalGroups?"portalListItem":"",listID:e.listID});n&&(u.updateGoodsInfo(n.data),o.push({data:u.getGoodsDataByID(n.data.goodsID),props:n.props}))});var n=[];i.util.isArray(e.promotion_slip)&&this.showPortalPromotionSlip&&e.promotion_slip.forEach(function(e){var t=d.promotionSlipItem(e,{webpEnable:i.image.webpEnable});t&&n.push({goodsID:t.goodsID,goodsData:t})}),t.pSlip=n.slice(0,3);var a=[],r=function(e){for(var t=[],o=0;o<e.length;o++){var s=e[o];t[o]={goodsID:s.goods_id,goodsName:s.short_name||s.goods_name,logo:s.logo?i.image.cdnCompress(s.logo):"",price:i.stdFormat.price(s.price,100),marketPrice:i.stdFormat.price(s.market_price,100),thumbUrl:i.image.cdnCompress(s.hd_thumb_url||s.thumb_url)}}return t};if(i.util.isArray(e.home_recommend_subjects)){var l=e.home_recommend_subjects;e.home_super_brand&&e.home_super_brand.subject_id&&l.push(e.home_super_brand);for(var p=0;p<l.length;p++){var h=l[p],m=parseInt(h.position,10)||0;if(!(m<this.loadGoodsNum)&&(h.goods_list=h.goods_list||[],0!==h.goods_list.length)){var g="super_brand"===h.type,f={key:"subject_"+h.subject_id,subjectID:h.subject_id,subjectName:h.subject,goodsList:r(h.goods_list),position:m,listItemName:g?"superSpikeListItem":"goodsListSlip",endTime:g?h.end_time:"",startTime:g?h.start_time:"",serverTime:g?e.server_time:"",doImpr:!g};g?f.superSpikeVisitTrackingData=c.SuperSpikeVisitTrackingData:(f.subjectVisitTrackingData=c.MainSubjectForMore,f.goodsVisitTrackingData=c.MainSubjectGoodsClick),a.push(f)}}a.sort(function(e,t){return e.position-t.position})}for(var v=0,y=o.length>0?o[0].goodsID:0,b=function(){a[v].nearestGoodsID=y,t.list.push(a[v]),v++};v<a.length&&0===a[v].position;)b();for(var _=!1,I=0;I<o.length;I++)for(_&&(o[I].hasSlipAbove=!0,_=!1),t.list.push(o[I]),y=o[I].goodsID;v<a.length&&I+1===a[v].position;)b(),_=!0;for(;v<a.length;)b();return t.favoriteUpdateTime=parseInt(e.favorite_update_time,10)||0,t}}},"./models/DataFormat/portal.js":function(e,t,o){"use strict";var i=o("./models/util.js"),s=o("./constants/tracking/portal.js");e.exports={goodsList:function(e,t){var o=[];if(i.isArray(e))for(var s=0;s<e.length;s++){var n=this.listItem(e[s],t);n&&o.push(n)}return o},listItem:function(e,t){var o=e.group||{},n=parseInt(e.event_type,10),a=parseInt(e.is_app,10);if(!t.showLottery&&1===n)return null;if(!t.showFreeTrial&&(7===n||11===n))return null;var r="去开团",l=i.StdFormat.price(e.price||o.price,100),c={goodsID:e.goods_id,shortGoodsName:e.short_name||e.goods_name,goodsName:e.goods_name,price:l,salePrice:l,normalPrice:i.StdFormat.price(e.normal_price,100),discount:i.StdFormat.price((e.market_price||e.normal_price)-(e.price||o.price),100),customerNum:parseInt(e.customer_num||o.customer_num,10),soldQuantity:i.StdFormat.sales(e.cnt),eventDesc:e.group.customer_num+"人团",eventType:n,isApp:a,buyButtonTxt:r,country:e.country||"",nationalFlag:e.country?i.getCDNImgURL(i.format("nation/rect/{0}.png",e.country)):""};e.image_url&&(c.imageUrl=i.cdnCompress(e.image_url,t.type,t.webpEnable));var p=e.hd_thumb_url||e.thumb_url;p&&(c.thumbUrl=i.cdnCompress(p,t.type,t.webpEnable)),c.imgUrl=c.imageUrl||c.thumbUrl;var d={key:"goods_"+e.goods_id,withLocalGroups:t.withLocalGroups,extraTrackingParams:i.extend({},s.MainGoodsClick),buttonTrackingParams:i.extend({},s.MainGoodsButtonClick),listItemName:t.listItemName||"singleListItem",isDoubleList:t.isDoubleList||!1,doImpr:!0};if(d.imprParams={},e.p_rec){var u=JSON.stringify(e.p_rec);d.extraTrackingParams.p_rec=u,d.imprParams={p_rec:u}}return t.listID&&(d.extraTrackingParams.list_id=t.listID,d.imprParams.list_id=t.listID),{data:c,props:d}},subjectGoodsList:function(e,t){var o=t.webpEnable,n=[],a=function(e){var t=e.map(function(e){return{goodsID:e.goods_id,goodsName:e.short_name||e.goods_name,logo:i.cdnCompress(e.logo,null,o),price:i.StdFormat.price(e.price,100),marketPrice:i.StdFormat.price(e.market_price,100),thumbUrl:i.cdnCompress(e.hd_thumb_url||e.thumb_url,null,o)}});return t},r=e.home_recommend_subjects||[];return e.home_super_brand&&e.home_super_brand.subject_id&&r.push(e.home_super_brand),r.forEach(function(t){if(t.goods_list=t.goods_list||[],t.goods_list.length){var o="super_brand"===t.type,i={key:"subject_"+t.subject_id,subjectID:t.subject_id,subjectName:t.subject,goodsList:a(t.goods_list),position:parseInt(t.position,10)||0,listItemName:o?"superSpikeListItem":"goodsListSlip",endTime:o?t.end_time:"",startTime:o?t.start_time:"",serverTime:o?e.server_time:"",doImpr:!o};o?i.superSpikeVisitTrackingData=s.SuperSpikeVisitTrackingData:(i.subjectVisitTrackingData=s.MainSubjectForMore,i.goodsVisitTrackingData=s.MainSubjectGoodsClick),n.push(i)}}),n.sort(function(e,t){return e.position-t.position}),n},unionList:function(e,t){for(var o=[],i=0,s=e.length>0?e[0].data.goodsID:0,n=function(){t[i].nearestGoodsID=s,o.push(t[i]),i++};i<t.length&&0===t[i].position;)n();for(var a=!1,r=0;r<e.length;r++)for(a&&(e[r].props.hasSlipAbove=!0,a=!1),o.push(e[r]),s=e[r].data.goodsID;i<t.length&&r+1===t[i].position;)n(),a=!0;for(;i<t.length;)n();return o},promotionSlipItem:function(e,t){var o=e.group||{},s=i.StdFormat.price(e.price||o.price,100),n=e.goods_id;return{key:"promotion_slip_"+n,goodsID:n,thumbUrl:i.cdnCompress(e.hd_thumb_url||e.thumb_url,t.type,t.webpEnable),tinyName:e.tiny_name||e.short_name||e.goods_name,goodsName:e.goods_name,price:s}}}},"./components/app/portal_v2/categoryGoodsList.js":function(e,t,o){"use strict";var i="undefined"!=typeof window?o("./components/common/index.js"):{},s=o("./constants/tracking/portal.js"),n=o("./models/DataFormat/catgoods.js"),a=o("./manager/index.js").goods.getInstance(),r=o("./abtest/index.js").subjectList,l=(o("./abtest/index.js").catSortGoodsApi,o("./abtest/index.js").portalAdOptGoods),c=o("./constants/category_sort.js"),p=c.SortTypes,d=c.DefaultSortType,u=function(e,t){return t=t||d,[e,t].join("-")},h=function(){var e={},t={},o=function(e,o,s){s=s||d,i.util.merge(o,t[u(e,s)])},c=!1;return e.init=function(e,o,s,n){n=n||d;var a={pageIndex:o||0,sizeNum:s||50,loadGoodsNum:o*s,loaded:!1};t[u(e,n)]=a,i.user&&(c=r.isTester(i.user.userID,{page:"catgoods"}))},e.checkStateIsLoaded=function(e,o){return o=o||d,(t[u(e,o)]||{}).loaded||!1},e.requestGoodsData=function(s,n,a){var r=n.sortType||d,c=u(n.optID,r);t[c]&&a&&(t[c].pageIndex=0);var h=t[c]||{},m=i.url.buildQuery({offset:h.pageIndex*h.sizeNum||0,opt_type:1,size:h.sizeNum||100,sort_type:p[r].api}),g=l.get(i.user.userID,n.hostname).route,f=i.util.format(g,n.optID,m);i.request.apiRequest("GET",f,null,function(t){var i=e.getGoodsDataFromData(t,n.optID,r);s(i,n),h.pageIndex++,h.loadGoodsNum+=h.sizeNum,
h.loaded=!0,o(h)},function(){},!0)},e.getGoodsDataFromData=function(e,o,r){r=r||d;var l=[],h=t[u(o,r)]||{};if(i.util.isArray(e.goods_list))for(var m=0;m<e.goods_list.length;m++){var g=e.goods_list[m],f=(h.loadGoodsNum||0)+m,v=i.util.extend(s.CategoryGoodsClick,{opt_id:o,idx:f,sort_type:p[r].track}),y=n.listItem(g,{clickTrackingParams:v,referPageName:"index",withLocalGroups:c,doImpr:!0,imprParams:i.util.extend(s.CategoryGoodsImpr,{sort_type:p[r].track,opt_type:1,opt_id:o,idx:f}),webpEnable:i.image.webpEnable});y&&(a.updateGoodsInfo(y.data),l.push({data:a.getGoodsDataByID(y.data.goodsID),props:y.props}))}return l},e}();e.exports=h},"./models/DataFormat/catgoods.js":function(e,t,o){"use strict";var i=o("./models/util.js");e.exports={listItem:function(e,t){var o=e.group||{},s=e.goods_id,n={goodsID:s,goodsName:e.goods_name,price:i.StdFormat.price(e.price||o.price,100),shortGoodsName:e.short_name||e.goods_name,normalPrice:i.StdFormat.price(e.normal_price,100),discount:i.StdFormat.price((e.market_price||e.normal_price)-(e.price||o.price),100),customerNum:parseInt(e.customer_num||o.customer_num,10),soldQuantity:i.StdFormat.sales(e.cnt),eventType:null!=e.event_type?parseInt(e.event_type,10)||0:null,country:e.country||"",tag:e.tag};e.image_url&&(n.imageUrl=i.cdnCompress(e.image_url,t.type,t.webpEnable));var a=e.hd_thumb_url||e.thumb_url;a&&(n.thumbUrl=n.imgUrl=i.cdnCompress(a,t.type,t.webpEnable));var r=e.ad?JSON.stringify(e.ad):"",l=e.p_rec?JSON.stringify(e.p_rec):"",c={key:"goods_"+s,forwardUrl:function(){var e="goods.html?goods_id="+s;return t.referPageName&&(e+="&refer_page_name="+t.referPageName),e}(),listItemName:"catGoodsItem",get extraTrackingParams(){if(t.clickTrackingParams){var e={goods_id:s};return r&&(e.ad=r),l&&(e.p_rec=l),i.extend(t.clickTrackingParams,e)}return null},withLocalGroups:t.withLocalGroups,doImpr:t.doImpr,imprParams:i.extend({list_width:2,event_type:n.eventType},t.imprParams),isDoubleList:!0,isCombinedImpr:t.isCombinedImpr,imprBlocks:t.imprBlocks,blockID:t.blockID,imprName:t.imprName,logData:t.logData};return r&&(c.ad=r,c.imprParams.ad=r,c.imprParams.p_rec=l),{data:n,props:c}}}},"./constants/category_sort.js":function(e,t){"use strict";"usr strict";var o=[{type:0,name:"综合排序",api:"DEFAULT",track:"PRIORITY"},{type:1,name:"最近热销",api:"GMV",track:"COUNT"},{type:2,name:"价格从低到高",api:"PRICE_ASC",track:"PRICE_ASC"},{type:3,name:"价格从高到低",api:"PRICE_DESC",track:"PRICE_DESC"}],i=0;e.exports={SortTypes:o,DefaultSortType:i}},"./components/widgets/CaptainFreeGoodsPopup/index.js":function(e,t,o){"use strict";var i=o("./components/vendor/react.min.js"),s="undefined"!=typeof window?o("./components/common/index.js"):{},n=10,a=o("./components/common/ui/util.js"),r=o("./constants/ui/base64/DefaultSquare.js"),l=o("./constants/ui/base64/portal/captainFreeArrow.js"),c=o("./constants/tracking/index_captain_free_popup.js"),p=i.createClass({displayName:"CaptainFreeGoodsPopup",getInitialState:function(){return{visible:!1,showMoreHint:!1}},getDefaultProps:function(){return{goodsList:[],couponCount:0,show:!1}},componentWillMount:function(){var e=Math.max((s.ui.getWindowHeight()-365)/2,0)+"px";this.setState({style:{top:e},visible:this.props.show,showMoreHint:this.props.goodsList.length>n})},componentDidMount:function(){this.state.visible&&(s.logger.trackingRecord(c.CaptainFreePopupShow),s.ui.disableScroll("cfgp-body-container")),this.cacheNode=document.getElementById("cfgp-body-container"),this.cacheWrapper=document.getElementById("cfgp-body-wrapper"),this.onScroll()},forward:function(e){s.navigation.forward(e)},forwardGoods:function(e){var t=this,o=e.currentTarget.dataset.index,i=this.props.goodsList[o].goodsId;if(0!==parseInt(i,10)){var n=c.CaptainFreeGoodsClick;n.goods_id=i,n.idx=parseInt(o||0,10),s.logger.trackingRecord(n,function(){t.forward("goods.html?goods_id="+i)})}},forwardCouponGoodsList:function(e){this.state.showMoreHint&&this.forward("tzfree_list/tzfree_list.html?refer_page_name=index&refer_page_section=popup")},hide:function(){this.setState({visible:!1}),s.ui.enableScroll("cfgp-body-container")},render:function(){var e=[],t=this,o=(t.props.goodsList||[]).slice(0,n);o.forEach(function(o,s){e.push(i.createElement("li",{key:s,"data-index":s,className:"cfgp-goods-item",onClick:t.forwardGoods},i.createElement("div",{className:"cfgp-goods-img"},i.createElement("img",{"data-url":o.thumbUrl,src:r})),i.createElement("div",{className:"cfgp-goods-details"},i.createElement("div",{className:"cfgp-goods-name"},i.createElement("p",null,o.goodsName)),i.createElement("div",{className:"cfgp-goods-buy"},i.createElement("div",{className:"cfgp-goods-price"},i.createElement("span",null,"￥",o.price)),i.createElement("div",{className:"cfgp-goods-buy-button"},i.createElement("span",null,"0元开团"))))))});var s=this.state.showMoreHint?"查看更多商品":"没有更多商品了";return i.createElement("div",{id:"captain-free-goods-popup",style:{display:this.state.visible?"":"none"}},i.createElement("div",{className:"cfgp-popup-wrapper",style:this.state.style},i.createElement("div",{className:"cfgp-close-btn",onClick:this.hide}),i.createElement("div",{className:"cfgp-popup-title"},i.createElement("p",{className:"cfgp-main-title"},"您有",i.createElement("i",null,this.props.couponCount),"次免费开团的机会未使用")),i.createElement("div",{id:"cfgp-body-wrapper",className:"cfgp-body-wrapper"},i.createElement("ul",{id:"cfgp-body-container",className:"cfgp-body-container",onScroll:t.onScroll},e,i.createElement("div",{className:"cfgp-body-footer"},i.createElement("div",{onClick:this.forwardCouponGoodsList},s),i.createElement("img",{style:{display:this.state.showMoreHint?"":"none"},src:l}))))),i.createElement("div",{id:"cfgp-cover-mask",className:"cfgp-cover-mask"}))},onScroll:function(){a.lazyLoadOnScroller(this.cacheNode,null,{onlyInScroller:!0,pageVerticalRatio:0},this.cacheWrapper)}});e.exports=p},"./constants/ui/base64/portal/captainFreeArrow.js":function(e,t){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAbBAMAAABRv8j0AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAbUExURQAAAFhZW1hZW1hZW1hZW1hZW1hZW1hZW1hZW9p9RHcAAAAIdFJOUwDID9gYoTh1eiF0bwAAADRJREFUCNdjYBVigICIRgUIQ6IDKuTcARVisaCqUABEKKPDACYigKIGrosCAYQv4P6C+RQAETgbdQFLnSkAAAAASUVORK5CYII="},"./constants/tracking/index_captain_free_popup.js":function(e,t){"use strict";e.exports={CaptainFreePopupShow:{op:"event",event:"index_free_group_show",page_name:"index",page_section:"popup"},CaptainFreeGoodsClick:{op:"click",event:"free_group_goods_clk",page_name:"index",page_section:"popup_goods_list"}}},"./components/app/portal_v2/captainFreeGoodsList.js":function(e,t,o){"use strict";function i(e){e=e||{},this.api="free_coupon_goods_list?page={0}&size={1}",this.page=e.page||1,this.size=e.size||50,this.isLoadedAll=!1}var s="undefined"!=typeof window?o("./components/common/index.js"):{};i.prototype.formatItem=function(e){if(!e)return null;var t=e.group||{},o={key:e.goods_id,goodsId:e.goods_id,goodsName:e.goods_name||"",price:s.stdFormat.price(t.price,100)||null,thumbUrl:s.image.cdnCompress(e.hd_thumb_url||e.thumb_url)};return o},i.prototype.formatList=function(e){var t=[];if(e&&e.length>0)for(var o=0,i=e.length;o<i;o++){var s=this.formatItem(e[o]);s&&t.push(s)}return t},i.prototype.request=function(e){var t=this;if(t.isLoadedAll)return void e({goodsList:[]});var o=s.util.format(this.api,this.page,this.size);s.request.apiRequest("GET",o,null,function(o){var i=t.formatList(o.goods_list);i.length>0?t.page++:t.isLoadedAll=!0;var s=o.useable_coupons_count||0;try{e({goodsList:i,couponCount:s})}catch(t){e()}},function(){e()},!1,!1,!0)},e.exports=new i},"./components/widgets/CouponExpirePopup/index.js":function(e,t,o){"use strict";var i=o("./components/vendor/react.min.js"),s="undefined"!=typeof window?o("./components/common/index.js"):{},n=o("./constants/index_coupon_expire_popup.js"),a=o("./constants/coupon/index.js"),r=n.CouponType,l=n.ForwardURL,c=o("./components/common/ui/util.js"),p="cfgp-body-container",d=o("./constants/tracking/index_coupon_expire_popup.js"),u=i.createClass({displayName:"CouponExpirePopup",getInitialState:function(){return{visible:!1}},getDefaultProps:function(){return{couponList:[],couponCount:0,show:!1}},componentWillMount:function(){var e=Math.max((s.ui.getWindowHeight()-365)/2,0)+"px";this.setState({style:{top:e},visible:this.props.show})},componentDidMount:function(){this.state.visible&&(s.logger.trackingRecord(d.CouponExpireShow),s.ui.disableScroll("cfgp-body-container")),this.cacheNode=document.getElementById("cfgp-body-container"),this.cacheWrapper=document.getElementById("cfgp-body-wrapper"),this.onScroll()},forward:function(e){s.navigation.forward(e)},forwardFunc:function(e){var t,o=this,i=e.currentTarget.dataset.index,n=this.props.couponExpireList[i];switch(n.type){case r.GroupFree:t=s.util.extend(d.CouponClick,{coupon_type:"free_group"}),s.logger.trackingRecord(t,function(){o.forward(l.GroupFree)});break;case r.Mall:t=s.util.extend(d.CouponClick,{coupon_type:"shop"}),s.logger.trackingRecord(t,function(){o.forward(s.util.format(l.Mall,n.mallID))});break;case r.Category:t=s.util.extend(d.CouponClick,{coupon_type:"category"}),s.logger.trackingRecord(t,function(){o.forward(n.forwardUrl)}),n.isMobileFare&&o.forward(s.util.format(l.MobileFare,n.discount,n.minAmount,n.expiredTime,s.constant.GoodsType.MOBILE_FARE));break;case r.App:case r.AppMobileFare:s.ui.showJSAlert(s.constant.AlertType.Confirm.ConfirmAppDownload,function(){s.ui.disableScroll(p),o.forward(a.AppDownloadUrl.IndexPopup)},function(){s.ui.disableScroll(p)},null,{});break;case r.Bound:t=s.util.extend(d.CouponClick,{coupon_type:"limit"}),s.logger.trackingRecord(t,function(){o.forward(s.util.format(l.Bound,n.discount,n.minAmount,n.expiredTime,n.couponId))});break;default:t=s.util.extend(d.CouponClick,{coupon_type:"not_limit"}),s.logger.trackingRecord(t,function(){o.forward(s.util.format(l.Bound,n.discount,n.minAmount,n.expiredTime))})}},hide:function(){this.setState({visible:!1}),s.logger.trackingRecord(d.HideBtnClick),s.ui.enableScroll("cfgp-body-container")},goCoupons:function(){var e=this;e.forward(l.Coupons)},render:function(){var e=[],t=this,o=t.props.couponExpireList;return o.forEach(function(o,s){var n="ice-left-nogroup",a="icec-nogroup-title",r="ice-use-btn";o.isMall?(n+=" ice-left-nogroup-mall",a+=" icec-nogroup-title-mall",r+=" ice-use-btn-1"):o.isCategory?(n+=" ice-left-nogroup-category",a+=" icec-nogroup-title-category",r+=" ice-use-btn-2"):o.isApp?(n+=" ice-left-nogroup-app",a+=" icec-nogroup-title-app",r+=" ice-use-btn-3"):o.isGroupFree&&(r+=" ice-use-btn-1"),e.push(i.createElement("li",{key:s,"data-index":s,className:"ice-coupon-item",onClick:t.forwardFunc},i.createElement("div",{className:"ice-content-left"},i.createElement("div",{className:n,style:{display:o.isGroupFree?"none":""}},i.createElement("p",{className:"icec-nogroup-discount"},i.createElement("i",null,"￥"),o.discount),i.createElement("p",{className:"icec-nogroup-name"},o.name)),i.createElement("div",{className:"ice-left-group",style:{display:o.isGroupFree?"":"none"}})),i.createElement("div",{className:"ice-content-center"},i.createElement("div",{className:"ice-center-nogroup",style:{display:o.isGroupFree?"none":""}},i.createElement("p",{className:a},o.title),i.createElement("p",{className:"icec-nogroup-scope"},o.scope),i.createElement("p",{className:"ice-center-time"},"到期时间：",o.endTime)),i.createElement("div",{className:"ice-center-group",style:{display:o.isGroupFree?"":"none"}},i.createElement("p",{className:"icec-group-title"},o.title),i.createElement("p",{className:"ice-center-time"},"到期时间：",o.endTime))),i.createElement("div",{className:r},i.createElement("span",null,o.useText))))}),i.createElement("div",{id:"coupon-expire-popup",style:{display:this.state.visible?"":"none"}},i.createElement("div",{className:"cfgp-popup-wrapper",style:this.state.style},i.createElement("div",{className:"cfgp-close-btn",onClick:this.hide}),i.createElement("div",{className:"ice-popup-title"},i.createElement("div",{className:"ice-main-title"},i.createElement("p",null,"您有",i.createElement("i",null,this.props.couponCount),"张优惠券即将过期"))),i.createElement("div",{id:"cfgp-body-wrapper",className:"cfgp-body-wrapper"},i.createElement("ul",{id:"cfgp-body-container",className:"ice-body-container",onScroll:t.onScroll},e,i.createElement("div",{className:"ice-count-only",style:{display:1==this.props.couponCount?"":"none"}}),i.createElement("p",{className:"ice-count-tip",style:{display:1!=this.props.couponCount&&this.props.couponCount<10?"":"none"}},"仅显示1周内过期的优惠券"),i.createElement("div",{className:"ice-count-more",style:{display:this.props.couponCount>=10?"":"none"},onClick:this.goCoupons},i.createElement("p",null,"查看更多"))))),i.createElement("div",{id:"cfgp-cover-mask",className:"cfgp-cover-mask"}))},onScroll:function(){c.lazyLoadOnScroller(this.cacheNode,null,{onlyInScroller:!0,pageVerticalRatio:0},this.cacheWrapper)}});e.exports=u},"./constants/index_coupon_expire_popup.js":function(e,t){"use strict";"usr strict";e.exports={CouponType:{Bound:1,Cash:3,FreeGroup:7,Mall:8,Category:17,App:19,AppMobileFare:20},CouponScope:{Bound:"全场通用",Mall:"仅限{0}",MobileFare:"仅限话费商品使用",Cash:"满{0}可用",App:"仅限拼多多App内可用",AppMobileFare:"仅限App内购买话费商品可用"},CouponTitle:{GroupFree:"团长免费开团",Bound:"满{0}减{1}",Cash:"无金额门槛"},CouponName:{Bound:"通用券",Category:"类目券",App:"App专享券",Mall:"店铺券"},CouponUseText:{GroupFree:"免费开团",Bound:"去使用"},API_URL:"coupon/v2/query_validity_coupons?page=1&size=10&fc_version=1.0&sort_rule=coupon_end_time&coupon_endtime_before={0}",ForwardURL:{GroupFree:"tzfree_list/tzfree_list.html?refer_page_name=index&refer_page_section=popup&refer_page_element=coupon",Mall:"mall_page.html?mall_id={0}&refer_page_name=index&refer_page_section=popup&refer_page_element=coupon",Bound:"coupon_newbee.html?discount={0}&min_amount={1}&expired={2}&coupon_id={3}&refer_page_name=index&refer_page_section=future_expire_coupon_popup&refer_page_element=coupon",MobileFare:"coupon_newbee.html?discount={0}&min_amount={1}&expired={2}&goods_type={3}&refer_page_name=index&refer_page_section=future_expire_coupon_popup&refer_page_element=coupon",Coupons:"coupons.html?refer_page_name=index&refer_page_section=future_expire_coupon_popup&refer_page_element=coupon"},COUNT_LIMIT:10,SEVEN_DAY_MILISEC:6048e5}},"./constants/tracking/index_coupon_expire_popup.js":function(e,t){"use strict";e.exports={CouponExpireShow:{op:"event",event:"future_expire_coupon_popup_show",page_name:"index",page_section:"future_expire_coupon_popup"},HideBtnClick:{op:"click",event:"close_btn_clk",page_name:"index",page_section:"future_expire_coupon_popup",page_element:"close_btn"},CouponClick:{op:"click",event:"future_expire_coupon_clk",page_name:"index",page_section:"future_expire_coupon_popup",page_element:"coupon"}}},"./components/app/portal_v2/couponExpireList.js":function(e,t,o){"use strict";function i(e){e=e||{},this.api=n.API_URL}var s="undefined"!=typeof window?o("./components/common/index.js"):{},n=o("./constants/index_coupon_expire_popup.js"),a=n.CouponType,r=n.CouponScope,l=n.CouponTitle,c=n.CouponName,p=n.CouponUseText;i.prototype.formatItem=function(e){if(!e)return null;var t=parseInt(e.end_time,10),o=function(e){return e.type===s.constant.CouponBatchType.GroupFreeCoupon?a.GroupFree:e.type===s.constant.CouponBatchType.CategoryCoupon||e.display_type===s.constant.CouponDisplayType.Category?a.Category:e.display_type===s.constant.CouponDisplayType.App||e.display_type===s.constant.CouponDisplayType.AppMobileFare?a.App:e.mall_id&&e.mall_name?a.Mall:e.min_amount===e.discount?a.Cash:a.Bound},i=o(e),n={type:i,expiredTime:t,endTime:s.stdFormat.time(e.end_time,"YYYY.MM.dd")};return i===a.GroupFree?(n.isGroupFree=!0,n.title=l.GroupFree,n.useText=p.GroupFree):(n.isGroupFree=!1,n.discount=s.stdFormat.price(parseInt(e.discount,10)||0,100),n.minAmount=s.stdFormat.price(parseInt(e.min_amount,10)||0,100),n.title=s.util.format(l.Bound,n.minAmount,n.discount),n.couponId=e.coupon_id||"",n.useText=p.Bound,i===a.Bound?(n.scope=r.Bound,n.name=c.Bound):i===a.Mall?(n.scope=s.util.format(r.Mall,e.mall_name),n.name=c.Mall,n.isMall=!0,n.mallID=parseInt(e.mall_id,10)):i===a.Category?(n.isCategory=!0,n.name=c.Category,n.scope=e.rules_desc||"",n.forwardUrl=e.link_url||"",e.goods_type.toString()==s.constant.GoodsType.MOBILE_FARE&&(n.isMobileFare=!0,n.scope=r.MobileFare)):i===a.App?(n.isApp=!0,n.name=c.App,n.forwardUrl=null,n.scope=r.App):i===a.AppMobileFare?(n.isApp=!0,n.name=c.App,n.forwardUrl=null,n.scope=r.AppMobileFare):(n.minAmount=s.stdFormat.price(parseInt(e.min_amount+1,10)||0,100),n.title=l.Cash,n.scope=s.util.format(r.Cash,n.minAmount),n.name=c.Bound)),n},i.prototype.formatList=function(e){var t=[];if(e&&e.length>0)for(var o=0;o<e.length;o++){var i=this.formatItem(e[o]);i&&t.push(i)}return t},i.prototype.request=function(e){var t=this,o=s.util.format(this.api,parseInt((Date.now()+n.SEVEN_DAY_MILISEC)/1e3,10));s.request.apiRequest("GET",o,null,function(o){var i=t.formatList(o.coupons),s=parseInt(o.total_size,10);try{e({couponList:i,couponCount:s||i.length})}catch(t){e()}},function(){e()},!1,!1,!0)},e.exports=new i},"./components/widgets/NavBar/index.js":function(e,t,o){"use strict";var i=o("./components/vendor/react.min.js"),s="undefined"!=typeof window?o("./components/common/index.js"):{},n=i.createClass({displayName:"NavBar",getDefaultProps:function(){return{navItems:[],onNavItemSelected:function(e){},selectedId:0,nbsl:0,extraClassList:[]}},getInitialState:function(){return{}},componentDidMount:function(){var e=document.querySelector("#nav-bar");e&&(e.scrollLeft=this.props.nbsl),s.page.doAfterWxReady(function(){s.navigation.replaceQuery({nbsl:null})})},render:function(){var e=this,t=e.props.navItems||[],o="cur-cf-tab",s=[];return s=t.map(function(t,s){t.index=s;var n="";return t.optID===e.props.selectedId&&(n=o),i.createElement("li",{className:"cf-tab-item",key:t.optID,"data-index":s,onClick:function(){e.onSelectedIndex(s,t)}},i.createElement("span",{className:n},t.tabName))}),i.createElement("div",{className:["cf-container"].concat(e.props.extraClassList).join(" ")},i.createElement("div",{className:"cf-edge"}),i.createElement("ul",{className:"cf-content",id:"nav-bar"},s))},onSelectedIndex:function(e,t){s.util.call(this.props.onNavItemSelected,t,e)}});e.exports=n},"./components/widgets/MidYearPromoAct/Popup.js":function(e,t,o){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}"undefined"!=typeof window?o("./static/src/assets/scss/app_mid_year_promo_popup.scss"):null;var a=o("./components/widgets/BaseAct/Popup.js"),r=o("./components/widgets/MidYearPromoAct/utils.js"),l=function(e){function t(e){i(this,t);var o=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.utils=r,o}return n(t,e),t}(a);e.exports=l},"./static/src/assets/scss/app_mid_year_promo_popup.scss":function(e,t){},"./components/widgets/BaseAct/Popup.js":function(e,t,o){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),r=o("./components/vendor/react.min.js"),l="undefined"!=typeof window?o("./components/common/index.js"):{},c=o("./manager/index.js").popup.getInstance(),p="index_promotion_activity_popup",d=c.Constant.TaskName.PromotionActivity,u=o("./manager/ActivityManager.js").getInstance(),h=o("./components/common/image.js"),m=function(e){function t(e){i(this,t);var o=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.utils={},o.state={display:"none",bgClass:""},o}return n(t,e),a(t,[{key:"componentDidMount",value:function(){var e=this,t=function(){c.remove(d)};if("undefined"==typeof localStorage)return void t();var o=localStorage.getItem(p),i=new Date,s=[i.getMonth()+1,i.getDate()].join("-");o!==s&&e.utils.checkInTime(e.props.nodeServerTime)?c.produce(d,{show:function(){e.loadPopup(s)}}):t()}},{key:"loadPopup",value:function(e){var t=this,o=u.getPromotionActivityImagesModel(),i=function(){var i=t.utils.getPopupRes(),s=o.getImageUrlByKey(t.utils.Constant.ImageKeys.PopupBg),n=o.getImageUrlByKey(t.utils.Constant.ImageKeys.PopupClose);t.setState({display:"",bgClass:t.utils.getPopupBgClass(),bgImg:"url("+(s||h.getCDNImgURL(i.bg))+")",closeButton:n||h.getCDNImgURL(i.close)}),e&&localStorage.setItem(p,e),l.logger.trackingRecord(t.utils.Constant.TK.popupImpr)};o.isLoaded()?i():o.addEvent(o.Event.onLoad,function(){i()})}},{key:"onClose",value:function(){c.completeByName(d),this.setState({display:"none"})}},{key:"enterClick",value:function(e){this.onClose();var t=this;l.logger.trackingRecord(t.utils.Constant.TK.popupEnterClick,function(){var e={refer_page_section:t.utils.Constant.TK.popupEnterClick.page_section,refer_page_element:t.utils.Constant.TK.popupEnterClick.page_element};t.utils.targetPathname?l.navigation.forward(t.utils.targetPathname+"?"+l.url.buildQuery(e)):t.utils.targetPage&&l.navigation[t.utils.targetPage]("forward",e)})}},{key:"closeClick",value:function(e){e&&(e.stopPropagation(),e.preventDefault()),this.onClose(),l.logger.trackingRecord(this.utils.Constant.TK.popupCloseClick)}},{key:"render",value:function(){var e=this;return r.createElement("div",{id:"web-promotion-activity-popup",className:this.utils.popupClassName,style:{display:this.state.display}},r.createElement("div",{className:["bg",this.state.bgClass].join(" "),style:{backgroundImage:e.state.bgImg},onClick:function(t){e.enterClick(t)}},r.createElement("div",{className:"close-button",onClick:function(t){e.closeClick(t)}},r.createElement("img",{src:e.state.closeButton}))))}}]),t}(r.Component);e.exports=m},"./components/widgets/MidYearPromoAct/Banner.js":function(e,t,o){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=o("./components/widgets/BaseAct/Banner.js"),r=o("./components/widgets/MidYearPromoAct/utils.js"),l=function(e){function t(e){i(this,t);var o=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.utils=r,o}return n(t,e),t}(a);e.exports=l},"./components/widgets/BaseAct/Banner.js":function(e,t,o){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),r=o("./components/vendor/react.min.js"),l="undefined"!=typeof window?o("./components/common/index.js"):{},c=o("./components/common/image.js"),p=o("./manager/ActivityManager.js").getInstance(),d=function(e){function t(e){i(this,t);var o=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.utils={},o.state={style:{display:"none"},imgVisible:"hidden",eventBannerUrl:""},o}return n(t,e),a(t,[{key:"clickEventBanner",value:function(e){e&&(e.stopPropagation(),e.preventDefault());var t=this;l.logger.trackingRecord(t.utils.Constant.TK.bannerClick,function(){var e={refer_page_element:t.utils.Constant.TK.bannerClick.page_element};t.utils.targetPathname?l.navigation.forward(t.utils.targetPathname+"?"+l.url.buildQuery(e)):t.utils.targetPage&&l.navigation[t.utils.targetPage]("forward",e)})}},{key:"componentWillMount",value:function(){this.utils.checkInTime(this.props.nodeServerTime)&&this.setState({style:{display:"block"}})}},{key:"componentDidMount",value:function(){if(this.utils.checkInTime(this.props.nodeServerTime)&&!this.state.eventBannerUrl){var e=this,t=p.getPromotionActivityImagesModel(),o=function(){var o=t.getImageUrlByKey(e.utils.Constant.ImageKeys.EventBanner)||c.getCDNImgURL(e.utils.getEventBanner());e.setState({style:{display:"block"},imgVisible:"",eventBannerUrl:o})};t.isLoaded()?o():t.addEvent(t.Event.onLoad,function(){o()})}}},{key:"render",value:function(){var e=this;return r.createElement("div",{id:"event-index-banner",className:"std-goods-image",onClick:function(t){e.clickEventBanner(t)},style:this.state.style},r.createElement("img",{src:this.state.eventBannerUrl,style:{visibility:this.state.imgVisible}}))}}]),t}(r.Component);e.exports=d},"./components/widgets/MidYearPromoAct/Bubble.js":function(e,t,o){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=o("./components/widgets/BaseAct/Bubble.js"),r=o("./components/widgets/MidYearPromoAct/utils.js"),l=function(e){function t(e){i(this,t);var o=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.utils=r,o}return n(t,e),t}(a);e.exports=l},"./components/widgets/BaseAct/Bubble.js":function(e,t,o){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),r=o("./components/vendor/react.min.js"),l="undefined"!=typeof window?o("./components/common/index.js"):{},c=o("./components/common/image.js"),p=o("./manager/ActivityManager.js").getInstance(),d=function(e){function t(e){i(this,t);var o=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.utils={},o.state={style:{display:"none"},eventBubbleUrl:""},o}return n(t,e),a(t,[{key:"clickEventBubble",value:function(e){e&&(e.stopPropagation(),e.preventDefault());var t=this;l.logger.trackingRecord(t.utils.Constant.TK.bubbleClick,function(){var e={refer_page_element:t.utils.Constant.TK.bubbleClick.page_element};t.utils.targetPathname?l.navigation.forward(t.utils.targetPathname+"?"+l.url.buildQuery(e)):t.utils.targetPage&&l.navigation[t.utils.targetPage]("forward",e)})}},{key:"componentDidMount",value:function(){if(this.utils.checkInTime(this.props.nodeServerTime)&&!this.state.eventBubbleUrl){var e=this,t=p.getPromotionActivityImagesModel(),o=function(){var o=t.getImageUrlByKey(e.utils.Constant.ImageKeys.EventBubble)||c.getCDNImgURL(e.utils.getEventBubble());e.setState({style:{display:""},eventBubbleUrl:o})};t.isLoaded()?o():t.addEvent(t.Event.onLoad,function(){o()})}}},{key:"render",value:function(){var e=this;return r.createElement("div",{className:"act-event-bubble",style:this.state.style,onClick:function(t){e.clickEventBubble(t)}},r.createElement("img",{src:this.state.eventBubbleUrl}))}}]),t}(r.Component);d.defaultProps={innerFrom:""},e.exports=d},"./components/app/createPageComponent.js":function(e,t,o){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),r=o("./components/vendor/react.min.js"),l=o("./components/common/uiWidgets/ProvideContext.js");e.exports=function(e){var t=e.view,o=e.fetchData,c=e.rerenderOnMount,p=function(e){function p(e){i(this,p);var t=s(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,e));return t.state={fetchedData:t.props.data},t}return n(p,e),a(p,[{key:"componentDidMount",value:function(){var e=this;this.state.fetchedData||o(l.buildContext()).then(function(t){c&&c(t)||e.setState({fetchedData:t})}).catch(function(t){return e.setState({fetchedData:{error:t}})})}},{key:"render",value:function(){var e=this.state.fetchedData;return e?r.createElement(t,{data:e}):r.createElement("span",null)}}]),p}(r.Component);return p.displayName=(t.displayName||t.name)+"-PageComponent",p.fetchData=o,p}},"./components/common/uiWidgets/ProvideContext.js":function(e,t,o){"use strict";var i=o("./components/vendor/react.min.js"),s=i.PropTypes,n=o("./components/common/platform.js"),a=n.buildPlatform,r=o("./components/common/RequestContext.js"),l=o("./components/common/util.js"),c={requestContext:s.instanceOf(r).isRequired,platform:s.object.isRequired},p=i.createClass({displayName:"ProvideContext",propTypes:l.extend({children:s.element.isRequired,context:s.shape(c)},null),childContextTypes:c,getChildContext:function(){if(!this._childContext){var e=this.props,t=e.req,o=e.res,i=e.context;this._childContext=i||p.buildContext(t,o)}return this._childContext},render:function(){return this.props.children}});p.buildContext=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=new r(e,t);
return{requestContext:o,platform:a(o.userAgent,o.hostname)}},e.exports=p},"./components/common/RequestContext.js":function(e,t,o){(function(t){"use strict";function i(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),a=null,r=(o("./configs/app/constant.js"),o("./components/common/url.js")),l=o("./components/common/util.js"),c=o("./components/common/user.js");a=function(){function e(){s(this,e)}return n(e,[{key:"fetchAccessToken",value:function(){return t.resolve(c.getAccessToken())}},{key:"setCookie",value:function(e,t,o){var s;l.setCookie((s={},i(s,e,t),i(s,"msec",o),s))}},{key:"pathname",get:function(){return location.pathname}},{key:"queries",get:function(){return r.pageParseQuery()}},{key:"userAgent",get:function(){return navigator.userAgent}},{key:"hostname",get:function(){return location.hostname}},{key:"cookies",get:function(){var e=l.getCookies();for(var t in e)e[t]instanceof Array&&(e[t]=e[t][0]);return e}}]),e}(),e.exports=a}).call(t,o("./node_modules/imports-loader/index.js?this=>global!./node_modules/exports-loader/index.js?global.Promise!./node_modules/es6-promise/dist/es6-promise.js"))},"./components/widgets/ErrorPage.js":function(e,t,o){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),r=o("./components/vendor/react.min.js"),l=r.PropTypes,c=function(e){function t(){return i(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return n(t,e),a(t,[{key:"componentDidMount",value:function(){var e=this.props;e.alterText&&alert(e.alterText),e.isBack?history.back():e.redirectUrl&&(location.href=e.redirectUrl)}},{key:"render",value:function(){return r.createElement("span",null)}}]),t}(r.Component);c.propTypes={alertText:l.string,isBack:l.bool,redirectUrl:l.string},e.exports=c},"./components/common/uiWidgets/tabbar/footer.js":function(e,t,o){"use strict";function i(e,t){e&&l.logger.trackingRecord(e,t)}function s(e,t){m.isEmbeddedBrowser()||h.hasAccessToken||!t?u.reset(e):h.login(null,null,null,null,e,!0)}var n=o("./components/vendor/react.min.js"),a=o("./components/common/uiWidgets/tabbar/index.js"),r=o("./components/common/uiWidgets/redPoint/index.js"),l="undefined"!=typeof window?o("./components/common/index.js"):{},c=o("./components/common/uiWidgets/tabbar/config.js"),p=c.NavClass,d=c.TabbarKey,u=l.navigation,h=l.user,m=l.platform,g="undefined"!=typeof window?o("./components/common/pinbridge.js"):{},f=n.createClass({displayName:"Footer",getInitialState:function(){return{tabbarItemClass:{},sequence:[]}},getDefaultProps:function(){return{data:null}},componentWillMount:function(){var e=this.props.data;if(e){var t=a.getFooterActiveByPage(e.page,e.referrer);if(t){var o={};o[t]=p.ACTIVE,this.setState({tabbarItemClass:o})}this.setState({sequence:e.enableFriendSys?c.makeUpTabbarB():c.makeUpTabbarA()})}},componentDidMount:function(){var e=this;!function(){var t=a.getFooterActive();if(0!=t.length){"oversea"===t&&a.overseaVisited();var o="LastViewOverseaDay";if(m.isNativeTabBarVersion?g.callNative("AMStorage","get",{key:o},function(e){var t=e.value;a.setBadgeVisible("oversea",!t)}):r.updatePoint(r.Keys.haitao),!m.isNativeIndexVersion)if(e.props.data.enableFriendSys){var i=localStorage.getItem("tabbarUnreadNum")||0;i=parseInt(i,10),i>0?a.setupUnreadMsg({unreadNum:i}):a.setupUnreadMsg()}else{var s=JSON.parse(localStorage.getItem("LastPersonalMsg"))||{},n=parseInt(s.key||0,10);n>0?a.setBadgeVisible("personal",!0):a.setBadgeVisible("personal",!1)}}}()},render:function(){var e=this,t=this.state.sequence,o=t.map(function(t,o){var i="fb "+t.textClass,s=e.state.tabbarItemClass[t.key]||p.DEFAULT;return t.key===d.CHAT?n.createElement("li",{key:o},n.createElement("a",{id:t.nodeID,className:s,onClick:function(){e.doTabbarNavigate(t)}},n.createElement("div",{className:"chat-popup"}),n.createElement("i",{className:i},n.createElement("div",{className:"unread-sign"})),t.name)):n.createElement("li",{key:o},n.createElement("a",{id:t.nodeID,className:s,onClick:function(){e.doTabbarNavigate(t)}},n.createElement("i",{className:i}),t.name))});return n.createElement("ul",{className:"footer"},o)},doTabbarNavigate:function(e){return event&&(event.preventDefault(),event.stopPropagation()),e||(location.href="index.html"),event.target.classList.contains("chat-popup")?void i(e.bubbleTracking,function(){s(e.page,e.requireLogin)}):void i(e.tracking,function(){s(e.page,e.requireLogin)})}});e.exports=f},"./components/common/uiWidgets/tabbar/config.js":function(e,t,o){"use strict";function i(e,t){return t=t||{},(e||[]).map(function(e,t){return r[e]})}var s=o("./constants/tracking/tabbar.js"),n=s.TabList,a={HOME:"home",RANK:"new_arrivals",CLASSIFICATION:"classification",CHAT:"chat_list",PERSONAL:"personal",OVERSEA:"haitao"},r={};r[a.HOME]={nodeID:"footer_home",textClass:"fb-home",page:"index.html",name:"首页",key:a.HOME,tracking:n.HomeClickParams},r[a.RANK]={nodeID:"footer_rank",textClass:"fb-rank",page:"new_arrivals.html",name:"新品",key:a.RANK,tracking:n.RankClickParams},r[a.OVERSEA]={nodeID:"footer_oversea",textClass:"fb-oversea",page:"haitao.html",name:"海淘",key:a.OVERSEA,tracking:n.OverseaClickParams},r[a.CLASSIFICATION]={nodeID:"footer_class",textClass:"fb-class",page:"classification.html",name:"搜索",key:a.CLASSIFICATION,tracking:n.ClassClickParams},r[a.CHAT]={nodeID:"footer_chat",textClass:"fb-chat",page:"chat_list.html",name:"聊天",key:a.CHAT,tracking:n.ChatClickParams,bubbleTracking:s.FriendRec.ClickParams},r[a.PERSONAL]={nodeID:"footer_personal",textClass:"fb-user",page:"personal.html",name:"个人中心",key:a.PERSONAL,tracking:n.PersonalClickParams};var l=[a.HOME,a.RANK,a.OVERSEA,a.CLASSIFICATION,a.PERSONAL],c=[a.HOME,a.RANK,a.CLASSIFICATION,a.CHAT,a.PERSONAL],p={DEFAULT:"nav-controller",ACTIVE:"nav-controller active"};e.exports={TabbarKey:a,makeUpTabbarA:function(){return i(l)},makeUpTabbarB:function(){return i(c)},NavClass:p}},"./models/GoodsList.js":function(e,t,o){"use strict";function i(e){s.call(this,e),this.name="goodsList",this.page=e.page||1,this.size=e.size||50,this.defaultSize=50,this.accessToken=e.accessToken||"",this.showLottery=e.showLottery,this.showFreeTrial=e.showFreeTrial,this.showPromotionSlip=e.showPromotionSlip,this.withLocalGroups=e.withLocalGroups}var s=o("./models/BaseModel.js"),n=o("./node_modules/webpack/node_modules/node-libs-browser/node_modules/util/util.js"),a=o("./models/DataFormat/portal.js"),r=o("./manager/index.js").goods.getInstance();n.inherits(i,s),i.prototype.dealParams=function(){s.prototype.dealParams.call(this),this.params.page=this.page,this.params.size=this.size,this.size<this.defaultSize&&(this.params.size=this.defaultSize),1===this.page&&(this.params.list_update_time="true")},i.prototype.dealHeaders=function(){s.prototype.dealHeaders.call(this),this.headers.AccessToken=this.accessToken},i.prototype.process=function(e){var t={},o=this.processGoodsData(e),i=this.processSubjectGoodsList(e),s=this.processPromotionSlip(e);return t.redPointData=e.list_update_time,t.list=a.unionList(o,i),t.pSlip=this.showPromotionSlip?s.slice(0,3):[],t.favoriteUpdateTime=parseInt(e.favorite_update_time,10)||0,t.mobile_app_groups=e.mobile_app_groups||[],t},i.prototype.processGoodsData=function(e){var t=a.goodsList(e.goods_list,{webpEnable:this.webpEnable,showLottery:this.showLottery,showFreeTrial:this.showFreeTrial,withLocalGroups:this.withLocalGroups,listItemName:this.withLocalGroups?"portalListItem":""}),o=[];return t.forEach(function(e){r.updateGoodsInfo(e.data),o.push({data:r.getGoodsDataByID(e.data.goodsID),props:e.props})}),o},i.prototype.processSubjectGoodsList=function(e){return a.subjectGoodsList(e,{webpEnable:this.webpEnable})},i.prototype.processPromotionSlip=function(e){var t=[];if(!e.promotion_slip)return t;var o=this.webpEnable;return e.promotion_slip.forEach(function(e){var i=a.promotionSlipItem(e,{webpEnable:o});t.push({goodsID:i.goodsID,goodsData:i})}),t},e.exports=i},"./models/CategoryGoodsList.js":function(e,t,o){"use strict";function i(e){s.call(this,e),this.name=e.name||"categoryGoodsList",this.page=e.page||1,this.size=e.size||100,this.defaultSize=100,this.accessToken=e.accessToken||"",this.optId=e.optId||0,this.optType=e.optType||0,this.withLocalGroups=e.withLocalGroups}var s=o("./models/BaseModel.js"),n=o("./node_modules/webpack/node_modules/node-libs-browser/node_modules/util/util.js"),a=o("./models/util.js"),r=o("./node_modules/webpack/node_modules/node-libs-browser/node_modules/path-browserify/index.js"),l=o("./constants/tracking/portal.js"),c=o("./models/DataFormat/catgoods.js"),p=o("./manager/index.js").goods.getInstance();n.inherits(i,s),i.prototype.dealParams=function(){s.prototype.dealParams.call(this),this.params.opt_type=this.optType,this.params.size=this.size,this.params.offset=this.offset,this.size<this.defaultSize&&(this.params.size=this.defaultSize)},i.prototype.dealHeaders=function(){s.prototype.dealHeaders.call(this),this.headers.AccessToken=this.accessToken},i.prototype.dealPath=function(){s.prototype.dealPath.call(this),this.path=r.join(this.path,this.optId+"","groups")},i.prototype.process=function(e){var t=[],o=this.webpEnable,i=this.withLocalGroups;if(e.goods_list.length>0)for(var s=0;s<e.goods_list.length;s++){var n=e.goods_list[s],r=s+1,d=a.extend(l.CategoryGoodsClick,{idx:r,opt_id:this.optId}),u=c.listItem(n,{clickTrackingParams:d,referPageName:"index",withLocalGroups:i,doImpr:!0,imprParams:a.extend(l.CategoryGoodsImpr,{sort_type:"PRIORITY",opt_type:1,opt_id:this.optId,idx:r}),webpEnable:o});u&&(p.updateGoodsInfo(u.data),t.push({data:p.getGoodsDataByID(u.data.goodsID),props:u.props}))}return{list:t}},e.exports=i},"./node_modules/webpack/node_modules/node-libs-browser/node_modules/path-browserify/index.js":function(e,t,o){(function(e){function o(e,t){for(var o=0,i=e.length-1;i>=0;i--){var s=e[i];"."===s?e.splice(i,1):".."===s?(e.splice(i,1),o++):o&&(e.splice(i,1),o--)}if(t)for(;o--;o)e.unshift("..");return e}function i(e,t){if(e.filter)return e.filter(t);for(var o=[],i=0;i<e.length;i++)t(e[i],i,e)&&o.push(e[i]);return o}var s=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,n=function(e){return s.exec(e).slice(1)};t.resolve=function(){for(var t="",s=!1,n=arguments.length-1;n>=-1&&!s;n--){var a=n>=0?arguments[n]:e.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(t=a+"/"+t,s="/"===a.charAt(0))}return t=o(i(t.split("/"),function(e){return!!e}),!s).join("/"),(s?"/":"")+t||"."},t.normalize=function(e){var s=t.isAbsolute(e),n="/"===a(e,-1);return e=o(i(e.split("/"),function(e){return!!e}),!s).join("/"),e||s||(e="."),e&&n&&(e+="/"),(s?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(i(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},t.relative=function(e,o){function i(e){for(var t=0;t<e.length&&""===e[t];t++);for(var o=e.length-1;o>=0&&""===e[o];o--);return t>o?[]:e.slice(t,o-t+1)}e=t.resolve(e).substr(1),o=t.resolve(o).substr(1);for(var s=i(e.split("/")),n=i(o.split("/")),a=Math.min(s.length,n.length),r=a,l=0;l<a;l++)if(s[l]!==n[l]){r=l;break}for(var c=[],l=r;l<s.length;l++)c.push("..");return c=c.concat(n.slice(r)),c.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){var t=n(e),o=t[0],i=t[1];return o||i?(i&&(i=i.substr(0,i.length-1)),o+i):"."},t.basename=function(e,t){var o=n(e)[2];return t&&o.substr(-1*t.length)===t&&(o=o.substr(0,o.length-t.length)),o},t.extname=function(e){return n(e)[3]};var a="b"==="ab".substr(-1)?function(e,t,o){return e.substr(t,o)}:function(e,t,o){return t<0&&(t=e.length+t),e.substr(t,o)}}).call(t,o("./node_modules/webpack/node_modules/node-libs-browser/node_modules/process/browser.js"))},"./models/CategoryGoodsListV3.js":function(e,t,o){"use strict";function i(e){s.call(this,e),this.name="categoryGoodsListV2",this.page=e.page||1,this.size=e.size||100,this.offset=e.offset||0,this.defaultSize=100,this.accessToken=e.accessToken||"",this.optId=e.optId||0,this.optType=e.optType||0,this.withLocalGroups=e.withLocalGroups,this.sortType=e.sortType}var s=o("./models/BaseModel.js"),n=o("./node_modules/webpack/node_modules/node-libs-browser/node_modules/util/util.js"),a=o("./models/util.js"),r=o("./node_modules/webpack/node_modules/node-libs-browser/node_modules/path-browserify/index.js"),l=o("./constants/tracking/portal.js"),c=o("./configs/index.js").app,p=o("./models/DataFormat/catgoods.js"),d=o("./manager/index.js").goods.getInstance();n.inherits(i,s),i.prototype.dealParams=function(){s.prototype.dealParams.call(this),this.params.opt_type=this.optType,this.params.size=this.size,this.params.offset=this.offset,this.size<this.defaultSize&&(this.params.size=this.defaultSize),this.params.sort_type=this.sortType},i.prototype.dealHeaders=function(){s.prototype.dealHeaders.call(this),this.headers.AccessToken=this.accessToken},i.prototype.dealPath=function(){s.prototype.dealPath.call(this);var e=c.get(this.req.hostname);this.apiHost=e.apiDomainV3,this.path=r.join(this.path,this.optId+"","groups")},i.prototype.process=function(e){var t=[],o=this.webpEnable,i=this.withLocalGroups;if(e.goods_list.length>0)for(var s=0;s<e.goods_list.length;s++){var n=e.goods_list[s],r=a.extend(l.CategoryGoodsClick,{idx:s+1,opt_id:this.optId,sort_type:this.sortType}),c=p.listItem(n,{clickTrackingParams:r,referPageName:"index",withLocalGroups:i,webpEnable:o});c&&(d.updateGoodsInfo(c.data),t.push({data:d.getGoodsDataByID(c.data.goodsID),props:c.props}))}return{list:t}},e.exports=i},"./models/GoodsListV3.js":function(e,t,o){"use strict";function i(e){s.call(this,e),this.name=l.isTester(this.userID,this.host)?"goodsListV4":"goodsListV3",this.page=e.page||1,this.size=e.size||50,this.defaultSize=50,this.accessToken=e.accessToken||"",this.showLottery=e.showLottery,this.showFreeTrial=e.showFreeTrial,this.listID=e.listID||"",this.withLocalGroups=e.withLocalGroups}var s=o("./models/BaseModel.js"),n=o("./node_modules/webpack/node_modules/node-libs-browser/node_modules/util/util.js"),a=o("./models/DataFormat/portal.js"),r=o("./manager/index.js").goods.getInstance(),l=o("./abtest/portalGoodsList.js");n.inherits(i,s),i.prototype.dealParams=function(){s.prototype.dealParams.call(this),this.params.page=this.page,this.params.size=this.size,this.size<this.defaultSize&&(this.params.size=this.defaultSize),1===this.page&&(this.params.list_update_time="true"),this.listID&&(this.params.list_id=this.listID)},i.prototype.dealHeaders=function(){s.prototype.dealHeaders.call(this),this.headers.AccessToken=this.accessToken},i.prototype.process=function(e){var t=a.goodsList(e.goods_list,{webpEnable:this.webpEnable,showLottery:this.showLottery,showFreeTrial:this.showFreeTrial,withLocalGroups:this.withLocalGroups,listItemName:this.withLocalGroups?"portalListItem":"",listID:this.listID}),o=[];return t.forEach(function(e){r.updateGoodsInfo(e.data),o.push({data:r.getGoodsDataByID(e.data.goodsID),props:e.props})}),{goodsList:o,listUpdateTime:e.list_update_time,favoriteUpdateTime:parseInt(e.favorite_update_time,10)||0}},e.exports=i},"./models/HomeSubject.js":function(e,t,o){"use strict";function i(e){s.call(this,e),this.name="homeShow",this.accessToken=e.accessToken||"",this.showPromotionSlip=e.showPromotionSlip}var s=o("./models/BaseModel.js"),n=o("./node_modules/webpack/node_modules/node-libs-browser/node_modules/util/util.js"),a=o("./models/DataFormat/portal.js");o("./manager/index.js").goods.getInstance();n.inherits(i,s),i.prototype.dealHeaders=function(){s.prototype.dealHeaders.call(this),this.headers.AccessToken=this.accessToken},i.prototype.process=function(e){var t=this.processPromotionSlip(e);return{list:a.subjectGoodsList(e,{webpEnable:this.webpEnable}),pSlip:this.showPromotionSlip?t.slice(0,3):[],mobile_app_groups:e.mobile_app_groups}},i.prototype.processPromotionSlip=function(e){var t=[];if(!e.promotion_slip)return t;var o=this.webpEnable;return e.promotion_slip.forEach(function(e){var i=a.promotionSlipItem(e,{webpEnable:o});t.push({goodsID:i.goodsID,goodsData:i})}),t},e.exports=i},"./models/QQSubjectGoodsList.js":function(e,t,o){"use strict";function i(e){s.call(this,e),this.name="qqSubjectGoodsList",this.qqSubjectID=832,this.isQQPlatform=l.isQQPlatform(this.ua),this.page=e.page||1,this.size=e.size||50,this.defaultSize=50,this.accessToken=e.accessToken||"",this.showLottery=e.showLottery,this.showFreeTrial=e.showFreeTrial,this.withLocalGroups=e.withLocalGroups}var s=o("./models/BaseModel.js"),n=o("./node_modules/webpack/node_modules/node-libs-browser/node_modules/util/util.js"),a=o("./models/util.js"),r=o("./models/DataFormat/portal.js"),l=o("./lib/platform.js"),c=o("./node_modules/promise/index.js"),p=o("./manager/index.js").goods.getInstance();n.inherits(i,s),i.prototype.dealPath=function(){s.prototype.dealPath.call(this),this.path=a.format(this.path,this.qqSubjectID+"")},i.prototype.dealParams=function(){s.prototype.dealParams.call(this),this.params.page=this.page,this.params.size=this.size,this.size<this.defaultSize&&(this.params.size=this.defaultSize)},i.prototype.dealHeaders=function(){s.prototype.dealHeaders.call(this),this.headers.AccessToken=this.accessToken},i.prototype.process=function(e){var t=r.goodsList(e.goods_list,{webpEnable:this.webpEnable,showLottery:this.showLottery,showFreeTrial:this.showFreeTrial,withLocalGroups:this.withLocalGroups,listItemName:this.withLocalGroups?"portalListItem":""}),o=[];return t.forEach(function(e){p.updateGoodsInfo(e.data),o.push({data:p.getGoodsDataByID(e.data.goodsID),props:e.props})}),{goodsList:o}},i.prototype.get=function(){if(this.isQQPlatform)return this.requestData("get");var e=this,t=new c(function(t,o){var i={goods_list:[]},s=e.process(i);t(s)});return t},e.exports=i},"./lib/platform.js":function(e,t,o){"use strict";var i=o("./configs/index.js").app.constant,s=i.Platform;e.exports={getPlatform:function(e){return/micromessenger/i.test(e)?s.WeChat:/phh_ios_version/i.test(e)?s.IOS:/phh_android_version/i.test(e)?s.Android:/weibo/i.test(e)?s.Weibo:/qq/i.test(e)||/qzone/.test(e)?s.QQ:s.Unknown},isWeChatPlatform:function(e){return this.getPlatform(e)===s.WeChat},isWeiboPlatform:function(e){return this.getPlatform(e)===s.Weibo},isQQPlatform:function(e){return this.getPlatform(e)===s.QQ},isNativePlatform:function(e){var t=this.getPlatform(e);return t===s.Android||t===s.IOS},isEmbeddedBrowser:function(e){return this.isWeChatPlatform(e)||this.isWeiboPlatform(e)||this.isQQPlatform(e)},isIOS:function(e){return e=e.toLowerCase(),/iphone|ipad|ipod/.test(e)}}},"./models/UserAB.js":function(e,t,o){(function(t){"use strict";function i(e){s.call(this,e),this.name="userAB",this.accessToken=e.accessToken||"",this.res=e.res}var s=o("./models/BaseModel.js"),n=o("./node_modules/webpack/node_modules/node-libs-browser/node_modules/util/util.js"),a=o("./configs/index.js").app.constant;n.inherits(i,s),i.prototype.dealHeaders=function(){s.prototype.dealHeaders.call(this),this.headers.AccessToken=this.accessToken},i.prototype.process=function(e){this.grade=e.egrp||2;var t=new Date;t.setTime(t.getTime()+6e5);var o=t.toGMTString(),i=[];return[[a.CookieKey.UserGrade,this.grade]].forEach(function(e){var t=e[0],s="";s=e[1]===!0?"1":e[1]===!1?"0":e[1],s&&i.push([[t,s].join("="),"path=/","expires="+o].join("; "))}),i.length&&this.res&&this.res.setHeader("Set-Cookie",i),{grade:this.grade}},i.prototype.getGrade=function(){var e=this;e.dealCookies();var o=new t(function(t,o){return null!=e.grade?void t():void e.get().then(t,function(){e.grade=2})});return o},e.exports=i}).call(t,o("./node_modules/imports-loader/index.js?this=>global!./node_modules/exports-loader/index.js?global.Promise!./node_modules/es6-promise/dist/es6-promise.js"))},"./models/PortalOperations.js":function(e,t,o){"use strict";function i(e){s.call(this,e),this.name="portalOperations",this.accessToken=e.accessToken||""}var s=o("./models/BaseModel.js"),n=o("./node_modules/webpack/node_modules/node-libs-browser/node_modules/util/util.js"),a=o("./models/DataFormat/classification.js");n.inherits(i,s),i.prototype.dealParams=function(){s.prototype.dealParams.call(this)},i.prototype.dealHeaders=function(){s.prototype.dealHeaders.call(this),this.headers.AccessToken=this.accessToken},i.prototype.process=function(e){var t=a;t.init(e,{skipRoot:!0,limitChildrenNum:7,webpEnable:this.webpEnable});var o=[{key:"detail",optID:0,optType:1,tabName:"首页",priority:-1}],o=o.concat(t.detailData);return o},e.exports=i},"./models/DataFormat/classification.js":function(e,t,o){"use strict";function i(e){return(e||"").slice(0,5)}var s=o("./models/util.js"),n=o("./constants/classification.js"),a={14:"icon-category-bag",15:"icon-category-furniture",4:"icon-category-baby",1:"icon-category-food",18:"icon-category-appliances",12:"icon-category-overseas",818:"icon-category-home",13:"icon-category-fruit",16:"icon-category-cosmetics",590:"icon-category-recharge",743:"icon-category-man",744:"icon-category-hot",1281:"icon-category-shoes",1282:"icon-category-underwear",0:"icon-me-heart"};e.exports={rootData:[],detailData:[],init:function(e,t){t=t||{};var o=this;s.isArray(e)&&e.forEach(function(e,r){var l=e.opt_id;if(l){var c=i(e.opt_name),p=l;n.BaseRoots.indexOf(p)<0&&(p=0);var d=a[p];!t.skipRoot&&o.rootData.push({key:["root",r].join("-"),optID:l,optType:1,optName:c,priority:parseInt(e.priority,10),isHightlight:1===parseInt(e.is_highlight,10),selectedImg:e.selected_url||"",unselectedImg:e.unselected_url||"",iconClass:d,listItemName:"ClassificationRootItem"});var u=e.children;if(!s.isArray(u))return;o.detailData[r]={key:["detail",r].join("-"),optID:l,optType:1,tabName:c,cat:[],priority:parseInt(e.priority,10),listItemName:"ClassificationDetailItem"};var h=[];u.forEach(function(e){if(e.opt_id&&e.opt_name&&e.image_url){var o=e.opt_id;h.push({key:["child",o].join("-"),optID:o,optType:2,optName:i(e.opt_name),priority:parseInt(e.priority,10),isHightlight:1===parseInt(e.is_highlight,10),imgUrl:s.cdnCompress(e.image_url,n.DetailCompressPipe,t.webpEnable)})}}),t.sort&&o.detailData[r].cat.sort(function(e,t){return t.priority-e.priority});var m=t.limitChildrenNum||0;m&&(h=h.slice(0,parseInt(m,10))),o.detailData[r].cat=h}})},getRootData:function(){return this.rootData},getDetailData:function(){return this.detailData}}},"./constants/classification.js":function(e,t){"use strict";e.exports={Lang:{GetDataFail:"获取数据失败，点击确定重新刷新页面"},RootCompressPipe:"50Q",DetailCompressPipe:"50Q",BaseRoots:[1,4,12,13,14,15,16,18,590,743,744,818,1281,1282],RootMaskHeight:0,DetailMaskHeight:0,TopNum:20,baseNum:20,ChangeRootRate:.4,DetailScrollDuration:800,RootScrollDuration:200}},"./models/PortalRecommendEntrance.js":function(e,t,o){"use strict";function i(e){s.call(this,e),this.name="portalRecommendEntrance"}var s=o("./models/BaseModel.js"),n=o("./node_modules/webpack/node_modules/node-libs-browser/node_modules/util/util.js");o("./models/util.js");n.inherits(i,s),i.prototype.dealParams=function(){s.prototype.dealParams.call(this)},i.prototype.dealHeaders=function(){s.prototype.dealHeaders.call(this),this.headers.AccessToken=this.accessToken},i.prototype.process=function(e){e=e||{};var t=e.list||[];return this.processEntrances(t)},i.prototype.processEntrances=function(e){return e=e||[],e.map(function(e,t){return{imageURL:e.image_url||"",title:e.name||"",subTitle:e.desc||"",forwardURL:e.url||""}})},e.exports=i},"./components/widgets/CategoryBoard/index.js":function(e,t,o){"use strict";var i=o("./components/vendor/react.min.js"),s="undefined"!=typeof window;s&&o("./static/src/assets/scss/module/_category_board.scss");var n=s?o("./components/common/index.js"):{},a=o("./constants/ui/base64/portal/categoryMore.js"),r=o("./constants/category_sort.js").DefaultSortType,l=i.createClass({displayName:"CategoryBoard",getDefaultProps:function(){return{operations:[],selectedId:0,show:!1,extraTrackingParams:null}},cachedNodes:[],componentWillMount:function(){var e=this,t=e.props.operations.length;if(e.map={},t>0)for(var o=0;o<t;o++){var i=e.props.operations[o].optID||0;e.map[i]=o}},shouldComponentUpdate:function(e,t){return e.selectedId!==this.props.selectedId},render:function(){var e=this,t=e.props.selectedId||0,o=e.cachedNodes[t]||[];if(o.length<=0&&0!==t){var s=e.getCategory(),n=s.cat.concat()||[],r={key:"for-more-icon-"+t,optID:s.optID,optName:s.optName||s.tabName,showName:"查看全部",imgUrl:a,optType:s.optType};n.push(r),o=n.map(function(e,t){var o=t>3?"catboard-second-row":"",s=t===n.length-1,a=s?"catboard-item-img item-icon-padding":"catboard-item-img",r=s?"item-icon-resize":"";return i.createElement("li",{key:e.key,className:o,"data-index":t},i.createElement("div",{className:"catboard-item-box"},i.createElement("div",{className:a},i.createElement("img",{src:e.imgUrl,className:r})),i.createElement("div",{className:"catboard-item-name"},i.createElement("span",null,e.showName||e.optName))))}),e.cachedNodes[t]=o}return i.createElement("div",{className:"catboard-container",style:{display:e.props.show?"block":"none"}},i.createElement("ul",{className:"catboard-wrapper",onClick:e.onCategoryBoardClick},o))},onCategoryBoardClick:function(e){if(n.navigation.replaceQuery({lastSortType:r}),e){e.stopPropagation(),e.preventDefault();for(var t=e.target,o=e.currentTarget;t.parentNode!==o;)if(t=t.parentNode,t===document.body)return;var i=parseInt(t.dataset.index,10);this.forward(i)}},getCategory:function(){var e=this,t=e.props.selectedId;if(!t)return[];var o=e.map[t]||0;return e.props.operations[o]||{}},forward:function(e){var t,o=this,i=o.getCategory()||{},s=(i.cat||[])[e]||null;t=s?{opt_id:s.optID,opt_name:s.optName,opt_type:s.optType,refer_page_name:"index"}:{opt_id:i.optID,opt_name:i.tabName,opt_type:i.optType,refer_page_name:"index"},n.page.setPageScrollPosition({},function(){if(o.props.extraTrackingParams){var a=o.props.extraTrackingParams;a.section_id=i.optID,a.element_id=(s||{}).optID||0,a.idx=e,n.logger.trackingRecord(a,function(){n.navigation.forward("catgoods.html?"+n.url.buildQuery(t))})}else n.navigation.forward("catgoods.html?"+n.url.buildQuery(t))})}});e.exports=l},"./static/src/assets/scss/module/_category_board.scss":function(e,t){},"./constants/ui/base64/portal/categoryMore.js":function(e,t){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsBAMAAADsqkcyAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAhUExURQAAAODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4P7+/u/v73koT0EAAAAIdFJOUwBO8rKJ1CMLoiR1VwAAANtJREFUKM91kz0OwjAMhYNAsFaIgRUxkBEhIXWErTtLR46AuAFpKxlOQHoCekvitI2a1u8NkfUl8k9sK9VqtTlrc7s+VKTZibz2SURz6lQN+DKloOIe8JoG2vV0QZEuHc5iXIqP++fbMX75NPQYG05mThMdJR+tl3yKK1c3CUok1+z8KeGDFJFjZhIuVSrhQsqPM+TSP/bnzqYOplF82diaARNvOqwlTDI2PuTbft1pbTArlCAoBxQPvgp8LGgDaBpqMRgIMD5g2NBogkFGYw+WBK0UWEC0rpPl/gMSMZBtc0a6EQAAAABJRU5ErkJggg=="},"./components/widgets/GoodsSortBar/index.js":function(e,t,o){"use strict";var i=o("./components/vendor/react.min.js");"undefined"!=typeof window&&o("./components/widgets/GoodsSortBar/style.scss");var s="undefined"!=typeof window?o("./components/common/index.js"):{},n=i.createClass({displayName:"GoodsSortBar",getInitialState:function(){return{showSort:!1}},getDefaultProps:function(){return{sortTypes:[],isShowed:!0,currentSortType:0,currentSortName:"",onSortItemSelected:function(e){}}},switchSortType:function(e){this.setState({showSort:!1}),this.props.currentSortType!==e&&s.util.call(this.props.onSortItemSelected,e)},switchSortHint:function(){var e=this.state.showSort;this.setState({showSort:!e})},render:function(){var e=this,t=e.props.sortTypes,o=[];return o=t.map(function(t,o){return i.createElement("div",{key:o,className:o===e.props.currentSortType?"sort-hint-item current-sort":"sort-hint-item",onClick:function(){e.switchSortType(o)}},t.name)}),i.createElement("div",{className:"goods-sort-bar",style:{display:this.props.isShowed?"block":"none"}},i.createElement("div",{className:"all-goods"},"全部商品"),i.createElement("div",{className:"sort-rule",onClick:this.switchSortHint},i.createElement("p",null,this.props.currentSortName),i.createElement("div",{className:this.state.showSort?"goods-sort-arrow goods-sort-arrow-1 std-goods-imgage-arrow":"goods-sort-arrow std-goods-imgage-arrow"})),i.createElement("div",{className:this.state.showSort?"goods-sort-bar-wrapper sort-hint-show":"goods-sort-bar-wrapper"},i.createElement("div",{className:"goods-sort-hints"},o),i.createElement("s",null)))}});e.exports=n},"./components/widgets/GoodsSortBar/style.scss":function(e,t){},"./components/widgets/UnpayedAlarm/index.js":function(e,t,o){"use strict";var i,s=o("./components/vendor/react.min.js"),n="undefined"!=typeof window?o("./components/common/index.js"):{},a=o("./configs/app/constant.js"),r=o("./manager/index.js").popup.getInstance(),l=o("./constants/tracking/unpayed_alarm.js").IndexPopup,c=r.Constant.TaskName.UnpayedAlarm,p=a.LocalStorageKey.UnpayedAlarm,d=o("./abtest/indexUnpayedAlarm.js"),u=s.createClass({displayName:"UnpayedAlarm",getInitialState:function(){return{style:{display:"none"},imgUrl:"",title:"",desc:["未支付订单将在不久后自动关闭","请尽快支付~"],confirm:"继续支付",cancel:"知道了"}},componentWillMount:function(){var e=function(){r.remove(c)},t=n.user.userID;if(!d.isTester(t))return void e();var o=new Date,s=[o.getMonth()+1,o.getDate()].join("-");i=[s,n.user.userID].join("_");var a=(localStorage.getItem(p)||"").split("|"),l="1"===a[1];if(a[0]===i||!t)return e(),void(l&&n.util.isFunc(this.props.setRedPoint)&&this.props.setRedPoint());var u=this;n.request.apiRequest("GET","ordersv2/unpaid?page=1&size=1",null,function(t){if(!t.orders||t.orders.length<=0)return void e();var o=t.orders[0].order_goods[0]||{};r.produce(c,{show:function(){u.setState({style:{display:""},imgUrl:o.thumb_url,title:o.goods_name,goodsID:o.goods_id}),i&&localStorage.setItem(p,[i,"0"].join("|"))}})},e,!1,!1,!0)},clickCancel:function(){r.completeByName(c),this.setState({style:{display:"none"}}),n.util.isFunc(this.props.setRedPoint)&&(i&&localStorage.setItem(p,[i,"1"].join("|")),this.props.setRedPoint());var e=n.util.extend(l.Cancel,{goods_id:this.state.goodsID});n.logger.trackingRecord(e)},clickConfirm:function(){var e=n.util.extend(l.Confirm,{goods_id:this.state.goodsID});n.logger.trackingRecord(e,function(){n.navigation.ordersPage("forward",{type:1,refer_page_name:"index",refer_page_section:"popup",refer_page_element:"pay_btn"})})},render:function(){var e=[];return this.state.desc.forEach(function(t,o){e.push(s.createElement("p",{className:"desc",key:o},t))}),s.createElement("div",{style:this.state.style},s.createElement("div",{className:"bg-fill"},s.createElement("div",{id:"unpayed-alarm"},s.createElement("img",{src:this.state.imgUrl}),s.createElement("p",{className:"title"},this.state.title),e,s.createElement("div",{className:"default-buttons"},s.createElement("div",{className:"cancel-button",onClick:this.clickCancel},s.createElement("span",null,this.state.cancel)),s.createElement("div",{className:"confirm-button",onClick:this.clickConfirm
},s.createElement("span",null,this.state.confirm))))))}});e.exports=u},"./constants/tracking/unpayed_alarm.js":function(e,t){"use strict";e.exports={IndexPopup:{Cancel:{op:"click",event:"knowed_btn_click",page_name:"index",page_section:"popup",page_element:"knowed_btn",goods_id:null},Confirm:{op:"click",event:"pay_btn_click",page_name:"index",page_section:"popup",page_element:"pay_btn",goods_id:null}},OrderCheckoutPopup:{BeforeOrderConfirm:{op:"click",event:"popup_btn_click",page_name:"order_checkout",page_section:"unpaid_popup",page_element:"seeing_btn",goods_id:null},BeforeOrderCancel:{op:"click",event:"popup_btn_click",page_name:"order_checkout",page_section:"unpaid_popup",page_element:"give_up_btn",goods_id:null},AfterOrderConfirm:{op:"click",event:"popup_btn_click",page_name:"order_checkout",page_section:"paid_popup",page_element:"paying_btn",goods_id:null},AfterOrderCancel:{op:"click",event:"popup_btn_click",page_name:"order_checkout",page_section:"paid_popup",page_element:"give_up_btn",goods_id:null}}}},"./components/widgets/PortalPromotionSlip/index.js":function(e,t,o){"use strict";var i=o("./components/vendor/react.min.js"),s="undefined"!=typeof window?o("./components/common/index.js"):{},n=o("./manager/index.js").goods.getInstance(),a=i.createClass({displayName:"PortalPromotionSlip",getInitialState:function(){return{goodsList:[],style:{display:"none"}}},getDefaultProps:function(){return{goodsList:[]}},handleGoodsClick:function(e){var t={queries:{item_index:0}},o=this.state.goodsList[e].goodsID,i=function(){var e="goods.html?goods_id="+o;s.navigation.forward(e)};s.page.setPageScrollPosition(t,function(){i()})},componentWillMount:function(){var e=[];this.props.goodsList.forEach(function(t,o){var i=t.goodsID,s=n.getGoodsDataByID(i)||t.goodsData;s&&!n.getGoodsDataByID(i)&&n.updateGoodsInfo(s),e.push({goodsID:i,thumbUrl:s.thumbUrl||s.imgUrl,tinyName:s.tinyName,price:s.price})}),this.setState({goodsList:e,style:{display:e.length?"":"none"}})},render:function(){var e=this,t=[],o=e.state.goodsList;return o.forEach(function(o,s){t.push(i.createElement("li",{className:"goods-item",onClick:function(){e.handleGoodsClick(s)},key:s},i.createElement("div",{className:"std-goods-image-square"},i.createElement("img",{src:o.thumbUrl}),i.createElement("div",{className:"tip"},o.price)),i.createElement("p",{className:"tiny-name"},o.tinyName)))}),i.createElement("ul",{className:"portal-promotion-slip",style:e.state.style},t)}});e.exports=a},"./components/widgets/SubscribeTopBanner/index.js":function(e,t,o){"use strict";"undefined"!=typeof window&&o("./static/src/assets/scss/module/_subscribe_top_banner.scss");var i=o("./components/vendor/react.min.js"),s=o("./components/vendor/react-dom.min.js"),n="undefined"!=typeof window?o("./components/common/index.js"):{},a=n.constant,r=o("./constants/strategy/subscribe_top_banner.js"),l=i.createClass({displayName:"SubscribeTopBanner",getInitialState:function(){return{show:!1,canSubscribe:!1,bannerLabel:"",bannerBtnText:"立即抢"}},getDefaultProps:function(){return{}},handleClick:function(e){var t=this,a=function(){n.navigation.forward("goods.html?"+n.url.buildQuery({goods_id:t.goodsID,src:t.src,campaign:t.campaign,cid:t.cid}))},r=function(){n.navigation.forward("download.html?"+n.url.buildQuery({src:t.src,campaign:t.campaign,cid:t.cid}))};if(e&&(e.preventDefault(),e.stopPropagation()),t.forceContact)if(t.isSubscribed){if(n.platform.isIOSWeChatPlatform()&&t.hasAppLogin&&a(),n.platform.isAndroidWeChatPlatform())return void n.page.weChatGetAPPInstallState().then(function(e){e.installed?a():r()},function(){t.hasAppLogin?a():r()}).catch(function(){});r()}else{var l=function(){n.logger.trackingRecord({op:"impr",page_name:t.props.type.page,page_section:"subscribe_popup",style:"qrcode"}),t.bannerClicked=!1;var e=o("./components/common/uiWidgets/ForceContact/index.js"),a=document.createElement("DIV");document.body.appendChild(a),s.render(i.createElement(e,{type:t.qrType}),a),setTimeout(function(){n.util.call(t.showQRCodeCallback)},0)};if(t.goodsID){if(t.bannerClicked)return void n.ui.showToast("您点击的太快了~");t.bannerClicked=!0,n.request.apiRequest("POST","subscriber/track",{src:t.cid,goods_id:t.goodsID,group_id:0,group_order_id:0},l,l)}else l()}else r()},componentWillMount:function(){},componentDidMount:function(){var e=this;this.dealWithProps();var t=function(){e.setupModel()};e.title?t():this.requestData(function(){t()})},dealWithProps:function(){var e=this.props||{},t=e.appDownloadInfo||{};this.title=t.title||"";var o=n.user.selfInfo.getInstance();this.forceContact=t.forceContact||o.getTopBannerSubscribe(),this.isSubscribed=n.user.isSubscribed(),this.goodsID=t.goodsID||t.goods_id,this.groupID=t.groupID||t.group_id,this.hasAppLogin=t.hasAppLogin||t.has_app,this.loadCallback=e.loadCallback,this.type=e.type||r.Type.Portal,this.qrType=e.qrType||this.type.qrType,this.showQRCodeCallback=e.showQRCodeCallback,this.src=e.src||this.type.src||"weixin",this.campaign=e.campaign||this.type.campaign||"gzh",this.cid=e.cid||this.type.cid||"",this.stickyDiv=e.stickyDiv,this.stickyClassChange=e.stickyClassChange},requestData:function(e){var t={},o={check_app_login:"1",check_weixin_sp:n.platform.isWeChatPlatform()&&a.ForceContactAppIDs.indexOf(n.config.AppID.WeChat)>=0?"1":null},i=n.user,s=this,r=function(){var o=t.userInfo;s.isSubscribed=o.is_subscribed,s.hasAppLogin=o.has_app;var n=i.selfInfo.getInstance(t.grade);s.forceContact=n.getTopBannerSubscribe();var a=o.app_download||{};s.title=a.title,s.goodsID=a.goods_id,s.groupID=a.group_id,e()},l=function(){t.grade&&t.userInfo&&r()};n.platform.isWeChatPlatform()?i.requestSelfInfo(o,function(e){t.userInfo=e,l()},function(){t.userInfoFailed=!0,e()}):(t.userInfoFailed=!0,e()),i.getGrade(function(e){t.grade=e,l()})},setupModel:function(){var e=this,t=n.platform.isWeChatPlatform()&&!e.isSubscribed&&e.forceContact&&a.GroupBannerV2AppID.indexOf(n.config.AppID.WeChat)>=0&&!!e.title;if(e.setState({show:t,bannerLabel:e.title||"",bannerBtnText:"立即关注"}),e.stickyDiv&&e.stickyClassChange&&t&&"undefined"!=typeof window){var o=n.platform.isIOSWeChatUIWebView();e.stickyClassChange([o?"ios-sticky":"sticky"]),o||setTimeout(function(){var t=e.stickyDiv.offsetTop,o=function(o){var i=window.scrollY>=t;i?e.stickyClassChange(["sticky","sticky-fixed"]):e.stickyClassChange(["sticky"])};o(),window.addEventListener("scroll",o)},0)}"function"==typeof e.loadCallback&&e.loadCallback(t)},render:function(){return i.createElement("div",{className:this.props.parentNodeName},i.createElement("div",{className:"subscribe-top-banner",onClick:this.handleClick,style:{display:this.state.show?"":"none"}},i.createElement("div",{className:"label-banner"},i.createElement("div",{className:"banner-icon"}),i.createElement("p",{className:"banner-label"},this.state.bannerLabel),i.createElement("p",{className:"banner-button"},this.state.bannerBtnText))))}});e.exports={Module:l,Constant:r}},"./static/src/assets/scss/module/_subscribe_top_banner.scss":function(e,t){},"./constants/strategy/subscribe_top_banner.js":function(e,t,o){"use strict";var i=o("./constants/strategy/qr_code_type.js"),s={Portal:{page:"index",qrType:i.PortalSubscribeTopBanner,cid:"home_banner"},Goods:{page:"goods",qrType:i.GoodsSubscribeTopBanner,cid:"goods_banner"},Group:{page:"group",qrType:i.GroupBanner,cid:"group_banner"},NewYear:{page:"new_year",qrType:i.NewYearSubscribeTopBanner,cid:"activity_banner"},WomensDay:{page:"womens_day",qrType:i.NewYearSubscribeTopBanner,cid:"activity_banner"},CouponShare:{page:"coupon_share",qrType:i.CouponShareSubscribeTopBanner,cid:"coupon_banner"}},n=function(){var e={};for(var t in s)s.hasOwnProperty(t)&&t&&(e[t]=t);return e}();e.exports={Keys:n,Type:s}},"./static/src/assets/scss/index.scss":function(e,t){},"./static/src/assets/scss/module/_banner.scss":function(e,t){},"./components/widgets/RecommendEntrance/index.js":function(e,t,o){"use strict";o("./components/widgets/RecommendEntrance/style.scss");var i=o("./components/vendor/react.min.js"),s="undefined"!=typeof window?o("./components/common/index.js"):{},n=i.createClass({displayName:"RecommendEntrance",getDefaultProps:function(){return{entranceList:[],extraTrackingParams:null}},getInitialState:function(){return{}},goEntrance:function(e){var t=this.props.entranceList||[],o=t[e],i=this.props.extraTrackingParams;if(o&&o.forwardURL){var n=function(){s.navigation.forward(o.forwardURL)};i?s.logger.trackingRecord(s.util.extend(i,{idx:e,icon_title:o.title}),n):n()}},render:function(){var e=this,t=this.props.entranceList||[],o=t.map(function(t,o){t=t||{};var s=t,n=s.title,a=s.subTitle,r=s.imageURL,l="rem-entrance-grid-"+o;return i.createElement("li",{key:l,className:"rem-entrance-grid",onClick:function(){e.goEntrance(o)}},i.createElement("div",{className:"rem-entrance-grid-title"},n),i.createElement("div",{className:"rem-entrance-grid-sub-title"},a),i.createElement("div",{className:"rem-entrance-grid-image"},i.createElement("img",{src:r})))});return i.createElement("div",{className:"recommend-entrance-module"},i.createElement("ul",null,o))}});e.exports=n}});