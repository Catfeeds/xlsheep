webpackJsonpForReact([2,7],{0:function(e,t,s){"use strict";var o=s("./components/vendor/react.min.js"),n=s("./components/vendor/react-dom.min.js"),i=s("./components/app/goods_v2/index.js"),a=s("./components/common/index.js"),r=s("./components/common/uiWidgets/ProvideContext.js"),l=document.getElementById("main");a.page.prepare({requireLogin:!1,shareInfo:{noDefaultShare:!0},regEvents:{onSceneReturn:function(e){if(e=e||{},e.url)return void a.navigation.reload(e.url)}}},function(){return n.render(o.createElement(r,null,o.createElement(i,{data:window.rawData})),l)})},"./constants/strategy/subscribe_top_banner.js":function(e,t,s){"use strict";var o=s("./constants/strategy/qr_code_type.js"),n={Portal:{page:"index",qrType:o.PortalSubscribeTopBanner,cid:"home_banner"},Goods:{page:"goods",qrType:o.GoodsSubscribeTopBanner,cid:"goods_banner"},Group:{page:"group",qrType:o.GroupBanner,cid:"group_banner"},NewYear:{page:"new_year",qrType:o.NewYearSubscribeTopBanner,cid:"activity_banner"},WomensDay:{page:"womens_day",qrType:o.NewYearSubscribeTopBanner,cid:"activity_banner"},CouponShare:{page:"coupon_share",qrType:o.CouponShareSubscribeTopBanner,cid:"coupon_banner"}},i=function(){var e={};for(var t in n)n.hasOwnProperty(t)&&t&&(e[t]=t);return e}();e.exports={Keys:i,Type:n}},"./components/widgets/Banner3/index.js":function(e,t,s){"use strict";var o=s("./components/vendor/react.min.js"),n=s("./components/widgets/Banner3/banner.js"),i=("undefined"!=typeof window?s("./components/common/util.js"):{},"undefined"!=typeof window?s("./components/common/image.js"):{}),a="undefined"!=typeof window?s("./components/common/logger.js"):{},r={},l=o.createClass({displayName:"Banner",getInitialState:function(){return{loaded:!1,currentIndex:0,bannerStyle:{}}},getDefaultProps:function(){return{data:[],height:"",viewImage:!1}},componentWillMount:function(){var e=this.props.height;this.props.data;e&&e.length>0&&this.setState({bannerStyle:{height:e}})},componentDidMount:function(){var e=this;r=n(e.refs.banner),this.props.data.length&&!this.state.loaded&&(r.load(this.props.data,!1),r.on("slideChange",function(t){e.setState({currentIndex:t})}),this.setState({loaded:!0}))},componentWillReceiveProps:function(e){this.props.data!==e.data&&r.reload(e.data)},viewImages:function(e){if(e&&e.stopPropagation(),this.props.trackingParams&&a.trackingRecord(this.props.trackingParams),this.props.viewImages===!0){var t=this.props.data,s=t[this.state.currentIndex];i.viewImages(s,t)}},render:function(){var e=this.props.data,t=!1;e&&e.length>0&&(t=o.createElement("div",{className:"banner-index"},this.state.currentIndex+1,"/",e.length));var s=this.props.bannerClass||"";return o.createElement("div",{id:"banner",className:s,ref:"banner",style:this.state.bannerStyle,onClick:this.viewImages},t)}});e.exports=l},"./components/widgets/Banner3/banner.js":function(e,t,s){"use strict";var o="undefined"!=typeof window?s("./components/vendor/iSlider.js"):{},n="undefined"!=typeof window?s("./components/common/index.js"):{},i="showDownloadNotification",a=s("./components/widgets/DownloadNotification/index.js"),r=s("./components/vendor/react.min.js"),l=s("./components/vendor/react-dom.min.js");"undefined"!=typeof window&&s("./static/src/assets/scss/module/_banner.scss"),e.exports=function(e){function t(e){var t=e,s="";e.forwardUrl&&(s=e.forwardUrl),e.imgUrl&&(t=n.image.upaiyunCompress(e.imgUrl));var o='<img src="'+t+'"" data-url="'+s+'"/>';return e.html&&(o=e.html),{content:o}}function s(e){var t=e.data;t&&t.length&&t.length>1?(e.isLooping=!0,e.isAutoplay=g,e.animateTime=p,e.duration=m,e.rebindTouch()):(e.isLooping=!1,e.isAutoplay=g),e.loadData(e.data,0),e.reset()}var c,u,d=e||document.getElementById("banner"),p=600,m=3e3,g=!0,h=function(){d.style.display=""},f=function(){d.style.display="none"},v=function(){c&&c.play()},y={showDownloadNotification:function(){var e="该商品是APP专享团商品，请在APP中购买和参团。",t={cid:"appbanner"},s=document.createElement("DIV");document.body.appendChild(s),l.render(r.createElement(a,{title:"APP专享团",content:e,queries:t,show:!0}),s)}};u=function(e){return e===i?void y[e](event):void(e&&e.length>0&&n.navigation.forward(e))};var b=function(e,i,a,r){var l=[],h=r;c&&(c.data=[]),i===!1&&(g=i);for(var f=0;f<e.length;f++){var v=t(e[f]);c?c.pushData(v):l.push(v)}if(!c){var y={dom:d,data:l,isLooping:!1,isAutoplay:!1,animateTime:p,duration:m,fixPage:!1};l.length>1?(y.isLooping=!0,y.isAutoplay=!1,y.isTouchable=!0):y.isTouchable=!1,c=new o(y),d.addEventListener("click",function(e){u(e.target.dataset.url)})}0===e.length&&n.util.call(h,!0),s(c)},k=function(e){b(e)},_=function(e,o){c.data.splice(o,0,t(e)),s(c)};return{load:b,show:h,hide:f,play:v,reload:k,on:function(e,t){c.on(e,t)},click:function(e){u=e},loaded:function(){return!!c},insert:_}}},"./components/vendor/iSlider.js":function(e,t,s){var o;(function(e){!function(n){"use strict";function i(){}function a(e,t){return t.indexOf(e)>-1}function r(e){return"[object Array]"===Object.prototype.toString.call(e)}function l(e){return"[object Object]"===Object.prototype.toString.call(e)}function c(e,t){return e.className.match(new RegExp("(\\s|^)("+t+")(\\s|$)"))}function u(e,t){c(e,t)||(e.className+=" "+t)}function d(e,t){c(e,t)&&(e.className=e.className.replace(RegExp("(\\s|^)("+t+")(\\s|$)"),"$3"))}function p(e){return!/<\/?[^>]*>/.test(e)&&/^(?:(https|http|ftp|rtsp|mms):)?(\/\/)?(\w+:{0,1}\w*@)?([^\?#:\/]+\.[a-z]+|\d+\.\d+\.\d+\.\d+)?(:[0-9]+)?((?:\.?\/)?([^\?#]*)?(\?[^#]+)?(#.+)?)?$/.test(e)}function m(e){return Array.prototype.slice.apply(e,Array.prototype.slice.call(arguments,1))}function g(e){return e.replace(/^[a-z]/,function(e){return e.toUpperCase()})}var h=function(){var e=m(arguments,0,3);if(!e.length)throw new Error("Parameters required!");var t=l(e.slice(-1)[0])?e.pop():{};switch(e.length){case 2:t.data=t.data||e[1];case 1:t.dom=t.dom||e[0]}if(!t.dom)throw new Error("Container can not be empty!");if(!t.data||!t.data.length)throw new Error("Data must be an array and must have more than one element!");this._opts=t,t=null,e=null,this._setting(),this.fire("initialize"),this._renderWrapper(),this._initPlugins(),this._bindHandler(),this.fire("initialized"),this._autoPlay()};h.VERSION="2.1.7",h.EVENTS=["initialize","initialized","pluginInitialize","pluginInitialized","renderComplete","slide","slideStart","slideEnd","slideChange","slideChanged","slideRestore","slideRestored","loadData","reset","destroy"],h.EASING=[["linear","ease","ease-in","ease-out","ease-in-out"],/cubic-bezier\(([^\d]*(\d+.?\d*)[^\,]*\,?){4}\)/],h.FIX_PAGE_TAGS=["SELECT","INPUT","TEXTAREA","BUTTON","LABEL"],h.NODE_TYPE={unknown:"unknown",empty:"empty",pic:"pic",dom:"dom",html:"html",node:"node",element:"element"},h.TRANSITION_END_EVENT=null,h.BROWSER_PREFIX=null,function(){var e=document.createElement("fakeElement");[["WebkitTransition","webkitTransitionEnd","webkit"],["transition","transitionend",null],["MozTransition","transitionend","moz"],["OTransition","oTransitionEnd","o"]].some(function(t){if(void 0!==e.style[t[0]])return h.TRANSITION_END_EVENT=t[1],h.BROWSER_PREFIX=t[2],!0})}(),h.DEVICE_EVENTS=function(){var e=!!("ontouchstart"in n&&!/Mac OS X /.test(n.navigator.userAgent)||n.DocumentTouch&&document instanceof n.DocumentTouch);return{hasTouch:e,startEvt:e?"touchstart":"mousedown",moveEvt:e?"touchmove":"mousemove",endEvt:e?"touchend":"mouseup",cancelEvt:e?"touchcancel":"mouseout",resizeEvt:"onorientationchange"in n?"orientationchange":"resize"}}(),h.extend=function(){var e,t,s=arguments;switch(s.length){case 0:return;case 1:e=h.prototype,t=s[0];break;case 2:e=s[0],t=s[1]}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])},h.plugins={},h.regPlugin=function(e,t){h.plugins[e]=h.plugins[e]||t},h.styleProp=function(e,t){return h.BROWSER_PREFIX?t?h.BROWSER_PREFIX+g(e):"-"+h.BROWSER_PREFIX+"-"+e:e},h.setStyle=function(e,t,s){e.style[h.styleProp(t,1)]=s},h.getStyle=function(e,t){return e.style[h.styleProp(t,1)]},h._animateFuncs={normal:function(){function e(e,t,s,o,n){h.setStyle(e,"transform","translateZ(0) translate"+t+"("+(n+s*(o-1))+"px)")}return e.effect=h.styleProp("transform"),e}()};var f=h.prototype;f.extend=h.extend,f._setting=function(){var e=this;e._plugins=h.plugins,e._animateFuncs=h._animateFuncs,e._holding=!1,e._locking=!1,e._intermediateScene=null,e._transitionEndHandler=null,e._LSN={autoPlay:null,resize:null,transitionEnd:null},e.currentEl=null,e._EventHandle={},e.onMoving=!1,e.onSliding=!1,e.direction=null;var t=this._opts;e.wrap=t.dom,e.data=t.data,e.isVertical=!!t.isVertical,e.isOverspread=!!t.isOverspread,e.duration=t.duration||2e3,e.initIndex=t.initIndex>0&&t.initIndex<=t.data.length-1?t.initIndex:0,e.fixPage=function(){var e=t.fixPage;return e!==!1&&0!==e&&(!(r(e)&&e.length>0||"string"==typeof e&&""!==e)||[].concat(e).toString())}(),e.fillSeam=!!t.fillSeam,e.slideIndex=e.slideIndex||e.initIndex||0,e.axis=e.isVertical?"Y":"X",e.reverseAxis="Y"===e.axis?"X":"Y",e.width="number"==typeof t.width?t.width:e.wrap.offsetWidth,e.height="number"==typeof t.height?t.height:e.wrap.offsetHeight,e.ratio=e.height/e.width,e.scale=e.isVertical?e.height:e.width,e.offset=e.offset||{X:0,Y:0},e.isTouchable=null==t.isTouchable||!!t.isTouchable,e.isLooping=!!(t.isLooping&&e.data.length>1),e.dampingForce=Math.max(0,Math.min(1,parseFloat(t.dampingForce)||0)),e.delay=t.delay||0,e.isAutoplay=!!(t.isAutoplay&&e.data.length>1),e.animateType=t.animateType in e._animateFuncs?t.animateType:"normal",e._animateFunc=e._animateFuncs[e.animateType],e._animateReverse=function(){var t=[];for(var s in e._animateFuncs)e._animateFuncs.hasOwnProperty(s)&&e._animateFuncs[s].reverse&&t.push(s);return t}(),e.isVertical&&"card"===e.animateType&&(e.isOverspread=!0),e.log=t.isDebug?function(){n.console.log.apply(n.console,arguments)}:i,e._damping=function(){return function(t){return.62*Math.atan(Math.abs(t)/e.scale)*(1-e.dampingForce)*e.scale*(t>0?1:-1)}}(),e.animateTime=null!=t.animateTime&&t.animateTime>-1?t.animateTime:300,e.animateEasing=a(t.animateEasing,h.EASING[0])||h.EASING[1].test(t.animateEasing)?t.animateEasing:"ease",e.deviceEvents=h.DEVICE_EVENTS,e.fingerRecognitionRange=t.fingerRecognitionRange>-1?parseInt(t.fingerRecognitionRange):10,e.events={},h.EVENTS.forEach(function(s){var o=t["on"+s.toLowerCase()];"function"==typeof o&&e.on(s,o,1)}),e.pluginConfig=function(){var e={};return r(t.plugins)&&t.plugins.forEach(function(t){r(t)?e[t[0]]=t.slice(1):"string"==typeof t&&(e[t]=[])}),e}()},f._initPlugins=function(){var e=this.pluginConfig,t=this._plugins;for(var s in e)e.hasOwnProperty(s)&&t.hasOwnProperty(s)&&(this.log("[INIT PLUGIN]:",s,t[s]),t[s]&&"function"==typeof t[s]&&typeof t[s].apply&&t[s].apply(this,e[s]));this.fire("pluginInitialized")},f._itemType=function(e){if(isNaN(e)||(e=this.data[e]),e.hasOwnProperty("type"))return e.type;var t,s=e.content,o=h.NODE_TYPE;return t=null==s?o.empty:Boolean(s.nodeName)&&Boolean(s.nodeType)?o.node:"string"==typeof s?p(s)?o.pic:o.html:o.unknown,e.type=t,t},f._renderItem=function(e,t){var s,o=this,n=this.data.length,i=function(){var t=' src="'+s.content+'"';t+=s.height/s.width>o.ratio?' height="100%"':' width="100%"',o.isOverspread&&(e.style.cssText+="background-image:url("+s.content+");background-repeat:no-repeat;background-position:50% 50%;background-size:cover",t+=' style="display:block;opacity:0;height:100%;width:100%;"'),e.innerHTML="<img"+t+" />"};if(e.innerHTML="",e.style.background="",this.isLooping||null!=this.data[t]){t=(n+t)%n,s=this.data[t];var a=this._itemType(s),r=h.NODE_TYPE;switch(this.log("[RENDER]:",a,t,s),e.className="islider-"+a,a){case r.pic:if(2===s.load)i();else{var l=new Image;l.src=s.content,l.onload=function(){s.height=l.height,s.width=l.width,i(),s.load=2}}break;case r.dom:case r.html:e.innerHTML=s.content;break;case r.node:case r.element:if(11===s.content.nodeType){var c=document.createElement("div");c.appendChild(s.content),s.content=c}e.appendChild(s.content)}}},f._renderIntermediateScene=function(){null!=this._intermediateScene&&(this._renderItem.apply(this,this._intermediateScene),this._intermediateScene=null)},f._changedStyles=function(){var e=["islider-prev","islider-active","islider-next"];this.els.forEach(function(t,s){d(t,e.join("|")),u(t,e[s]),this.fillSeam&&this.originScale(t)}.bind(this))},f._renderWrapper=function(){var e;this.outer?(e=this.outer,e.innerHTML=""):e=document.createElement("ul"),e.className="islider-outer",this.els=[];for(var t=0;t<3;t++){var s=document.createElement("li");this.els.push(s),this._animateFunc(s,this.axis,this.scale,t,0),this.fixPage||(s.style.overflow="auto"),!this.isVertical||"rotate"!==this.animateType&&"flip"!==this.animateType?this._renderItem(s,t-1+this.slideIndex):this._renderItem(s,1-t+this.slideIndex),e.appendChild(s)}this._changedStyles(),this.fillSeam&&this.els.forEach(function(e,t){u(e,"islider-sliding"+(1===t?"-focus":""))}),n.setTimeout(function(){this._preloadImg(this.slideIndex)}.bind(this),200),this.outer||(this.outer=e,this.wrap.appendChild(e)),this.currentEl=this.els[1],this.fire("renderComplete",this.slideIndex,this.currentEl,this)},f._preloadImg=function(e){if(this.data.length>3){var t=this.data,s=t.length,o=this,n=function(e){var s=t[e];if("pic"===o._itemType(s)&&!s.load){var n=new Image;n.src=s.content,n.onload=function(){s.width=n.width,s.height=n.height,s.load=2},s.load=1}};n((e+2)%s),n((e-2+s)%s)}},f._watchTransitionEnd=function(e,t){this._unWatchTransitionEnd();var s=function(){this._unWatchTransitionEnd(),"slideChanged"===t&&this._changedStyles(),this.fire.call(this,t,this.slideIndex,this.currentEl,this),this._renderIntermediateScene(),this.play(),this.onSliding=!1,this.direction=null}.bind(this);h.TRANSITION_END_EVENT&&(this.currentEl.addEventListener(h.TRANSITION_END_EVENT,s),this._transitionEndHandler={el:this.currentEl,handler:s}),this._LSN.transitionEnd=n.setTimeout(s,e)},f._unWatchTransitionEnd=function(){this._LSN.transitionEnd&&n.clearTimeout(this._LSN.transitionEnd),null!==this._transitionEndHandler&&(this._transitionEndHandler.el.removeEventListener(h.TRANSITION_END_EVENT,this._transitionEndHandler.handler),this._transitionEndHandler=null)},f.rebindTouch=function(){var e=this.outer,t=this.deviceEvents;this.isTouchable||(t.hasTouch||(e.style.cursor="pointer",e.ondragstart=function(e){return!e}),e.addEventListener(t.startEvt,this),e.addEventListener(t.moveEvt,this),e.addEventListener(t.endEvt,this),!t.hasTouch&&e.addEventListener("mouseout",this),this.isTouchable=!0)},f._bindHandler=function(){var e=this.outer,t=this.deviceEvents;this.isTouchable&&(t.hasTouch||(e.style.cursor="pointer",e.ondragstart=function(e){return!e}),e.addEventListener(t.startEvt,this),e.addEventListener(t.moveEvt,this),e.addEventListener(t.endEvt,this),!t.hasTouch&&e.addEventListener("mouseout",this)),n.addEventListener(t.resizeEvt,this),n.addEventListener("focus",this,!1),n.addEventListener("blur",this,!1)},f.handleEvent=function(e){var t=this.deviceEvents;switch(e.type){case"mousedown":if(0!==e.button)break;case"touchstart":this.startHandler(e);break;case t.moveEvt:this.moveHandler(e);break;case t.endEvt:case t.cancelEvt:this.endHandler(e);break;case t.resizeEvt:this.resizeHandler();break;case"focus":this.play();break;case"blur":this.pause()}},f.startHandler=function(e){if(this.fixPage&&h.FIX_PAGE_TAGS.indexOf(e.target.tagName.toUpperCase())<0&&!this._isItself(e.target)&&e.preventDefault(),!this._holding&&!this._locking){var t=this.deviceEvents;this.onMoving=!0,this.pause(),this.log("[EVENT]: start"),this.fire("slideStart",e,this),this.startTime=(new Date).getTime(),this.startX=t.hasTouch?e.targetTouches[0].pageX:e.pageX,this.startY=t.hasTouch?e.targetTouches[0].pageY:e.pageY}},f.moveHandler=function(e){if(this.onMoving){this.log("[EVENT]: moving");var t=this.deviceEvents,s=this.data.length,o=this.axis,n=this.reverseAxis,i={};e.hasOwnProperty("offsetRatio")?(i[o]=e.offsetRatio*this.scale,i[n]=0):(i.X=t.hasTouch?e.targetTouches[0].pageX-this.startX:e.pageX-this.startX,i.Y=t.hasTouch?e.targetTouches[0].pageY-this.startY:e.pageY-this.startY),this.offset=i,e.offsetRatio=i[o]/this.scale,Math.abs(i[o])-Math.abs(i[n])>10&&(e.preventDefault(),this._unWatchTransitionEnd(),this.isLooping||(i[o]>0&&0===this.slideIndex||i[o]<0&&this.slideIndex===s-1)&&(i[o]=this._damping(i[o])),this.els.forEach(function(e,t){e.style.visibility="visible",h.setStyle(e,"transition","none"),this._animateFunc(e,o,this.scale,t,i[o],i[o]),this.fillSeam&&this.seamScale(e)}.bind(this)),this.fire("slide",e,this))}},f.endHandler=function(e){function t(s){if(null!=s)if("A"===s.tagName){if(s.href)return"_blank"===s.getAttribute("target")?n.open(s.href):n.location.href=s.href,e.preventDefault(),!1}else{if("LI"===s.tagName&&s.className.search(/^islider\-/)>-1)return!1;t(s.parentNode)}}if(this.onMoving){this.log("[EVENT]: end"),this.onMoving=!1;var s=this.offset,o=this.axis,i=this.scale/2,a=(new Date).getTime(),r=this.fingerRecognitionRange;i=a-this.startTime>300?i:14;var l=Math.abs(s[o]),c=Math.abs(s[this.reverseAxis]);this.fire("slideEnd",e,this),s[o]>=i&&c<l?this.slideTo(this.slideIndex-1):s[o]<-i&&c<l?this.slideTo(this.slideIndex+1):Math.abs(this.offset[o])>=r&&this.slideTo(this.slideIndex),Math.abs(this.offset[o])<r&&this.fixPage&&e.target&&t(e.target),this.offset.X=this.offset.Y=0}},f.resizeHandler=function(){var e,t,s=this._LSN.resize,o=+new Date;this.deviceEvents.hasTouch?(s&&n.clearInterval(s),s=n.setInterval(function(){this.height!==this.wrap.offsetHeight||this.width!==this.wrap.offsetWidth?(s&&n.clearInterval(s),s=n.setInterval(function(){e===this.wrap.offsetWidth&&t===this.wrap.offsetHeight?(s&&n.clearInterval(s),this.reset(),this.log("[EVENT]: resize")):(e=this.wrap.offsetWidth,t=this.wrap.offsetHeight)}.bind(this),12)):+new Date-o>=1e3&&s&&n.clearInterval(s)}.bind(this),12)):(s&&n.clearTimeout(s),s=n.setTimeout(function(){this.height===this.wrap.offsetHeight&&this.width===this.wrap.offsetWidth||(s&&n.clearInterval(s),this.reset(),this.log("[EVENT]: resize"))}.bind(this),200))},f.slideTo=function(e,t){if(this.isAutoplay&&this.pause(),!this._locking){this.unhold(),this.onSliding=!0;var s,o=this.animateTime,n=this.animateType,i=this._animateFunc,r=this.data,l=this.els,c=this.axis,p=e,m=e-this.slideIndex,g=this.offset,f=0;"object"==typeof t&&(t.animateTime>-1&&(o=t.animateTime),"string"==typeof t.animateType&&t.animateType in this._animateFuncs&&(n=t.animateType,i=this._animateFuncs[n])),0!==g[c]&&(f=Math.abs(g[c])/this.scale*o),Math.abs(m)>1&&this._renderItem(m>0?this.els[2]:this.els[0],p),this._preloadImg(p),r[p]?this.slideIndex=p:this.isLooping?this.slideIndex=m>0?0:r.length-1:m=0,this.log("[SLIDE TO]: "+this.slideIndex);var v,y,b;0===m?s="slideRestore":((this.isVertical&&a(n,this._animateReverse))^m>0?(l.push(l.shift()),v=l[2],y=l[0],b=1):(l.unshift(l.pop()),v=l[0],y=l[2],b=-1),this.currentEl=l[1],1===Math.abs(m)?(this._renderIntermediateScene(),this._renderItem(v,p+m)):Math.abs(m)>1&&(this._renderItem(v,p+b),this._intermediateScene=[y,p-b]),h.setStyle(v,"transition","none"),f=o-f,s="slideChange",this.fillSeam&&(l.forEach(function(e){d(e,"islider-sliding|islider-sliding-focus")}),u(this.currentEl,"islider-sliding-focus"),u(v,"islider-sliding")),this.direction=b);for(var k=0;k<3;k++)l[k]!==v&&h.setStyle(l[k],"transition",(i.effect||"all")+" "+f+"ms "+this.animateEasing),i.call(this,l[k],c,this.scale,k,0,b),this.fillSeam&&this.seamScale(l[k]);this._watchTransitionEnd(f,s+"d"),this.fire(s,this.slideIndex,this.currentEl,this)}},f.slideNext=function(){this.slideTo.apply(this,[this.slideIndex+1].concat(m(arguments)))},f.slidePrev=function(){this.slideTo.apply(this,[this.slideIndex-1].concat(m(arguments)))},f.regPlugin=function(){var e=m(arguments),t=e.shift(),s=e[0];(this._plugins.hasOwnProperty(t)||"function"==typeof s)&&("function"==typeof s&&(this._plugins[t]=s,e.shift()),a(t,this._opts.plugins)||(this._opts.plugins.push(e.length?[].concat([t],e):t),"function"==typeof this._plugins[t]&&this._plugins[t].apply(this,e)))},f.bind=f.delegate=function(e,t,s){function o(e){for(var o=n.event?n.event:e,i=o.target,a=document.querySelectorAll(t),r=0;r<a.length;r++)if(i===a[r]){s.call(i);break}}this.wrap.addEventListener(e,o,!1);var i=e+";"+t;this._EventHandle.hasOwnProperty(i)?(this._EventHandle[i][0].push(s),this._EventHandle[i][1].push(o)):this._EventHandle[i]=[[s],[o]]},f.unbind=f.unDelegate=function(e,t,s){var o=e+";"+t;if(this._EventHandle.hasOwnProperty(o)){var n=this._EventHandle[o][0].indexOf(s);if(n>-1)return this.wrap.removeEventListener(e,this._EventHandle[o][1][n]),this._EventHandle[o][0][n]=this._EventHandle[o][1][n]=null,!0}return!1},f.destroy=function(){var e=this.outer,t=this.deviceEvents;this.fire("destroy"),this.isTouchable&&(e.removeEventListener(t.startEvt,this),e.removeEventListener(t.moveEvt,this),e.removeEventListener(t.endEvt,this),!t.hasTouch&&e.removeEventListener("mouseout",this)),n.removeEventListener(t.resizeEvt,this),n.removeEventListener("focus",this),n.removeEventListener("blur",this);var s;for(s in this._EventHandle)for(var o=this._EventHandle[s][1],i=0;i<o.length;i++)"function"==typeof o[i]&&this.wrap.removeEventListener(s.substr(0,s.indexOf(";")),o[i]);this._EventHandle=null;for(s in this._LSN)this._LSN.hasOwnProperty(s)&&this._LSN[s]&&n.clearTimeout(this._LSN[s]);this._LSN=null,this.wrap.innerHTML=""},f.on=function(e,t,s){a(e,h.EVENTS)&&"function"==typeof t&&(!(e in this.events)&&(this.events[e]=[]),s?this.events[e].unshift(t):this.events[e].push(t))},f.has=function(e,t){return e in this.events&&-1<this.events[e].indexOf(t)},f.off=function(e,t){if(e in this.events){var s=this.events[e].indexOf(t);s>-1&&delete this.events[e][s]}},f.fire=function(e){var t=m(arguments,1);e.split(/\x20+/).forEach(function(e){if(this.log("[EVENT FIRE]:",e,t),e in this.events)for(var s=this.events[e],o=0;o<s.length;o++)"function"==typeof s[o]&&s[o].apply&&s[o].apply(this,t)}.bind(this))},f.reset=function(){this.pause(),this._unWatchTransitionEnd(),this.width="number"==typeof this._opts.width?this._opts.width:this.wrap.offsetWidth,this.height="number"==typeof this._opts.height?this._opts.height:this.wrap.offsetHeight,this.ratio=this.height/this.width,this.scale=this.isVertical?this.height:this.width,this._renderWrapper(),this._autoPlay(),this.fire("reset slideRestored",this.slideIndex,this.currentEl,this)},f.loadData=function(e,t){this.pause(),this._unWatchTransitionEnd(),this.slideIndex=t||0,this.data=e,this._renderWrapper(),this._autoPlay(),this.fire("loadData slideChanged",this.slideIndex,this.currentEl,this)},f.pushData=function(e){var t=this.data.length;this.data=this.data.concat(e),this.isLooping&&0===this.slideIndex?this._renderItem(this.els[0],this.data.length-1):t-1===this.slideIndex&&(this._renderItem(this.els[2],t),this._autoPlay())},f.unshiftData=function(e){if(e){r(e)||(e=[e]);var t=e.length;this.data=e.concat(this.data),0===this.slideIndex&&this._renderItem(this.els[0],t-1),this.slideIndex+=t}},f._autoPlay=function(){this.delay>0?n.setTimeout(this.play.bind(this),this.delay):this.play()},f.play=function(){this.pause(),this.isAutoplay&&(this.isLooping||this.slideIndex<this.data.length-1)&&(this._LSN.autoPlay=n.setTimeout(this.slideNext.bind(this),this.duration))},f.pause=function(){this._LSN.autoPlay&&n.clearTimeout(this._LSN.autoPlay)},f.hold=function(){this._holding=!0},f.unhold=function(){this._holding=!1,this.unlock()},f.lock=function(){this.hold(),this._locking=!0},f.unlock=function(){this._locking=!1},f.seamScale=function(e){var t=/scale([XY]?)\(([^\)]+)\)/,s=h.getStyle(e,"transform");t.test(s)?h.setStyle(e,"transform",s.replace(t,function(e,t,s){var o={};return t?(o[t]=parseFloat(s),"scale"+this.axis+"("+(t===this.axis?1.001*o[this.axis]:1.001)+")"):(s.indexOf(",")>-1?(s=s.split(","),o.X=parseFloat(s[0]),o.Y=parseFloat(s[1])):o.Y=o.X=parseFloat(s),o[this.axis]*=1.001,"scale("+o.X+", "+o.Y+")")}.bind(this))):h.setStyle(e,"transform",s+" scale"+this.axis+"(1.001)")},f.originScale=function(e){var t=/([\x20]?scale)([XY]?)\(([^\)]+)\)/;h.setStyle(e,"transform",h.getStyle(e,"transform").replace(t,function(e,t,s,o){return e={},s?"1.001"===o?"":(e[s]=parseFloat(o),"scale"+this.axis+"("+(s===this.axis?e[this.axis]/1.001:1)+")"):(o.indexOf(",")>-1?(o=o.split(","),e.X=parseFloat(o[0]),e.Y=parseFloat(o[1])):e.Y=e.X=parseFloat(o),e[this.axis]/=1.001,"scale("+e.X+", "+e.Y+")")}.bind(this)))},f._isItself=function(e){var t=this.fixPage;if("string"==typeof t){for(var s,o=[],n=e;!c(n,"islider-outer")&&n!==this.wrap;)o.push(n),n=n.parentNode;if(n=o.pop(),o.length)try{if(s=Array.prototype.slice.call(n.querySelectorAll(t)),s.length)for(var i=0;i<o.length;i++)if(s.indexOf(o[i])>-1)return!0}catch(e){return!1}}return!1},f.subjectTo=function(e,t){if(!(!e instanceof h)){var s=this;s.animateTime=e.animateTime,s.isLooping=e.isLooping,s.isAutoplay=!1,e.on("slideStart",function(e){s.startHandler(e)}),e.on("slide",function(e){s.moveHandler(e)}),e.on("slideEnd",function(e){s.endHandler(e)}),e.on("slideChange",function(e){var t=s.data.length,o=s.direction;o>0&&(e-s.slideIndex+t)%t===1?s.slideNext():o<0&&(e-s.slideIndex-t)%t===-1&&s.slidePrev()}),e.on("slideRestore",function(e){s.slideIndex!==e&&s.slideTo(e)})}},h.regPlugin("dot",function(e){function t(){var e=document.createDocumentFragment();i.forEach(function(e,t){e.removeEventListener(r,a[t],!1)}),i=[],a=[],u.innerHTML="";for(var t=0;t<n.length;t++)i[t]=document.createElement("li"),i[t].className=c,i[t].setAttribute("index",t),t===o.slideIndex&&(i[t].className+=" active"),a[t]=function(){o.slideTo(parseInt(this.getAttribute("index"),10))},i[t].addEventListener(r,a[t],!1),e.appendChild(i[t]);u.appendChild(e)}function s(e){return"relative"===e?o.wrap:Boolean(e.nodeName)&&Boolean(e.nodeType)?e:o.wrap.parentNode}var o=this,n=o.data,i=[],a=[],r=o.deviceEvents.endEvt,l=e.dotWrapClass||"islider-dot-wrap",c=e.dotClass||"islider-dot",u=document.createElement("ul");u.className=l,t(),s(!(!e||null==e.locate)&&e.locate).appendChild(u),o.on("slideChange",function(){for(var e=0;e<n.length;e++)i[e].className=c,e===this.slideIndex&&(i[e].className+=" active")}),o.on("loadData",function(){n=this.data,t()},1)}),"object"==typeof e&&e&&"object"==typeof t&&t?e.exports=h:s("./node_modules/webpack/buildin/amd-define.js").amd?(o=function(){return h}.call(t,s,t,e),!(void 0!==o&&(e.exports=o))):n.iSlider=n.iSlider||h}(window||this)}).call(t,s("./node_modules/webpack/buildin/module.js")(e))},"./node_modules/webpack/buildin/module.js":function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},"./node_modules/webpack/buildin/amd-define.js":function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},"./components/widgets/DownloadNotification/index.js":function(e,t,s){"use strict";var o=s("./components/vendor/react.min.js"),n="undefined"!=typeof window?s("./components/common/index.js"):{},i=s("./components/widgets/Group/util.js"),a={src:"weixin",campaign:"gzh",cid:"appzxdownload"},r=o.createClass({displayName:"DownloadNotification",getInitialState:function(){return{style:{display:"none"}}},getDefaultProps:function(){return{title:"",content:"",queries:{},show:!1}},componentWillReceiveProps:function(e){e.show===!1&&this.hide(),e.show===!0&&this.show()},hide:function(){this.setState({style:{display:"none"}}),"function"==typeof this.props.hideFunc&&n.util.call(this.props.hideFunc)},show:function(){this.setState({style:{display:""}})},getSendData:function(e,t){var s={},o=e.groupOrderID,a=e.goodsName,r=e.thumbUrl,l=i.getUserAgentInfo();return s=n.util.extend(l,{group_order_id:o,group:{goods_name:a,thumb_url:r}}),t||(s.confirm="去购买",s.goods={goods_id:e.goodsID,status:e.status,group_role:e.groupRole}),s},downloadApp:function(e,t){var s=this,o="download.html?"+n.url.buildQuery(a,s.props.queries);if(e){var i=this.getSendData(e,t);if(i.version&&i.platform){var r="/app_group/track/set";n.request.apiRequest("POST",r,i,function(e){e&&e.success===!0&&n.navigation.forward(o)},function(e){},null,null,!1,!1,!0)}}else n.navigation.forward(o)},componentDidMount:function(){this.show()},render:function(){var e=s("./node_modules/url-loader/index.js?limit=1000000!./components/widgets/DownloadNotification/images/cancel_icon.png"),t=this.props.data,n=this.props.joinGroup;return o.createElement("div",{style:this.state.style,className:"lotteryRuleContainer"},o.createElement("div",{id:"lotteryRuleMask"}),o.createElement("div",{className:"lotteryRule lotteryRuleModule"},o.createElement("img",{src:e,className:"lotteryRuleCancelImg",onClick:this.hide}),o.createElement("span",{className:"lotteryRuleHead lotteryRuleModuleHead"},o.createElement("p",{className:"font-size:18px;"},this.props.title),o.createElement("div",{style:{padding:"20px",fontSize:"15px",fontWeight:"normal"}},o.createElement("div",null,this.props.content)),o.createElement("div",{style:{borderRadius:"5px",margin:"40px 13px 13px 13px",padding:"10px",textAlign:"center",backgroundColor:"#fe243d"},onClick:this.downloadApp.bind(this,t,n)},o.createElement("div",{style:{fontSize:"18px",color:"white",fontWeight:"normal"}},"下载APP")))))}});e.exports=r},"./components/widgets/Group/util.js":function(e,t){"use strict";e.exports={formatTime:function(e,t){t=t||"yyyy/MM/dd hh:mm:ss";var s={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var o in s)new RegExp("("+o+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?s[o]:("00"+s[o]).substr((""+s[o]).length)));return t},transferToTime:function(e,t){t=t||{};var s=Math.floor(e/1e3),o=Math.floor(s/3600);if(t.onlyHour)return o;o<10&&(o="0"+o),s%=3600;var n=Math.floor(s/60);if(n<10&&(n="0"+n),s%=60,s<10&&(s="0"+s),t.removeHours)return[n,s].join(":");if(t.needMs){var i=Math.floor(e%1e3)/100;return[o,n,s,i].join(":")}return[o,n,s].join(":")},getStringCharLength:function(e){for(var t=0,s=0;s<e.length;s++)t+=e.charCodeAt(s)<0||e.charCodeAt(s)>255?2:1;return t},utfStrTruncation:function(e,t,s){s=s||"...";var o=this.getStringCharLength(e);if(o<=t)return e;for(var n=e,i=0,a=0;i<e.length;i++)if(a+=e.charCodeAt(i)<0||e.charCodeAt(i)>255?2:1,a>t){n=e.slice(0,i)+s;break}return n},getUserAgentInfo:function(){var e=navigator.userAgent,t="",s="",o="";return e.indexOf("Android")!==-1?(t=e.slice(e.indexOf("Android")),s=t.slice("Android".length,t.indexOf(";")),o="Android"):e.indexOf("iPhone")!==-1?(o="iOS",t=e.slice(e.indexOf("iPhone OS")),s=t.slice("iPhone OS".length,t.indexOf("like"))):e.indexOf("iPad")!==-1&&(o="iOS",t=e.slice(e.indexOf("CPU OS")),s=t.slice("CPU OS".length,t.indexOf("like"))),s=s.replace(/_/g,".").trim(),{platform:o,version:s}}}},"./node_modules/url-loader/index.js?limit=1000000!./components/widgets/DownloadNotification/images/cancel_icon.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFMAAABTCAYAAADjsjsAAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo4REJDNzdDNDk4QkUxMUU1ODNCOENCNEI3QUIxNzI1QiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo4REJDNzdDNTk4QkUxMUU1ODNCOENCNEI3QUIxNzI1QiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjhEQkM3N0MyOThCRTExRTU4M0I4Q0I0QjdBQjE3MjVCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjhEQkM3N0MzOThCRTExRTU4M0I4Q0I0QjdBQjE3MjVCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+/1rBewAABtVJREFUeNrsnVtsFFUYx09LKd1SLml9oLVUIRZReCIaEmNrIiWlionW6EvxkhAoqI1pxNbUcBMlUq08gFJISLwVH4yNUQMKPNFEEzUkxkqAJl6gtDzYipR2Sy/W7z/7nXY6bHdnd+fMnN2dL/knpWznfN9vz/WbM2cy/rnnQeFb/LbwXMfkz1ka+HM7aSVpOelu0jJSEamAFCDNI90kDZKukQZIf5Muki6QzpM6SVe8DsQLmPmkKtI6UjmpxMbfzGHlm363xvKZS6QzpG9JJ0j9qQoTIJ4kbSBVkGYrKKOErw+Nkk6R2khfcM1WbpmKr4/m+japhwOrUgTSaijjES6zh30oSlaY6AcPkv4gNVqapxfdSiP78j77lhQwMWBsJ3WRXiRlazTwwpcX2Lcd7Ku2MCt4VH1DhaMOf+G72de1usEMcJM+SVqaRFNE+Pod6QOnvvxEYWJO+CM36YwknHPD560cwzIvYWJk/okn3MluKzmWKi9gbiJ9RZqfQivD+RzTJjdhNpAOa7IUVbGIQWyvugFzG2lfkvaPsfSjzRyrMphbuZB0sWaO2XGYj5IOpHiNDFdDEfNjTsIs5TXuLJF+hpg/sTttigYzl9ROWiDS1xYwg9xEYbakyDwyUVtB2p8ITKxba32O0+bWa+OBiSrdmmYDjp0BqTVSc8+MMJ9c6vO7xZZGmtCHg1koQslU32ZeARbahbnNzsiVxpY70+rICvM20mafV1TbzKwiwqwn5fmsohoYvRwJZo6qqdCchi0ia/3DrkUaaNlhSLFh3T7H/AtzGq1ahHZROG45T1eLjNyAGFlfKYa2qB3bclv3iezyB8R/ff0iqBYmWGEvwLFwNbNGVak36pvExFDQCBLBqgaJsgab9rjRCDaEa+b5wuE7dWYb7/hZOVAzSJSFMl2wimv3luVbYWLfj9KdFiqB5ux+xbimbAUugRTMbJ0VZpUbJSPI4NGPjZ+dApq9dYPIeepx4+ehA4fdBCms7CTMMrdKHjn0qRG0E0ABMreudhIkru2BlZthFpPucLN0J4BqAhJWQv1msYS5ygsPEgE6q+w+Edj4rA4gpa2SMD1L/sYDFCDz9u8NzVvPfK8DSCEZAmapl17EAtQKUvUCIAYrlTDv9NoTO0AzV9ylK0ghxxzAXKSDN5GAZiwqEHPf26MrSFihhFmgi0fhgAJk3kcHxazFxWL8crcI7tJyH0S+THTk6OSVHFAw7QHQ2d98ZtRIgLzx3Eti4mqfjjADsmbO080zAA1+2BZq4gTSWG/rC1JIhpk6eoamnb3moal/E9DArgahuwHmgG5OyT4SNXL48y8dXcsrsgEJc1gnrwBMgkQGaHhnixiorXclH5qABSXMPp1AhstJupEPTdD6JcyrOoGEhctJWoHmtR81+lZNrFfC/NNrT3DDTYKMlJM0A81avszoWzUB+peE2eWlF0ilBZ6vsZ0BMgNF36oJ0C4Js9NLkPHkJCVQTOQ1AdopYZ71GiQm6LGm0gygNJHXBOhZCbNbhB58d83MyV0kLm42t8Z1HayINAB6aeG5jm7zCuiMmyCdTKVpALTDvAKCnUhGkJoAPW6FiXMtRlWvt1UmdyXQsfMX3QQ6yuymwcQM/rRSkAiOU2mqcpIG0OqNxpflEtDT1F/2W2HClN2ZQsZHJnfdSKWh1kugirNN05iZd8G1cw11/DyNsV9+DU2BqEa6lZME0HFaWY39oGyHRx8zm2qBlhO33iI1Cd/s2F7S6+YTt6zJYTw4NOhzimqDIsxDVlaYOBbsiM8qqh1hVhFhwt5Bl+Pzmrk7Jr0b7j/CwexloL6FN4DssQsThong7z63Wwynds2Y5s+MUJW3YB7s85taEzCToVhhwnDKX6vPcNLA4mSkD0S7b47H2s75HA0GUQ9AiQYTVfoJ0r9pDBKxV9uZ4djZ0YHjaJ8hjachyHGO/YKdD9vdHvM1qS4NB6Q6jl04CRN2SKTXc+gNHLNQAVOujhpTvIZOcIwxL1zi2QXXzPOtVOxDxzm2uLLX8W4pxEIfJ1FdTyGQ1zmmuBM9iezPxE24+4WHmxgctE6OJaEbi4ludsW0aTV31MnYj06w76s5FuElTDmxxynTlZwISKakRSX77kjK0clt2FjL45gvnIYd1BgifHuTfT3l5IUzFTi6U4Se2ELzGdEI4gj7BN+2q/jCVT0gcIWbzxIRyv/1ewixn31Ywj4pezuL6qctkJF+TYTeK1HDo+WoCwBRxnEus4h96FFdqFuHMOOtJ8dY8bzCxo6lzStsrM2ujQVbzIOB+eVKeBYRJ1rhqLC5/LlBHnVxV7BXTH+50m+ky153yv8LMADFEoFE0nkfqgAAAABJRU5ErkJggg==";
},"./static/src/assets/scss/module/_banner.scss":function(e,t){},"./components/widgets/BaseGoodsInfo/index.js":function(e,t,s){"use strict";var o=s("./components/vendor/react.min.js"),n="undefined"!=typeof window?s("./components/common/index.js"):{};s("./constants/tracking/goods_detail_v2.js");"undefined"!=typeof window&&s("./components/widgets/BaseGoodsInfo/style.scss");var i={lottery:"抽奖",freeTrial:"免费试用",appOnly:"App专享",preSale:"预售",capitalGift:"包团送礼"},a={unwrapped:"g-desc",wrapped:"g-desc g-desc-wrapped"},r=o.createClass({displayName:"BaseGoodsInfo",getInitialState:function(){return{detailClass:a.wrapped,showMoreDesc:!1,price:"",isSubscribed:!1,isShowRules:!1}},getDefaultProps:function(){return{data:{}}},componentWillMount:function(){var e=this.props.data;(e.isLottery||e.isFreeTrial||e.isDepositeGroup||e.isCapitalGiftLottery)&&this.setState({detailClass:a.unwrapped,showMoreDesc:!1}),e.isDepositeGroup||this.setState({isShowRules:!0})},componentDidMount:function(){this.initDetailClass(),this.initDepositeRules()},initDepositeRules:function(){var e=n.user.isSubscribed();this.setState({isSubscribed:e,isShowRules:!0})},initDetailClass:function(){var e=document.querySelector(".g-desc-wrapped")||null,t=document.querySelector(".g-desc-detail")||null;if(e&&t){t.offsetHeight>e.offsetHeight+11?this.setState({showMoreDesc:!0}):this.setState({showMoreDesc:!1})}},showMoreDesc:function(e){e&&e.stopPropagation(),this.state.showMoreDesc&&this.setState({detailClass:a.unwrapped,showMoreDesc:!1})},render:function(){var e=this,t=this.props.data,s=this.props.lotteryRules,n=(t.useOnSalePrice?t.minOnSaleNormalPrice:t.maxNormalPrice,0);n=t.eventComing&&t.isSpike?t.minOnSaleGroupPrice!==t.maxOnSaleGroupPrice?[t.minOnSaleGroupPrice,t.maxOnSaleGroupPrice].join("-"):t.minOnSaleGroupPrice:t.isOnSale||t.minGroupPrice===t.maxGroupPrice?t.useOnSalePrice?t.minOnSaleGroupPrice:t.minGroupPrice:[t.minGroupPrice,t.maxGroupPrice].join("-");var a=!1,r=!1,l=!1;(t.isCapitalGift||t.isCapitalGiftLottery)&&(l=o.createElement("span",{className:"g-icon g-capital-gift-icon"},i.capitalGift));var c=!1;t.isApp&&(c=o.createElement("span",{className:"g-icon g-app-only-icon"},i.appOnly));var u=!1;t.isPreSale&&(u=o.createElement("span",{className:"g-icon"},i.preSale));var d=!1,p=!1,m=!1,g=!1,h=!1,f=!1;!t.isOnSale||t.isLottery||t.isFreeTrial||t.isDepositeGroup||t.isCapitalGift||t.isCapitalGiftLottery||(m=o.createElement("span",{className:"g-sales"},"已团",t.sales,"件·",t.groupTypes[1].requireNum,"人团"),d=m),(t.isSpike||t.isSuperSpike)&&(t.spikeInfo&&(h=o.createElement("span",{className:"g-sales-spike-all-quantity"},"限量",t.spikeInfo.allQuantity,"件"),f=o.createElement("span",{className:"g-sales-spike-sold-quantity"},"秒杀已抢",t.spikeInfo.soldQuantity,"件")),g=o.createElement("span",{className:"g-sales-spike-accumulated"},"累计已团",t.sales,"件·",t.groupTypes[1].requireNum,"人团"),t.eventComing?(d=h,p=o.createElement("div",{className:"g-sales-line-2"},g),0===t.sales&&(p=!1)):t.isOnSale?(d=f,p=o.createElement("div",{className:"g-sales-line-2"},g,h)):(d=!1,p=!1));var v=!1;if(this.state.isShowRules&&s&&s.detail){for(var y=[],b=0;b<s.detail.length;b++){var k=s.detail[b];if(k&&(!t.isDepositeGroup||!e.state.isSubscribed||2!==b)){var _=y.length;y.push(o.createElement("span",{key:_},_+1,". ",k))}}v=o.createElement("div",{className:"g-lottery-rules"},o.createElement("span",null,s.title),o.createElement("span",null,s.time),y)}var w=!1;this.state.showMoreDesc&&(w=o.createElement("div",{className:"g-desc-more"},"查看更多"));var I=!0;t.isSpike&&(I=o.createElement("div",{className:"g-spike-hint"},o.createElement("span",null,"商品售完时未能成团者即视为抢购失败，将发起退款")));var S=!1;if(t.isHaitao){var E=!1;t.mallService.goodsWarehouse&&(E=o.createElement("span",{className:"g-cw-item"},t.mallService.goodsWarehouse)),S=o.createElement("div",{className:"g-warehouse"},o.createElement("img",{className:"g-country-logo",src:t.countryLogo}),o.createElement("span",null,t.mallService.goodsCountry),E)}return o.createElement("section",{id:"g-base"},o.createElement("div",{className:"g-price-group"},o.createElement("span",{className:"g-group-price"},o.createElement("i",null,"￥"),n),o.createElement("span",{className:"g-market-price"},o.createElement("del",null,"￥",t.marketPrice)),d),p,o.createElement("div",{className:"g-name"},o.createElement("span",null,t.goodsName),a,r,l,c,u),o.createElement("div",{className:"g-desc",onClick:this.showMoreDesc},o.createElement("span",{className:"g-desc-detail"},t.goodsDesc),w),v,I,S)}});e.exports=r},"./constants/tracking/goods_detail_v2.js":function(e,t){"use strict";e.exports={PV:{op:"pv",event:"goods_show",page_name:"goods_detail",is_new:"1"},LikeClick:{op:"click",page_name:"goods_detail",page_element:"like_btn",page_section:"bottom_bar",is_new:"1"},BannerClick:{op:"click",event:"top_banner_clk",page_name:"goods_detail",page_element:"top_banner",is_new:"1"},MallBtnClick:{op:"click",event:"go_mall_btn_clk",page_name:"goods_detail",page_element:"go_mall_btn",is_new:"1"},JoinBtnClick:{op:"click",event:"join_btn_clk",page_name:"goods_detail",page_element:"join_btn",is_new:"1"},OpenBtnClick:{op:"click",event:"open_btn_clk",page_name:"goods_detail",page_element:"open_btn",is_new:"1"},IconClick:{op:"click",event:"icon_clk",page_name:"goods_detail",page_section:"icon_list",is_new:"1"},PageShare:{op:"event",event:"goods_detail_share",page_name:"goods_detail",is_new:"1"},ServiceClick:{op:"click",event:"ser_promise_btn_clk",page_name:"goods_detail",page_element:"ser_promise_btn",is_new:"1"},MallRecommendGoodsClick:{op:"click",page_name:"goods_detail",page_section:"mall_rec_list",page_element:"item"},RecommendGoodsClick:{op:"click",page_name:"goods_detail",page_section:"rec_list",page_element:"goods"},CommentBtnClick:{op:"click",event:"comment_btn_clk",page_name:"goods_detail",page_element:"comment_btn",is_new:"1"},PopBtnClick:{op:"click",event:"pop_btn_clk",page_name:"goods_detail",page_section:"pop_list",page_element:"top_btn",is_new:"1"},SkuSelectorClick:{op:"click",event:"sku_btn_clk",page_name:"goods_detail",page_section:"sku_btn",is_new:"1"},MallRecommendGoodsImpr:{op:"impr",page_name:"goods_detail",page_section:"mall_rec_list"},RecommendGoodsImpr:{op:"impr",page_name:"goods_detail",page_section:"rec_list",page_element:"goods"},CommentTagClick:{op:"click",event:"comment_tag_clk",page_name:"goods_detail",page_section:"comment_tag_list",page_element:"comment_tag"},LocalGroupImr:{op:"impr",page_name:"goods_detail",page_section:"local_group"},GoodsMainImpr:{op:"impr",page_name:"goods_detail",page_section:"main"},HighPriceBubble:{page_name:"goods_detail",page_section:"bottom_bar",page_element:"buy_prompt"}}},"./components/widgets/BaseGoodsInfo/style.scss":function(e,t){},"./components/widgets/MallService/index.js":function(e,t,s){"use strict";var o=s("./components/vendor/react.min.js"),n="undefined"!=typeof window?s("./components/common/index.js"):{},i=s("./constants/tracking/goods_detail_v2.js");"undefined"!=typeof window&&s("./components/widgets/MallService/style.scss");var a=4,r={containerClass:"g-mall-service",itemClass:"g-service-item",listClass:"g-service-list",iconClass:"",titleClass:"",title:"",subTitle:""},l={0:{containerClass:"g-mall-service g-mall-service-spike",listClass:"g-service-list g-service-list-advantage",itemClass:"g-service-item g-service-item-spike",iconClass:"g-advantage-icon-spike",titleClass:"g-service-advantage-spike",title:"限时秒杀",subTitle:"准时抢好品 限量不等人"},1:{containerClass:"g-mall-service g-mall-service-brand",listClass:"g-service-list g-service-list-advantage",itemClass:"g-service-item g-service-item-brand",iconClass:"g-advantage-icon-brand",titleClass:"g-service-advantage-brand",title:"名品折扣",subTitle:"大牌名品低价购"},2:{containerClass:"g-mall-service g-mall-service-shopping",listClass:"g-service-list g-service-list-advantage",itemClass:"g-service-item g-service-item-shopping",iconClass:"g-advantage-icon-shopping",titleClass:"g-service-advantage-shopping",title:"爱逛街",subTitle:"时尚抢先 爆款特价"},3:{containerClass:"g-mall-service g-mall-service-fruit",listClass:"g-service-list g-service-list-advantage",itemClass:"g-service-item g-service-item-fruit",iconClass:"g-advantage-icon-fruit",titleClass:"g-service-advantage-fruit",title:"品质水果",subTitle:"全球精选 闪电发货"},4:{containerClass:"g-mall-service g-mall-service-brand-clear",listClass:"g-service-list g-service-list-advantage",itemClass:"g-service-item g-service-item-brand-clear",iconClass:"g-advantage-icon-brand-clear",titleClass:"g-service-advantage-brand-clear",title:"品牌清仓",subTitle:"放心品质 低价清仓"}},c=o.createClass({displayName:"MallService",getInitialState:function(){return{serviceDetailLoaded:!1,isShowserviceDetail:!1}},getDefaultProps:function(){return{data:{},showServiceDetail:null}},componentWillMount:function(){},componentDidMount:function(){},showServiceDetail:function(e){e&&e.stopPropagation();var t=this.props.data,s=t.goodsID,o=t.hasLocalGroup?"1":"0",a=t.eventType;n.logger.trackingRecord(n.util.extend(i.ServiceClick,{goods_id:s,has_local_group:o,event_type:a}));var r=t.mallService.service||[];this.props.showServiceDetail&&n.util.call(this.props.showServiceDetail,r)},render:function(){var e=this.props.data,t=l[e.tag]||r,s=!1;l[e.tag]&&(s=o.createElement("div",{className:"g-service-advantage"},o.createElement("span",{className:t.iconClass}),o.createElement("span",{className:t.titleClass},t.title),o.createElement("span",null,t.subTitle)));for(var n=e.mallService.service||[],i=[],c=0;c<n.length&&c<a;c++){var u=n[c];i.push(o.createElement("span",{className:t.itemClass,key:c},u.type))}return o.createElement("div",{className:t.containerClass,onClick:this.showServiceDetail},s,o.createElement("div",{className:t.listClass},i))}});e.exports=c},"./components/widgets/MallService/style.scss":function(e,t){},"./components/widgets/ServiceDetail/index.js":function(e,t,s){"use strict";var o=s("./components/vendor/react.min.js"),n="undefined"!=typeof window?s("./components/common/index.js"):{};"undefined"!=typeof window&&s("./components/widgets/ServiceDetail/style.scss");var i={show:"service-detail-main main-show",hide:"service-detail-main main-hide"},a={0:"ms-item-icon ms-item-icon-spike",1:"ms-item-icon ms-item-icon-brand",2:"ms-item-icon ms-item-icon-shopping",3:"ms-item-icon ms-item-icon-fruit",4:"ms-item-icon ms-item-icon-brand-clear"},r=o.createClass({displayName:"ServiceDetail",getInitialState:function(){return{visible:!1,mainClass:i.hide}},getDefaultProps:function(){return{data:{},visible:!1}},componentWillMount:function(){},componentDidMount:function(){var e=this.props.visible||!1;e&&e!==this.state.visible&&this.show()},componentWillReceiveProps:function(e){var t=e.visible||!1;t&&t!==this.state.visible&&this.show()},show:function(){var e=this;this.setState({visible:!0},function(){n.ui.disableScroll("service-list"),setTimeout(function(){e.setState({mainClass:i.show})},150)})},hide:function(e){e.stopPropagation();var t=this;this.setState({mainClass:i.hide},function(){setTimeout(function(){t.setState({visible:!1}),n.ui.enableScroll(),t.props.hideServiceDetail&&n.util.call(t.props.hideServiceDetail)},300)})},defaultClick:function(e){e.stopPropagation()},render:function(){var e=this.props.data,t=this.props.tag,s={};this.state.visible===!1&&(s={display:"none"});var n=a[t]||"ms-item-icon",i=[];return e.forEach(function(e,t){i.push(o.createElement("div",{className:"service-item",key:t},o.createElement("span",{className:n}),o.createElement("span",{className:"service-item-name"},e.type),o.createElement("span",{className:"service-item-desc"},e.desc)))}),o.createElement("section",{className:"service-detail-bg",style:s,onClick:this.hide},o.createElement("div",{className:this.state.mainClass,onClick:this.defaultClick},o.createElement("div",{className:"service-title"},o.createElement("span",null,"服务说明"),o.createElement("div",{className:"service-close-btn",onClick:this.hide})),o.createElement("div",{id:"service-list"},i)))}});e.exports=r},"./components/widgets/ServiceDetail/style.scss":function(e,t){},"./components/widgets/GoodsMallCoupons/index.js":function(e,t,s){"use strict";var o=s("./components/vendor/react.min.js"),n="undefined"!=typeof window?s("./components/common/index.js"):{};"undefined"!=typeof window&&s("./components/widgets/GoodsMallCoupons/style.scss");var i=3,a=o.createClass({displayName:"GoodsMallCoupons",getInitialState:function(){return{}},getDefaultProps:function(){return{data:{}}},componentWillMount:function(){},componentDidMount:function(){},showCouponList:function(e){e&&e.stopPropagation();var t=this.props.data||[];this.props.showMallCouponList&&n.util.call(this.props.showMallCouponList,t)},render:function(){for(var e=this.props.data||[],t=[],s=0;s<e.length&&s<i;s++){var n=e[s];t.push(o.createElement("span",{className:"g-mall-coupons-item",key:s},n.batchName))}return o.createElement("div",{className:"g-mall-coupons-container",onClick:this.showCouponList},o.createElement("div",{className:"g-mall-coupons"},t))}});e.exports=a},"./components/widgets/GoodsMallCoupons/style.scss":function(e,t){},"./components/widgets/MallCouponList/index.js":function(e,t,s){"use strict";var o=s("./components/vendor/react.min.js"),n=s("./components/widgets/MallCouponListItem/index.js"),i="undefined"!=typeof window?s("./components/common/index.js"):{};"undefined"!=typeof window&&s("./components/widgets/MallCouponList/style.scss");var a={show:"mc-main mc-main-show",hide:"mc-main mc-main-hide"},r="领取成功",l=o.createClass({displayName:"MallCouponList",getInitialState:function(){return{visible:!1,mainClass:a.hide,coupons:[],toastVisible:!1,mainToast:"",subToast:"",receiveSuccess:!0}},getDefaultProps:function(){return{data:{},visible:!1}},componentWillMount:function(){this.props.data||[]},componentDidMount:function(){var e=this.props.visible||!1;e&&e!==this.state.visible&&this.show()},componentWillReceiveProps:function(e){var t=e.visible||!1;t&&t!==this.state.visible&&this.show()},show:function(){var e=this;this.setState({visible:!0},function(){i.ui.disableScroll("mc-list"),setTimeout(function(){e.setState({mainClass:a.show})},150)})},hide:function(e){e.stopPropagation();var t=this;this.setState({mainClass:a.hide},function(){setTimeout(function(){t.setState({visible:!1}),i.ui.enableScroll(),t.props.hideMallCouponList&&i.util.call(t.props.hideMallCouponList)},300)})},defaultClick:function(e){e.stopPropagation()},showToast:function(e,t){if(e){var s=this,o={};o.mainToast=e,t?(o.subToast=t,o.receiveSuccess=!1):(o.subToast="",o.receiveSuccess=!0),o.toastVisible=!0,this.setState(o),setTimeout(function(){s.setState({toastVisible:!1})},1500)}},receiveSuccess:function(e){var t=this.props.data[e].startTimeForToast,s=this.props.data[e].endTimeForToast,o=t+"-"+s+"可用";this.showToast(r,o)},receiveError:function(e,t,s){this.showToast(t,s)},render:function(){var e=this,t=this.props.data,s=this.props.mallName,i={};this.state.visible===!1&&(i={display:"none"});var a=[];t.forEach(function(t,s){a.push(o.createElement(n,{data:t,receiveSuccess:e.receiveSuccess,receiveError:e.receiveError,key:s}))});var r=!1;return this.state.toastVisible&&(r=this.state.receiveSuccess?o.createElement("div",{className:"mc-toast-success"},o.createElement("span",null,this.state.mainToast)):o.createElement("div",{className:"mc-toast-error"},o.createElement("span",{className:"mc-toast-main"},this.state.mainToast),o.createElement("span",{className:"mc-toast-sub","ms-if":"subToast"},this.state.subToast))),o.createElement("section",{className:"mc-bg",style:i,onClick:this.hide},r,o.createElement("div",{className:this.state.mainClass,onClick:this.defaultClick},o.createElement("div",{className:"mc-title"},o.createElement("span",null,s),o.createElement("div",{className:"service-close-btn",onClick:this.hide})),o.createElement("div",{id:"mc-list"},a)))}});e.exports=l},"./components/widgets/MallCouponListItem/index.js":function(e,t,s){"use strict";var o=s("./components/vendor/react.min.js"),o=s("./components/vendor/react.min.js"),n=s("./configs/app/error.js"),i="undefined"!=typeof window?s("./components/common/index.js"):{};"undefined"!=typeof window&&s("./components/widgets/MallCouponListItem/style.scss");var a={44025:["不能领取更多了","去看看别的券吧"],44026:["该券太火爆","全部已被领完"],44027:["好可惜，领券失败","领券活动刚刚结束哦"]},r="领取",l="已领完",c="已抢光",u={enable:"",disable:"mc-btn-disable"},d=!1,p=o.createClass({displayName:"MallCouponListItem",getInitialState:function(){return{canReceived:!0,receiveBtnClass:u.enable,receiveBtnText:r}},getDefaultProps:function(){return{data:{},receiveSuccess:null,receiveError:null}},componentWillMount:function(){var e=this.props.data,t={};e.couponDisableText&&(t.receiveBtnText=e.couponDisableText),e.canReceived?(t.receiveBtnClass=u.enable,t.receiveBtnText=r):t.receiveBtnClass=u.disable,t.canReceived=e.canReceived||!1,this.setState(t)},componentDidMount:function(){},getCoupon:function(e){if(e&&e.stopPropagation(),!d){var t=this,s=this.props.data;if(this.state.canReceived!==!1){d=!0;var o="take_merchant_coupon",r={mall_id:s.mallID,batch_id:s.batchID};if(!i.user.hasAccessToken()){var p=location.href;return void i.user.login(null,null,null,null,p,!0)}i.request.apiRequest("POST",o,r,function(e){d=!1,t.props.receiveSuccess&&i.util.call(t.props.receiveSuccess,s.index)},function(e){if(e){var o=a[e];t.props.receiveError&&(o?i.util.call(t.props.receiveError,s.index,o[0],o[1]):i.util.call(t.props.receiveError,s.index))}var r={};r.canReceived=!1,r.receiveBtnText=l,r.receiveBtnClass=u.disable,e===n.CouponTakenOut.code&&(r.receiveBtnText=c),t.setState(r),d=!1},null,null,!0)}}},render:function(){var e=this.props.data;return o.createElement("div",{className:"mc-item"},o.createElement("div",{className:"mc-left"},o.createElement("span",{className:"mc-discount"},o.createElement("i",null,"￥"),e.discount)),o.createElement("div",{className:"mc-middle"},o.createElement("span",{className:"mc-min"},"订单满",e.minAmount,"元可使用"),o.createElement("span",{className:"mc-expire"},"有效期 ",e.startTime,"-",e.endTime)),o.createElement("div",{className:"mc-right",onClick:this.getCoupon},o.createElement("span",{className:this.state.receiveBtnClass},this.state.receiveBtnText)))}});e.exports=p},"./components/widgets/MallCouponListItem/style.scss":function(e,t){},"./components/widgets/MallCouponList/style.scss":function(e,t){},"./components/widgets/GoodsMallInfo/index.js":function(e,t,s){"use strict";var o=s("./components/vendor/react.min.js"),n="undefined"!=typeof window?s("./components/common/navigation.js"):{},i="undefined"!=typeof window?s("./components/common/page/index.js"):{},a="undefined"!=typeof window?s("./components/common/util.js"):{},r="undefined"!=typeof window?s("./components/common/logger.js"):{},l=s("./constants/tracking/goods_detail_v2.js");"undefined"!=typeof window&&s("./components/widgets/GoodsMallInfo/style.scss");var c=o.createClass({displayName:"GoodsMallInfo",getInitialState:function(){return{}},getDefaultProps:function(){return{data:{}}},componentWillMount:function(){},componentDidMount:function(){},forwardMallPage:function(e){e&&e.stopPropagation();var t=this.props.goodsID,s=this.props.eventType,o=this.props.hasLocalGroup,c=this.props.data.mallID;i.setPageScrollPosition({},function(){var e=a.extend(l.MallBtnClick,{goods_id:t,has_local_group:o,event_type:s});r.trackingRecord(e,function(){n.forwardMallPage(c)})})},render:function(){var e=this.props.data,t=!!e.dsr&&o.createElement("div",{className:"goods-mall-dsr"},o.createElement("div",{className:"dsr-item text-left"},o.createElement("div",{className:"dsr-name"},"宝贝描述："),o.createElement("div",{className:"dsr-score"},e.dsr.descScore)),o.createElement("div",{className:"dsr-item text-center"},o.createElement("div",{className:"dsr-name"},"卖家服务："),o.createElement("div",{className:"dsr-score"},e.dsr.serviceScore)),o.createElement("div",{className:"dsr-item text-right"},o.createElement("div",{className:"dsr-name"},"物流服务："),o.createElement("div",{className:"dsr-score"},e.dsr.logisticsScore)));return o.createElement("div",{className:"goods-mall",onClick:this.forwardMallPage},o.createElement("div",{className:"goods-mall-main"},o.createElement("img",{src:e.logo}),o.createElement("div",{className:"goods-mall-info"},o.createElement("div",{className:"goods-mall-name"},e.mallName),o.createElement("span",null,"商品数量 ",e.goodsNum),o.createElement("span",null,"已团 ",e.soldQuantity)),o.createElement("div",{className:"goods-mall-btn"},o.createElement("span",null,"进店逛逛"))),t)}});e.exports=c},"./components/widgets/GoodsMallInfo/style.scss":function(e,t){},"./abtest/mallInfoDsr.js":function(e,t,s){"use strict";var o=s("./abtest/config/mallInfoDsr.js"),n=o.Rate,i=o.WhiteList||[];e.exports={isTester:function(e,t){return e=parseInt(e,10)||0,"m.hutaojie.com"===t||("panduoduo.yangkeduo.com"===t||!(0===e&&n<10)&&(i.indexOf(e)>=0||e%100/10<n))}}},"./abtest/config/mallInfoDsr.js":function(e,t,s){"use strict";var o=s("./abtest/config/whiteListUsers.js"),n=0,i=(0,o.getValues)(o.prod.TT).concat([o.prod.PM.XiaoRang,o.prod.PG.Xique_Phone,o.prod.PG.Xique_WeChat]);e.exports={Rate:n,WhiteList:i}},"./components/widgets/LocalGroup2/index.js":function(e,t,s){"use strict";var o=s("./components/vendor/react.min.js"),n=s("./components/widgets/LocalGroupItem3/index.js"),i="undefined"!=typeof window?s("./components/common/util.js"):{};"undefined"!=typeof window?s("./components/common/logger.js"):{},s("./constants/tracking/goods_detail_v2.js");"undefined"!=typeof window&&s("./components/widgets/LocalGroup2/style.scss");var a=o.createClass({displayName:"LocalGroup",getInitialState:function(){return{localGroups:[],groupOrderIDs:""}},getDefaultProps:function(){return{data:[]}},componentWillMount:function(){this.initData()},initData:function(){var e=[],t=[],s=this.props.data.localGroups,o=this.props.data.serverTime,n=this.props.data.requireNum;s.forEach(function(s,i){e.push({groupOrderID:s.groupOrderID,cityName:s.cityName,nickname:s.nickname,avatar:s.avatar,requireNum:n,usersNum:s.usersNum,expireTime:10*s.expireTime,serverTime:10*o}),t.push(s.groupOrderID)}),this.setState({localGroups:e,groupOrderIDs:t.join(",")})},componentDidMount:function(){},forwardOrderCheckout:function(e){e&&"function"==typeof this.props.forwardOrderCheckout&&i.call(this.props.forwardOrderCheckout,e)},getLocalGroupItemList:function(){var e=this,t=this.props.eventType,s=this.props.goodsID,i=this.state.localGroups,a=[];return i.forEach(function(i,r){a.push(o.createElement(n,{data:i,forwardOrderCheckout:e.forwardOrderCheckout,eventType:t,goodsID:s,key:r}))}),a},render:function(){var e="小伙伴在开团",t=this.getLocalGroupItemList();return o.createElement("div",{id:"g-local-groups"},o.createElement("p",null,e),t)}});e.exports=a},"./components/widgets/LocalGroupItem3/index.js":function(e,t,s){"use strict";var o=s("./components/vendor/react.min.js"),n="undefined"!=typeof window?s("./components/common/index.js"):{},i=s("./constants/tracking/goods_detail_v2.js");"undefined"!=typeof window&&s("./components/widgets/LocalGroupItem3/style.scss");var a=o.createClass({displayName:"LocalGroupItem",getInitialState:function(){return{serverTime:0,expireTime:0,leftDays:0,leftHours:0,leftMinutes:0,leftSeconds:0,leftMilliSeconds:0}},getDefaultProps:function(){return{data:[],eventType:0,goodsID:"",forwardOrderCheckout:function(){}}},padleft:function(e){return e<10?"0"+e:e},initData:function(e){var t=Math.max(e.expireTime-e.serverTime,0),s=Math.floor(t/10),o=Math.floor(s/60),n=Math.floor(o/60),i=Math.floor(n/24);i%=365,n=this.padleft(n%24),o=this.padleft(o%60),s=this.padleft(Math.floor(s%60)),t%=10,this.setState({serverTime:e.serverTime,expireTime:e.expireTime,leftDays:i,leftHours:n,leftMinutes:o,leftSeconds:s,leftMilliSeconds:t})},componentWillMount:function(){var e=this.props.data||{};this.initData(e)},componentDidMount:function(){this.changeEndTime()},changeEndTime:function(){var e=this;window.setInterval(function(){var t={serverTime:e.state.serverTime+1,expireTime:e.state.expireTime,leftDays:e.state.leftDays,leftHours:e.state.leftHours,leftMinutes:e.state.leftMinutes,leftSeconds:e.state.leftSeconds,leftMilliSeconds:e.state.leftMilliSeconds};e.initData(t)},100)},forwardGroup:function(e){e&&e.preventDefault();var t=this.props,s=t.eventType,o=t.goodsID,a=t.data.groupOrderID,r=n.url.getParameter("wt_id"),l=n.url.getParameter("et"),c=n.util.extend(i.JoinBtnClick,{goods_id:o,event_type:s});n.page.setPageScrollPosition({},function(){n.logger.trackingRecord(c,function(){var e=n.navigation.GroupUrl+"?"+n.url.buildQuery({group_order_id:a,wt_id:r,et:l,refer_page_name:"goods_detail",refer_page_element:"local_group"});n.user.ensureLogin(function(){n.navigation.forward(e)},null,e,!0)})})},forwardOrderCheckout:function(e){e&&e.preventDefault();var t=this.props.data.groupOrderID||"";t&&"function"==typeof this.props.forwardOrderCheckout&&n.util.call(this.props.forwardOrderCheckout,t)},render:function(){var e=this.props.data,t=!1;return t=this.state.leftDays>0?o.createElement("span",{className:"local-group-timer"},"还差",e.requireNum-e.usersNum,"人，剩余",this.state.leftDays,"天:",this.state.leftHours,":",this.state.leftMinutes,":",this.state.leftSeconds,".",this.state.leftMilliSeconds):o.createElement("span",{className:"local-group-timer"},"还差",e.requireNum-e.usersNum,"人，剩余",this.state.leftHours,":",this.state.leftMinutes,":",this.state.leftSeconds,".",this.state.leftMilliSeconds),o.createElement("div",{className:"local-group-item",onClick:this.forwardGroup},o.createElement("img",{className:"local-group-img",src:e.avatar}),o.createElement("div",{className:"local-group-detial"},o.createElement("div",{className:"local-group-detial-row1"},o.createElement("span",{className:"local-group-name"},e.nickname)),o.createElement("div",{className:"local-group-detial-row2"},t)),o.createElement("div",{className:"local-group-btn-border"},"去参团"))}});e.exports=a},"./components/widgets/LocalGroupItem3/style.scss":function(e,t){},"./components/widgets/LocalGroup2/style.scss":function(e,t){},"./components/widgets/LocalGroupHorizontal/index.js":function(e,t,s){"use strict";var o=s("./components/vendor/react.min.js"),n=s("./components/widgets/LocalGroupHorizontal/Item.js"),i="undefined"!=typeof window?s("./components/common/util.js"):{};"undefined"!=typeof window?s("./components/common/logger.js"):{},s("./constants/tracking/goods_detail_v2.js");"undefined"!=typeof window&&s("./components/widgets/LocalGroupHorizontal/style.scss");var a=5,r=o.createClass({displayName:"LocalGroupHorizontal",getInitialState:function(){return{localGroups:[],groupOrderIDs:"",timeDifference:0,now:0,isScrolling:!1,isTouching:!1}},getDefaultProps:function(){return{data:[],total:0}},componentWillMount:function(){var e=[],t=[],s=this.props.data.localGroups.slice(0,a),o=this.props.data.requireNum;s.forEach(function(s){e.push({groupOrderID:s.groupOrderID,cityName:s.cityName,nickname:s.nickname,avatar:s.avatar,requireNum:o,usersNum:s.usersNum,expireTime:10*s.expireTime}),t.push(s.groupOrderID)}),this.setState({localGroups:e,groupOrderIDs:t.join(",")})},componentDidMount:function(){function e(){t.state.isScrolling||t.state.isTouching||t.setState({now:Date.now()})}var t=this;setInterval(e,100);var s=Date.now();this.setState({timeDifference:1e3*this.props.data.serverTime-s,now:s})},forwardOrderCheckout:function(e){e&&"function"==typeof this.props.forwardOrderCheckout&&i.call(this.props.forwardOrderCheckout,e)},getLocalGroupItemList:function(){var e=this,t=this,s=this.props.eventType,i=this.props.goodsID,a=this.state.localGroups,r=[],l=this.state.now?Math.floor((this.state.now+this.state.timeDifference)/100):null;return a.forEach(function(a,c){r.push(o.createElement(n,{data:a,isSingleItem:1===e.props.total,clientTime:l,forwardOrderCheckout:t.forwardOrderCheckout,eventType:s,goodsID:i,key:c}))}),r},timerId:-1,onScrollStop:function(){this.setState({isScrolling:!1})},onScroll:function(){this.setState({isScrolling:!0}),clearTimeout(this.timerId),this.timerId=setTimeout(this.onScrollStop,150)},onTouchStart:function(){this.setState({isTouching:!0})},onTouchEnd:function(){this.setState({isTouching:!1})},render:function(){var e=this.props.total+"位小伙伴在开团",t=this.getLocalGroupItemList(),s=!1;return this.props.total>5&&(s=o.createElement("div",{className:"local-groups-hint"},"只显示"+a+"人")),o.createElement("div",{id:"g-local-groups3"},o.createElement("p",null,e),o.createElement("div",{className:"local-groups-scroller"},o.createElement("div",{className:"local-groups-container",onScroll:this.onScroll,onTouchStart:this.onTouchStart,onTouchEnd:this.onTouchEnd},t,s)))}});e.exports=r},"./components/widgets/LocalGroupHorizontal/Item.js":function(e,t,s){"use strict";var o=s("./components/vendor/react.min.js"),n="undefined"!=typeof window?s("./components/common/index.js"):{},i=s("./constants/tracking/goods_detail_v2.js");"undefined"!=typeof window&&s("./components/widgets/LocalGroupHorizontal/item.scss");var a=o.createClass({displayName:"LocalGroupItem",getInitialState:function(){return{}},getDefaultProps:function(){return{data:[],eventType:0,goodsID:"",isSingleItem:!0,clientTime:0,forwardOrderCheckout:function(){}}},padleft:function(e){return e<10?"0"+e:e},forwardGroup:function(e){e&&e.preventDefault();var t=this.props,s=t.eventType,o=t.goodsID,a=t.data.groupOrderID,r=n.url.getParameter("wt_id"),l=n.url.getParameter("et"),c=n.util.extend(i.JoinBtnClick,{goods_id:o,event_type:s});n.page.setPageScrollPosition({},function(){n.logger.trackingRecord(c,function(){var e=n.navigation.GroupUrl+"?"+n.url.buildQuery({group_order_id:a,wt_id:r,et:l,refer_page_name:"goods_detail",refer_page_element:"local_group"});n.user.ensureLogin(function(){n.navigation.forward(e)},null,e,!0)})})},forwardOrderCheckout:function(e){e&&e.preventDefault();var t=this.props.data.groupOrderID||"";t&&"function"==typeof this.props.forwardOrderCheckout&&n.util.call(this.props.forwardOrderCheckout,t)},render:function(){var e="local-group-item3";e+=this.props.isSingleItem?" local-group-item3-single":" local-group-item3-multiple";var t=this.props.data,s=!1;if(this.props.clientTime){var n=this.props.clientTime?Math.max(this.props.data.expireTime-this.props.clientTime,0):0,i=Math.floor(n/10),a=Math.floor(i/60),r=Math.floor(a/60),l=Math.floor(r/24),c=l%365,u=this.padleft(r%24),d=this.padleft(a%60),p=this.padleft(Math.floor(i%60)),m=n%10;s=c>0?o.createElement("div",{className:"local-group-timer"},"剩余",c,"天:",u,":",d,":",p,".",m):o.createElement("div",{className:"local-group-timer"},"剩余",u,":",d,":",p,".",m)}else s=o.createElement("div",{className:"local-group-timer"},"剩余--:--:--");return o.createElement("div",{className:e,onClick:this.forwardGroup},o.createElement("img",{className:"local-group-img",src:t.avatar}),o.createElement("div",{className:"local-group-detail"},o.createElement("div",{className:"local-group-name"},t.nickname),o.createElement("div",{className:"local-group-text"},"还差",t.requireNum-t.usersNum,"人"),s),o.createElement("div",{className:"local-group-btn-go"},"去参团"),o.createElement("div",{className:"splitter"}))}});e.exports=a},"./components/widgets/LocalGroupHorizontal/item.scss":function(e,t){},"./components/widgets/LocalGroupHorizontal/style.scss":function(e,t){},"./abtest/localGroupHorizontal.js":function(e,t,s){"use strict";var o=s("./abtest/config/localGroupHorizontal.js"),n=o.Rate,i=o.WhiteList||[];e.exports={isTester:function(e,t){return e=parseInt(e,10)||0,"m.hutaojie.com"===t||("panduoduo.yangkeduo.com"===t||!(0===e&&n<10)&&(i.indexOf(e)>=0||e%100/10<n))}}},"./abtest/config/localGroupHorizontal.js":function(e,t,s){"use strict";function o(e){return Object.keys(e).map(function(t){return e[t]})}var n=s("./abtest/config/whiteListUsers.js"),i=n.prod,a=0,r=o(i.PM).concat(o(i.VIP)).concat(o(i.PG)).concat(o(i.TT));e.exports={Rate:a,WhiteList:r}},"./components/widgets/Reviews2/index.js":function(e,t,s){"use strict";var o=s("./components/vendor/react.min.js"),n=s("./components/widgets/ReviewsItem2/index.js"),i="undefined"!=typeof window?s("./components/common/navigation.js"):{},a="undefined"!=typeof window?s("./components/common/logger.js"):{},r="undefined"!=typeof window?s("./components/common/util.js"):{},l="undefined"!=typeof window?s("./components/common/page/index.js"):{},c="undefined"!=typeof window?s("./components/common/url.js"):{},u=s("./components/common/ui/util.js"),d=s("./constants/tracking/goods_detail_v2.js"),p=(s("./constants/storage/index.js")||{}).SessionStorageKey;
"undefined"!=typeof window&&s("./components/widgets/Reviews2/style.scss");var m={bright:"goods-star star-bright",half:"goods-star star-half",dark:"goods-star star-dark"},g=5,h=o.createClass({displayName:"Reviews",getInitialState:function(){return{stars:[]}},getDefaultProps:function(){return{data:{}}},initStars:function(e){var t=0,s=0,o=[];e<=0?(t=0,s=0):e>=g?(t=g,s=0):(t=parseInt(e)||0,s=parseInt(10*e)%10);for(var n=0;n<t;n++)o.push({className:m.bright});s>=5&&o.push({className:m.half});var i=g-o.length;if(i>0)for(var a=0;a<i;a++)o.push({className:m.dark});this.setState({stars:o})},componentWillMount:function(){var e=this.props.data.commentsScore||0;this.initStars(e),this.showTags=function(e){for(var t=0,s=0;s<e.length;s++)e[s].positive&&t++;return t>=3}(this.props.data.tagList||[])},componentDidMount:function(){},forwardGoodsComments:function e(t){var s=null;if(t){t.stopPropagation();var o=(t.currentTarget.dataset,document.getElementById("grt-container")),n={};u.isNodeInPath(o,t.target,t.currentTarget,n)&&n&&n.lastMiddleNode&&n.lastMiddleNode.dataset&&(s=parseInt(n.lastMiddleNode.dataset.tag||0,10))}var m=c.getParameters();rawData.queries=m,rawData.subscribeData=this.props.subscribeData,r.saveToSessionStorage(p.GoodsDetailData,JSON.stringify(rawData));var e=function(){var e="goods_comments.html?"+c.buildQuery({goods_id:g,tag_id:s});i.forward(e)},g=this.props.data.goodsID,h=this.props.hasLocalGroup?"1":"0",f=this.props.eventType;l.setPageScrollPosition({},function(){s?a.trackingRecord(r.extend(d.CommentTagClick,{goods_id:g,tag_id:s}),e):a.trackingRecord(r.extend(d.CommentBtnClick,{goods_id:g,has_local_group:h,event_type:f}),e)})},render:function(){var e=this.props.data,t=this.state.stars||[],s=[];t.forEach(function(e,t){s.push(o.createElement("span",{className:e.className,key:t}))});var i=e.detailList||[],a=[];i.forEach(function(e,t){a.push(o.createElement(n,{data:e,key:t}))});var r=!1,l=!1,c=!1;r&&(l=o.createElement("div",{className:"goods-stars-list"},s),c=o.createElement("div",{className:"goods-reviews-score"},o.createElement("span",null,e.commentsScore,"分")));var u=!1;if(e.tagList&&this.showTags){var d=e.tagList.map(function(e,t){var s=e.positive?null:"grt-tag-inactive";return o.createElement("li",{key:"goods-reviews-tag-"+e.id,"data-tag":e.id,className:s,style:{display:e.positive?"inherit":"none"}},o.createElement("span",null,e.name),o.createElement("span",null,"(",e.number,")"))});u=o.createElement("div",{className:"goods-reviews-tags"},o.createElement("ul",{id:"grt-container",className:"grt-container"},d))}return o.createElement("div",{className:"goods-reviews-container",onClick:this.forwardGoodsComments},o.createElement("div",{className:"goods-reviews-title"},o.createElement("div",{className:"goods-reviews-num"},"商品评价",o.createElement("span",null,"(",e.commentsAmount,")")),o.createElement("span",{className:"goods-reviews-more"},"查看全部"),l,c),u,o.createElement("div",{className:"goods-reviews-list"},a))}});e.exports=h},"./components/widgets/ReviewsItem2/index.js":function(e,t,s){"use strict";var o=s("./components/vendor/react.min.js");"undefined"!=typeof window&&s("./components/widgets/ReviewsItem2/style.scss");var n=o.createClass({displayName:"ReviewsItem",getInitialState:function(){return{}},getDefaultProps:function(){return{data:{}}},componentWillMount:function(){},componentDidMount:function(){},render:function(){var e=this.props.data,t="reviews-item";e.index>0&&(t="reviews-item-bt");var s=!1;if(e.orderSpecs&&e.orderSpecs.length>0){var n=[];e.orderSpecs.forEach(function(e,t){n.push(o.createElement("div",{key:t},o.createElement("span",null,e.key,":"),o.createElement("span",null,e.value)))}),s=o.createElement("div",{className:"reviews-item-spec"},n)}return o.createElement("div",{className:t},o.createElement("div",{className:"reviews-item-title"},o.createElement("img",{src:e.avatar}),o.createElement("span",{className:"reviews-item-name"},e.name),o.createElement("span",{className:"reviews-item-time"},e.time2)),o.createElement("div",{className:"reviews-item-content"},e.comment),s)}});e.exports=n},"./components/widgets/ReviewsItem2/style.scss":function(e,t){},"./components/widgets/Reviews2/style.scss":function(e,t){},"./components/widgets/SkuSelector2/index.js":function(e,t,s){"use strict";var o=s("./components/vendor/react.min.js"),n=s("./configs/app/constant.js").SkuStatus,i=s("./constants/tracking/goods_detail_v2.js"),a="undefined"!=typeof window?s("./components/common/webviewDetector.js").default:{};"undefined"!=typeof window&&s("./components/widgets/SkuSelector2/style.scss");var r=void 0,l=void 0,c=void 0,u=void 0,d=void 0,p=void 0,m=void 0,g=void 0,h=void 0,f=void 0;r=s("./components/common/index.js"),l=r.logger.trackingRecord.bind(r),c=r.image.viewImages.bind(r),u=r.util.extend.bind(r),d=r.util.call.bind(r),p=r.ui.getWindowHeight.bind(r),m=r.ui.onWindowResize.bind(r),g=r.ui.disableScroll.bind(r),h=r.ui.enableScroll.bind(r),f=r.ui.showToast.bind(r);var v={show:"sku-selector-main sku-selector-main-show",focus:"sku-selector-main sku-selector-main-focus",hide:"sku-selector-main sku-selector-main-hide"},y={show:"sku-selector-main2",focus:"sku-selector-main2",hide:"sku-selector-main2 sku-selector-main-hide2"},b={free:0,selected:1,disable:2},k={free:"sku-spec-value",selected:"sku-spec-value sku-spec-value-selected",disable:"sku-spec-value sku-spec-value-disable"},_={enable:"sku-selector-reduce",disable:"sku-selector-reduce sku-selector-reduce-disable"},w={enable:"sku-selector-increase",disable:"sku-selector-increase sku-selector-increase-disable"},I=1e5,S={},E=[],D={},T={},N={},C=[],x={},L={},j=[],P=o.createClass({displayName:"SkuSelector",getInitialState:function(){return{visible:!1,mainClass:v.hide,bodyClass:"",skusByType:[],selectSku:"",currentSelect:{},skuNum:1,imgUrls:[],currentSkuImg:"",currentSkuImgLoading:!1,checkDisabled:{},isGroupBuy:!1,priceRange:[],price:0,specDesc:"",goodsNumber:1,increaseDisable:!1,reduceDisable:!0,increaseClass:w.enable,reduceClass:_.enable,clientHeight:0,showGoodsNumber:!1,goodsNumberInputJustBlur:!1,bodyScrollTopBeforeFocus:0,skuSelectorBodyScrollTopBeforeFocus:0,bodyScrollTopToAlleviateFlash:0}},getDefaultProps:function(){return{data:{},visible:!1,callback:null}},setCurrentSkuImg:function(e){this.state.currentSkuImg!==e&&this.setState({currentSkuImg:e})},setSpecdesc:function(){var e=E.length,t=this.state.currentSelect;if(!(e<=0)){for(var s=[],o=[],n=0;n<e;n++){var i=E[n];t[i]?o.push(t[i]):s.push(i)}var a="";a=s.length>0?"请选择 "+s.join(" "):"已选："+o.join(" "),this.setState({specDesc:a})}},setGoodsNumberButton:function(){var e=this.state.goodsNumber,t=I,s=this.state.selectSku,o={};if(s){var n=S[s];t=this.getLimitQuantity(n.quantity,n.limitQuantity)}e<=1?(o.reduceDisable=!0,o.reduceClass=_.disable):(o.reduceDisable=!1,o.reduceClass=_.enable),e>=t?(o.increaseDisable=!0,o.increaseClass=w.disable):(o.increaseDisable=!1,o.increaseClass=w.enable),this.setState(o)},collectStyles:function(e,t){for(var s=[],o=[],n=0;n<e.length;n++){var i=e[n];s.push(i.spec_key),o.push(i.spec_value)}for(var a={},r=[],n=0;n<s.length;n++){var l=s[n]||"",c=o[n]||"";if(!(l.length<=0||c.length<=0)){if(a[l]=c,null==D[l]){var u=E.length;D[l]=u,E[u]=l,C[u]=[],T[l]=[],N[l]={},j.push({type:l,values:[]})}if(null==N[l][c]){var u=D[l],d=T[l].length;N[l][c]=d,T[l][d]=c,j[u].values.push(c),C[u][d]=b.free}r[D[l]]=N[l][c]}}return x[t]=r,L[JSON.stringify(r)]=t,a},getSkuStatus:function(e){return e<=0?n.Unavailable:n.OnSale},checkCanSelect:function(e,t,s){var o={};for(var i in e)i!=E[t]?o[i]=e[i]:o[i]=T[i][s];for(var a in S)if(S[a].status!=n.Unavailable){var r=!0,l=S[a].style;for(var c in l)if(null!=o[c]&&o[c]!=l[c]){r=!1;break}if(r)return!0}return!1},getLimitQuantity:function(e,t){var s=this.props.data.orderLimit,o=s;return o>e&&e>0&&(o=e),o>t&&t>0&&(o=t),o},selectOneValue:function(e,t,s){var o=this,n={},i=D[e],a=N[e][t],r=this.state.currentSelect;if(C[i][a]!==b.disable){if(r[e]!==t||s){var l=N[e][r[e]];null!=l&&(C[i][l]=b.free),r[e]=t,C[i][a]=b.selected}else r[e]=null,C[i][a]=b.free;n.currentSelect=r;for(var c=[],u={},d=0;d<C.length;d++){var e=E[d];u[e]={};for(var p=0;p<C[d].length;p++){if(C[d][p]!=b.selected){var m=this.checkCanSelect(r,d,p);C[d][p]=m?b.free:b.disable}else c[d]=p;var t=T[e][p];u[e][t]=C[d][p]==b.disable}}var g=L[JSON.stringify(c)];if(null!=g){var h=S[g],f=this.state.goodsNumber;n.selectSku=g,n.currentSkuImgLoading=h.imgUrl,n.price=this.getPrice(this.state.priceRange,this.state.isGroupBuy,g);var v=this.getLimitQuantity(h.quantity,h.limitQuantity)||1;f>v&&(n.goodsNumber=v)}else if(n.selectSku="",n.price=this.getPrice(this.state.priceRange,this.state.isGroupBuy,""),n.currentSkuImgLoading=this.props.data.defaultImg,c.length>0){var y=null;for(var k in x){for(var _=x[k],m=!0,w=0;w<c.length;w++)if(void 0!==c[w]&&c[w]!==_[w]){m=!1;break}if(m){y=k;break}}S[y]&&(n.currentSkuImgLoading=S[y].imgUrl)}if("undefined"!=typeof window){var I=new Image;I.onload=function(e){return function(t){e===n.currentSkuImgLoading&&o.setCurrentSkuImg(e)}}(n.currentSkuImgLoading),I.src=n.currentSkuImgLoading}else n.currentSkuImg=n.currentSkuImgLoading;n.checkDisabled=u,this.setState(n,function(){o.setSpecdesc(),o.setGoodsNumberButton()})}},init:function(e){for(var t=this,s={},o=e.data,i=o.skus,a=[],r=[],l=0;l<i.length;l++){var c=i[l],u=c.skuID+"",d={skuID:u,imgUrl:c.thumbUrl,style:this.collectStyles(c.specs,u),status:this.getSkuStatus(c.quantity),quantity:c.quantity,limitQuantity:c.limitQuantity,normalPrice:c.normalPrice,groupPrice:c.groupPrice};d.status!=n.Unavailable&&a.push(u),S[u]=d,r.indexOf(c.thumbUrl)<0&&r.push(c.thumbUrl)}if(s.skusByType=j,s.isGroupBuy=o.isGroupBuy,s.priceRange=o.priceRange,s.price=this.getPrice(o.priceRange,o.isGroupBuy,this.state.selectSku),s.currentSkuImg=o.defaultImg,s.imgUrls=r,s.currentSelect={},s.showGoodsNumber=o.orderLimit>1,E.forEach(function(e,t){s.currentSelect[e]=null}),1===a.length){var p=a[0];s.selectSku=p;for(var l=0;l<x[p].length-1;l++){var m=x[p][l],g=E[l];s.currentSelect[g]=T[g][m],C[l][m]=b.selected}var h=x[p].length-1,m=x[p][h],g=E[h];this.setState(s,function(){t.selectOneValue(g,T[g][m],!0),t.setState({currentSkuImg:S[p].imgUrl})})}else{for(var f={},l=0;l<C.length;l++){var g=E[l];f[g]={};for(var v=0;v<C[l].length;v++){if(C[l][v]!=b.selected){var y=this.checkCanSelect(s.currentSelect,l,v);C[l][v]=y?b.free:b.disable}var k=T[g][v];f[g][k]=C[l][v]==b.disable}}s.checkDisabled=f,this.setState(s,function(){t.setSpecdesc(),t.setGoodsNumberButton()})}},componentWillMount:function(){this.init(this.props)},partialStateForIOSWkWebviewHack:function(){var e={};if(a.doHackOfIOSWkWebViewPositionFixedFailureByKeyboard){switch(v=y,this.state.mainClass){case v.show:e.mainClass=y.show;break;case v.focus:e.mainClass=y.focus;break;case v.hide:e.mainClass=y.hide;break;default:e.mainClass=y.hide}e.bodyClass="sku-selector-body2"}return e},componentDidMount:function(){this.props.visible&&this.show();var e=u(this.partialStateForIOSWkWebviewHack(),{clientHeight:p()}),t=this;this.setState(e,function(){m(t.windowResize)})},setBodyScrollTopBeforeFocusIfNecessary:function(){a.doHackOfIOSWkWebViewPositionFixedFailureByKeyboard&&this.state.goodsNumberInputJustBlur&&(document.body.scrollTop=this.state.bodyScrollTopBeforeFocus,this.setState({goodsNumberInputJustBlur:!1}))},componentDidUpdate:function(){this.setBodyScrollTopBeforeFocusIfNecessary()},windowResize:function(){var e=p(),t=this.state.clientHeight;if(e>=t){var s=document.getElementById("sku-input");s&&s.blur();var o=document.getElementById("sku-selector-body");o&&o.focus()}},componentWillReceiveProps:function(e){var t=this,s=e.visible||!1;s&&s!==this.state.visible&&(this.setState({priceRange:e.data.priceRange,price:t.getPrice(e.data.priceRange,e.data.isGroupBuy,t.state.selectSku),isGroupBuy:e.data.isGroupBuy}),this.show())},getPrice:function(e,t,s){var o=e.join("-");return s&&(o=t?S[s].groupPrice:S[s].normalPrice),o},show:function(){var e=this;this.setState({visible:!0},function(){g("sku-selector-body"),setTimeout(function(){e.setState({mainClass:v.show})},150)})},handlerHideClik:function(e,t,s){s&&s.stopPropagation();var o=this.props.goodsID,n=this.props.hasLocalGroup,a=this.props.eventType;l("group"===e?u(t,{op:"click",page_section:"sku_selector",page_element:"close_btn"}):u(i.SkuSelectorClick,{page_element:"close_btn",goods_id:o,has_local_group:n,eventType:a})),this.hide()},hide:function(e,t){t&&t.stopPropagation();var s=this;this.setState({mainClass:v.hide},function(){setTimeout(function(){s.setState({visible:!1}),h(),"function"==typeof e?d(e):"function"==typeof s.props.callback&&d(s.props.callback)},150)})},defaultClick:function(e){e.stopPropagation()},selectSpec:function(e,t,s){s&&s.stopPropagation();var o=E[e],n=T[o][t];this.selectOneValue(o,n)},goodsNumberBlur:function(e){var t=this,s=this.state.goodsNumber,o=I,n=this.state.selectSku;if(this.state.visible&&this.setState({mainClass:v.show,goodsNumberInputJustBlur:!0}),n){var i=S[n];o=this.getLimitQuantity(i.quantity,i.limitQuantity)}s<1&&this.setState({goodsNumber:1},function(){t.setGoodsNumberButton()}),s>o&&(this.setState({goodsNumber:o},function(){t.setGoodsNumberButton()}),f("数量超出范围")),this.setGoodsNumberButton()},goodsNumberFocus:function(){this.setState({mainClass:v.focus,bodyScrollTopBeforeFocus:document.body.scrollTop})},goodsNumberChange:function(e){var t=0;e&&(t=parseInt(e.target.value,10)||0),this.setState({goodsNumber:t})},updateGoodsNumber:function(e){var t=this,s=this.state.goodsNumber,o=I,n=this.state.selectSku;if(n){var i=S[n];o=this.getLimitQuantity(i.quantity,i.limitQuantity)}this.setState({goodsNumber:s+e},function(){t.setGoodsNumberButton()})},reduceGoodsNumber:function(e){e&&e.stopPropagation(),this.state.reduceDisable||this.updateGoodsNumber(-1)},increaseGoodsNumber:function(e){e&&e.stopPropagation(),this.state.increaseDisable||this.updateGoodsNumber(1)},confirmSku:function(e,t,s){s&&s.stopPropagation();var o=this.props.goodsID,n=this.props.hasLocalGroup,a=this.props.eventType;l("group"===e?u(t,{op:"click",page_section:"sku_selector",page_element:"confirm_btn"}):u(i.SkuSelectorClick,{page_element:"confirm_btn",goods_id:o,has_local_group:n,event_type:a}));var r=this;return this.state.selectSku?void this.hide(function(){"function"==typeof r.props.callback&&d(r.props.callback,r.state.selectSku,r.state.goodsNumber)}):void f(this.state.specDesc)},viewImages:function(e){e&&e.stopPropagation();var t=this.state.currentSkuImg;c(t)},render:function(){var e=this,t=(this.props.data,{});this.state.visible===!1&&(t={display:"none"});var s=[],n=this.state.skusByType,i=this.props.page,a=this.props.trackingParams;n.forEach(function(t,n){var i=[];t.values.forEach(function(s,a){var r=k.free;e.state.checkDisabled[t.type]&&e.state.checkDisabled[t.type][s]&&(r=k.disable),e.state.currentSelect[t.type]===s&&(r=k.selected),i.push(o.createElement("span",{className:r,key:a,onClick:e.selectSpec.bind(e,n,a)},s))}),s.push(o.createElement("div",{className:"sku-specs",key:n},o.createElement("span",{className:"sku-specs-key"},t.type),o.createElement("div",{className:"sku-spec-value-list"},i)))});var r=!1;return this.state.showGoodsNumber&&(r=o.createElement("div",{className:"sku-selector-number"},o.createElement("span",null,"数量"),o.createElement("div",{className:this.state.reduceClass,onClick:this.reduceGoodsNumber}),o.createElement("input",{id:"sku-input",className:"sku-selector-input",type:"number",maxLength:"5",value:this.state.goodsNumber,onFocus:this.goodsNumberFocus,onBlur:this.goodsNumberBlur,onChange:this.goodsNumberChange}),o.createElement("div",{className:this.state.increaseClass,onClick:this.increaseGoodsNumber}))),o.createElement("section",{className:"sku-selector-bg",style:t,onClick:this.hide},o.createElement("div",{className:this.state.mainClass,onClick:this.defaultClick},o.createElement("div",{className:"sku-selector-container"},o.createElement("div",{className:"sku-selector-head"},o.createElement("img",{src:this.state.currentSkuImg,onClick:this.viewImages}),o.createElement("div",{className:"sku-selector-head-content"},o.createElement("div",{className:"sku-selector-price"},"￥",this.state.price),o.createElement("div",{className:"sku-selector-desc"},this.state.specDesc)),o.createElement("div",{className:"sku-selector-close-btn",onClick:this.handlerHideClik.bind(this,i,a)})),o.createElement("div",{id:"sku-selector-body",className:this.state.bodyClass},s,r),o.createElement("div",{className:"sku-selector-bottom",onClick:this.confirmSku.bind(this,i,a)},"确定"))))}});e.exports=P},"./components/widgets/SkuSelector2/style.scss":function(e,t){},"./components/widgets/GoodsBottomBar2/index.js":function(e,t,s){"use strict";var o=s("./components/vendor/react.min.js"),n="undefined"!=typeof window?s("./components/common/index.js"):{},i=s("./configs/index.js").app.constant,a=s("./constants/tracking/goods_detail_v2.js"),r=s("./constants/spike.js");"undefined"!=typeof window&&s("./components/widgets/GoodsBottomBar2/style.scss");var l={liked:"goods-like-button",unliked:"goods-unlike-button"},c={liked:"已收藏",unliked:"收藏"},u=80,d=10,p=5,m=!1,g={showBubble:null,hideBubble:null},h=o.createClass({displayName:"GoodsBottomBar",getInitialState:function(){return{likeClass:l.unliked,likeText:c.unliked,hasBubble:!1,sessionKey:"goods_bubble"}},getDefaultProps:function(){return{data:{},groupBuy:null,directBuy:null,groupBuyOrPromptShare:null}},componentWillMount:function(){},componentDidMount:function(){var e=this,t=this.props.data.goodsID,s=n.url.getParameter("like_flag");this.setLikeClass(t,function(t){s&&!t&&e.goodsLike(),s&&n.navigation.replaceURL(n.url.buildURL({like_flag:null}))}),m&&e.initBubble(u,d,p)},setLikeClass:function(e,t){var s=n.likeUtil.checkGoodsLike(e);this.setState({likeClass:s?l.liked:l.unliked,likeText:s?c.liked:c.unliked}),"function"==typeof t&&n.util.call(t,s)},goodsLike:function(e){e&&e.stopPropagation();var t=this,s=this.props.data.goodsID,o=this.props.data.eventType,i=this.props.data.hasLocalGroup?"1":"0";if(!n.likeUtil.isGoodsLikeDoing()){var r=location.href+"&like_flag=true",l=function(){n.navigation.forward(r)};if(n.likeUtil.checkLogin(l,r,!0)){var c=n.likeUtil.checkGoodsLike(s),u=n.util.extend(a.LikeClick,{goods_id:s,is_like:c?1:0,has_local_group:i,event_type:o});n.logger.trackingRecord(u),c?n.likeUtil.cancelGoodsLike(s,function(){t.setLikeClass(s)}):n.likeUtil.doGoodsLike(s,function(){t.setLikeClass(s)})}}},groupBuy:function(e){e&&e.stopPropagation(),"function"==typeof this.props.groupBuy&&n.util.call(this.props.groupBuy)},directBuy:function(e){e&&e.stopPropagation(),"function"==typeof this.props.directBuy&&n.util.call(this.props.directBuy)},groupBuyOrPromptShare:function(e){e&&e.stopPropagation();var t=this.props.data;if(t.inGroup){var s=n.url.getParameter("group_order_id"),o=n.url.getParameter("wt_id"),i=n.url.getParameter("et");return void n.navigation.forward(n.navigation.GroupUrl+"?"+n.url.buildQuery({group_order_id:s,wt_id:o,et:i}))}"function"==typeof this.props.groupBuy&&n.util.call(this.props.groupBuy)},toMessage:function(e,t){e&&e.stopPropagation();var s=this.props.data,o=s.mallID,r=s.goodsID,l=s.goodsName,c=s.thumbUrl,u=s.groupPrice,d=s.soldQuantity,p=s.customerNumber,m=s.officialMallID,g=s.guestAvatar,h=s.guestName,f=s.mallName,v=s.mallAvatar,y=s.chatDomain,b=s.canContact,k=s.hasLocalGroup?"1":"0",_=s.eventType;return t||n.logger.trackingRecord(n.util.extend(a.IconClick,{page_element:"customer_service",goods_id:r,has_local_group:k,event_type:_})),b?n.platform.isNativeChatVersion?void(n.user.hasAccessToken()?n.request.apiRequest("GET","user/me",null,function(e){var t,s="mall/"+o+"/info?check_merchant_coupon=no";n.request.apiRequest("GET",s,null,function(s){t=o!==m?s.offline_note||i.Mall.NoCSOnline.NormalMall:s.offline_note||i.Mall.NoCSOnline.DefaultMall;var a={chat:{goods_id:r,mall_id:o,user_nickname:e.nickname||h,user_avatar:e.avatar||g,goods_name:l,goods_thumb_url:c,goods_price:u,sold_quantity:d,customer_number:p,mall_name:f,mall_avatar:v,offline_note:t,websocket_url:y,access_token:n.user.getAccessToken(),from:"goods",official_mall_id:m}};n.navigation.forwardChatPage(a)})}):n.user.login(null,null,null,null,"goods.html?"+n.url.buildQuery({goods_id:r,chat:"chat"}))):void n.navigation.forward("chat_detail.html?"+n.url.buildQuery({mall_id:o,goods_id:r})):void n.ui.showToast(i.Mall.NoCS)},toHome:function(e){e&&e.stopPropagation();var t=this.props.data,s=t.goodsID,o=t.hasLocalGroup?"1":"0",i=t.eventType;n.logger.trackingRecord(n.util.extend(a.IconClick,{page_element:"return_index",goods_id:s,has_local_group:o,event_type:i}),function(){n.navigation.home()})},goLotteryList:function(e){e&&e.stopPropagation();var t=this.props.data;if((2===t.luckyStatus||3===t.luckyStatus)&&t.luckyID>0)return void n.navigation.forward("lottery_list.html?"+n.url.buildQuery({lucky_id:t.luckyID}))},downloadApp:function(e){e&&e.stopPropagation(),n.navigation.forward(r.appDownloadURL)},setBubble:function(e,t,s){function o(){a.setState({hasBubble:!0}),clearTimeout(g.showBubble),g.showBubble=null,m.op="impr",n.logger.trackingRecord(m),u[r]=!0,c=JSON.stringify(u)||"",n.util.saveToSessionStorage(l,c),g.hideBubble=setTimeout(i,1e3*s)}function i(){a.setState({hasBubble:!1}),clearTimeout(g.hideBubble),g.hideBubble=null}var a=this,r=this.props.data.goodsID,l=a.state.sessionKey,c=n.util.loadFromSessionStorage(l)||"{}",u=JSON.parse(c),d=parseInt(a.props.data.groupPrice,10),p=a.props.data.mallChatEnable,m=a.props.highPriceBubbleTrackingParams;u[r]||d<e||!p||(g.showBubble=setTimeout(o,1e3*t))},bubbleToMessage:function(){var e=this,t=e.props.highPriceBubbleTrackingParams,s=function(){e.toMessage(null,!0)};t.op="click",n.logger.trackingRecord(t,s)},initBubble:function(e,t,s){var o=this,i=this.props.data.goodsID,a=o.state.sessionKey,r=n.util.loadFromSessionStorage(a)||"{}",l=JSON.parse(r);l[i]=!1,r=JSON.stringify(l)||"",n.util.saveToSessionStorage(a,r),window.addEventListener("pagehide",function(e){o.setState({hasBubble:!1}),g.showBubble&&clearTimeout(g.showBubble),g.hideBubble&&clearTimeout(g.hideBubble)}),window.addEventListener("pageshow",function(n){o.setBubble(e,t,s)})},render:function(){var e=this.props.data,t=e.isOnSale||!1,s=e.isFreeTrial||!1,n=e.isDepositeGroup||!1,i=e.isLottery||!1,a=e.spikeComing||!1,r=e.lotteryComing||!1,l=e.resultOn||"",c=e.hasFreeCoupons||!1,u=e.hasCaptainCoupons||!1,d=e.hasAssociatedGroup||!1,p=e.isCapitalGift||!1,g=e.isCapitalGiftLottery||!1,h=e.isSpike||!1,f=e.isSuperSpike||!1,v=e.isApp||!1,y=e.isNativePlatform||!1,b=e.resultLabel||"",k=e.lotteryWaitingLabel||"",_=e.eventComingLabel||"",w=(e.groupbuyDesc||"开团购买",e.groupRoleDesc||""),I=e.normalPrice||"",S=e.groupPrice||"",E=(e.customerNumber||"",e.totalPrice||""),D="一键开团",T=this.state.hasBubble;if(T)var N=o.createElement("div",{className:"goods-bubble",onClick:this.bubbleToMessage},"有疑问可前往咨询店铺客服哦");if(i||s||n){if(r)return o.createElement("div",{className:"goods-bottom-bar"},o.createElement("div",{className:"goods-home-button",onClick:this.toHome},o.createElement("span",null,"首页")),o.createElement("div",{className:this.state.likeClass,onClick:this.goodsLike},o.createElement("span",null,this.state.likeText)),o.createElement("div",{className:"goods-chat-button",onClick:this.toMessage},o.createElement("span",null,"客服")),o.createElement("div",{className:"goods-event-coming-btn"},_.join(" ")));if("on"===l)return o.createElement("div",{className:"goods-bottom-bar"},o.createElement("div",{className:"goods-home-button",onClick:this.toHome},o.createElement("span",null,"首页")),o.createElement("div",{className:this.state.likeClass,onClick:this.goodsLike},o.createElement("span",null,this.state.likeText)),o.createElement("div",{className:"goods-chat-button",onClick:this.toMessage},o.createElement("span",null,"客服")),o.createElement("div",{className:"goods-lottery-result-btn",onClick:this.goLotteryList},b));if("waiting"===l)return o.createElement("div",{className:"goods-bottom-bar"},o.createElement("div",{className:"goods-home-button",onClick:this.toHome},o.createElement("span",null,"首页")),o.createElement("div",{className:this.state.likeClass,onClick:this.goodsLike},o.createElement("span",null,this.state.likeText)),o.createElement("div",{className:"goods-chat-button",onClick:this.toMessage},o.createElement("span",null,"客服")),o.createElement("div",{className:"goods-lottery-waiting-btn"},k));if(!d&&!g)return o.createElement("div",{className:"goods-bottom-bar"},o.createElement("div",{className:"goods-home-button",onClick:this.toHome},o.createElement("span",null,"首页")),o.createElement("div",{className:this.state.likeClass,onClick:this.goodsLike},o.createElement("span",null,this.state.likeText)),o.createElement("div",{className:"goods-chat-button",onClick:this.toMessage},o.createElement("span",null,"客服")),o.createElement("div",{className:"goods-direct-btn",onClick:this.directBuy},o.createElement("span",{className:"goods-buy-price"},o.createElement("i",null,"￥"),I),o.createElement("span",null,"单独购买")),o.createElement("div",{className:"goods-group-btn",onClick:this.groupBuy},o.createElement("span",{className:"goods-buy-price"},o.createElement("i",null,"￥"),S),o.createElement("span",null,D)));if(!d&&g)return o.createElement("div",{className:"goods-bottom-bar"},o.createElement("div",{className:"goods-home-button",onClick:this.toHome},o.createElement("span",null,"首页")),o.createElement("div",{className:this.state.likeClass,onClick:this.goodsLike},o.createElement("span",null,this.state.likeText)),o.createElement("div",{className:"goods-chat-button",onClick:this.toMessage},o.createElement("span",null,"客服")),o.createElement("div",{className:"goods-direct-btn",onClick:this.directBuy},o.createElement("span",{className:"goods-buy-price"},o.createElement("i",null,"￥"),I),o.createElement("span",null,"单独购买")),o.createElement("div",{className:"goods-group-btn",onClick:this.groupBuy},o.createElement("span",{className:"goods-buy-price"},o.createElement("i",null,"￥"),E),o.createElement("span",null,"开团送礼")))}else if(h||f){if(h&&(a||t)&&v&&!y)return o.createElement("div",{className:"goods-bottom-bar"},o.createElement("div",{className:"goods-home-button",onClick:this.toHome},o.createElement("span",null,"首页")),o.createElement("div",{className:this.state.likeClass,onClick:this.goodsLike},o.createElement("span",null,this.state.likeText)),o.createElement("div",{className:"goods-chat-button",onClick:this.toMessage},o.createElement("span",null,"客服")),o.createElement("div",{className:"goods-download-btn",onClick:this.downloadApp},a?"提前下载App":"下载App"));if(a&&!t)return o.createElement("div",{className:"goods-bottom-bar"},o.createElement("div",{className:"goods-home-button",onClick:this.toHome},o.createElement("span",null,"首页")),o.createElement("div",{className:this.state.likeClass,onClick:this.goodsLike},o.createElement("span",null,this.state.likeText)),o.createElement("div",{className:"goods-chat-button",onClick:this.toMessage},o.createElement("span",null,"客服")),o.createElement("div",{className:"goods-event-coming-btn"},_.join(" ")));if(a&&t)return o.createElement("div",{className:"goods-bottom-bar"},o.createElement("div",{className:"goods-home-button",onClick:this.toHome},o.createElement("span",null,"首页")),o.createElement("div",{className:this.state.likeClass,onClick:this.goodsLike},o.createElement("span",null,this.state.likeText)),o.createElement("div",{className:"goods-chat-button",onClick:this.toMessage},o.createElement("span",null,"客服")),o.createElement("div",{className:"goods-direct-btn",onClick:this.directBuy},o.createElement("span",{className:"goods-buy-price"},o.createElement("i",null,"￥"),I),o.createElement("span",null,"单独购买")),o.createElement("div",{className:"goods-event-coming-s-btn"},o.createElement("span",null,_[0]),o.createElement("span",{className:"g-ec-line2"},_[1])))}return t?d?o.createElement("div",{className:"goods-bottom-bar"},o.createElement("div",{className:"goods-home-button",onClick:this.toHome},o.createElement("span",null,"首页")),o.createElement("div",{className:this.state.likeClass,onClick:this.goodsLike},o.createElement("span",null,this.state.likeText)),o.createElement("div",{className:"goods-chat-button",onClick:this.toMessage},o.createElement("span",null,"客服")),o.createElement("div",{className:"goods-group-buy-button",onClick:this.groupBuyOrPromptShare},w)):c?o.createElement("div",{className:"goods-bottom-bar"},o.createElement("div",{className:"goods-home-button",onClick:this.toHome},o.createElement("span",null,"首页")),o.createElement("div",{className:this.state.likeClass,onClick:this.goodsLike},o.createElement("span",null,this.state.likeText)),o.createElement("div",{className:"goods-chat-button",onClick:this.toMessage},o.createElement("span",null,"客服")),o.createElement("div",{className:"goods-group-buy-button",onClick:this.groupBuy},"团长免费开团")):u?o.createElement("div",{className:"goods-bottom-bar"},o.createElement("div",{className:"goods-home-button",onClick:this.toHome},o.createElement("span",null,"首页")),o.createElement("div",{className:this.state.likeClass,onClick:this.goodsLike},o.createElement("span",null,this.state.likeText)),o.createElement("div",{className:"goods-chat-button",onClick:this.toMessage},o.createElement("span",null,"客服")),o.createElement("div",{className:"goods-group-buy-button",onClick:this.groupBuy},"一元换购")):p?o.createElement("div",{className:"goods-bottom-bar"},o.createElement("div",{className:"goods-home-button",onClick:this.toHome},o.createElement("span",null,"首页")),o.createElement("div",{className:this.state.likeClass,onClick:this.goodsLike},o.createElement("span",null,this.state.likeText)),o.createElement("div",{className:"goods-chat-button",onClick:this.toMessage},o.createElement("span",null,"客服")),o.createElement("div",{className:"goods-direct-btn",onClick:this.directBuy},o.createElement("span",{className:"goods-buy-price"},o.createElement("i",null,"￥"),I),o.createElement("span",null,"单独购买")),o.createElement("div",{className:"goods-group-btn",onClick:this.groupBuy},o.createElement("span",{className:"goods-buy-price"},o.createElement("i",null,"￥"),E),o.createElement("span",null,"开团送礼"))):(m=!0,o.createElement("div",{className:"goods-bottom-bar"},o.createElement("div",{className:"goods-home-button",onClick:this.toHome},o.createElement("span",null,"首页")),o.createElement("div",{className:this.state.likeClass,onClick:this.goodsLike},o.createElement("span",null,this.state.likeText)),o.createElement("div",{className:"goods-chat-button",onClick:this.toMessage},o.createElement("span",null,"客服")),o.createElement("div",{className:"goods-direct-btn",onClick:this.directBuy},o.createElement("span",{className:"goods-buy-price"},o.createElement("i",null,"￥"),I),o.createElement("span",null,"单独购买")),o.createElement("div",{className:"goods-group-btn",onClick:this.groupBuy},o.createElement("span",{className:"goods-buy-price"},o.createElement("i",null,"￥"),S),o.createElement("span",null,D)),N)):o.createElement("div",{className:"goods-bottom-bar"},o.createElement("div",{className:"goods-home-button",onClick:this.toHome},o.createElement("span",null,"首页")),o.createElement("div",{className:this.state.likeClass,onClick:this.goodsLike},o.createElement("span",null,this.state.likeText)),o.createElement("div",{className:"goods-chat-button",onClick:this.toMessage},o.createElement("span",null,"客服")),o.createElement("div",{className:"goods-out-btn"},"已售罄"))}});e.exports=h},"./constants/spike.js":function(e,t){"use strict";var s=180;e.exports={appDownloadURL:"download.html?src=weixin&campaign=miaosha&cid=appzhuanxiang1yuan",RemindConstants:{REMIND_PREFIX:"spike_",BEFORE_TIME:s,LANG_REMIND:"开抢前"+s/60+"分钟将会提醒您哦",LANG_CANCEL_REMIND:"提醒已取消，您可能会抢不到哦",RemindInfo:{Title:"您有一个秒杀提醒，即将开抢",contentUrl:"native_forward?type=pdd_goods_detail&goods_id={0}"}}}},"./components/widgets/GoodsBottomBar2/style.scss":function(e,t){},"./components/widgets/MallRecommend/index.js":function(e,t,s){"use strict";var o=s("./components/vendor/react.min.js"),n=s("./components/widgets/MallRecommendItem/index.js"),i="undefined"!=typeof window?s("./components/common/index.js"):{};"undefined"!=typeof window&&s("./components/widgets/MallRecommend/style.scss");
var a=o.createClass({displayName:"MallRecommend",getInitialState:function(){return{recommendList:[]}},getDefaultProps:function(){return{list:[]}},componentWillMount:function(){for(var e=this.props.list,t=[],s=[],o=0;o<e.length;o++)s.push(e[o]),s.length>=3&&(t.push(s),s=[]);s.length>0&&(t.push(s),s=[]),this.setState({recommendList:t})},componentDidMount:function(){window.addEventListener("scroll",this.onScroll,!1),this.onScroll()},getOffsetTopOnBody:function(e){for(var t=0;e;)t+=e.offsetTop,e=e.offsetParent;return t},onScroll:function(){for(var e=document.body.scrollTop,t=i.ui.getWindowHeight(),s=Math.max(e-t,0),o=e+t,n=document.querySelectorAll(".mall-recommend img")||[],a=0;a<n.length;a++){var r=n[a];if(r.dataset&&r.dataset.url&&r.src!==r.dataset.url){var l=this.getOffsetTopOnBody(r)||0;if(l>=s&&l<=o)r.src=r.dataset.url;else if(l>o)break}}},render:function(){var e=this.state.recommendList,t=[];return e.forEach(function(e,s){var i=[];e.forEach(function(e,t){e.raw=s,e.col=t,i.push(o.createElement(n,{data:e,key:t}))}),t.push(o.createElement("ul",{key:s},i))}),o.createElement("div",{className:"mall-recommend"},o.createElement("span",{className:"mall-recommend-title"},"店铺推荐"),o.createElement("div",{className:"mall-recommend-main"},t))}});e.exports=a},"./components/widgets/MallRecommendItem/index.js":function(e,t,s){"use strict";var o=s("./components/vendor/react.min.js"),n=s("./constants/constant_ui.js").ImgBase64,i="undefined"!=typeof window?s("./components/common/index.js"):{};"undefined"!=typeof window&&s("./components/widgets/MallRecommendItem/style.scss");var a=o.createClass({displayName:"MallRecommendItem",getInitialState:function(){return{imgUrl:n.DefaultSquare}},getDefaultProps:function(){return{data:{}}},componentWillMount:function(){},componentDidMount:function(){},handleGoodsClick:function(e){e&&e.stopPropagation();var t=this.props.data,s=i.url.getParameter("group_order_id"),o="goods.html?"+i.url.buildQuery({goods_id:t.goodsID,rec_from_group:s});i.page.setPageScrollPosition({},function(){t.trackingParams?i.logger.trackingRecord(t.trackingParams,function(){i.navigation.forward(o)}):i.navigation.forward(o)})},render:function(){var e=this.props.data;return o.createElement("li",{className:"mall-recommend-item",onClick:this.handleGoodsClick},o.createElement("img",{src:this.state.imgUrl,"data-url":e.imgUrl}),o.createElement("span",{className:"mr-goods-name"},e.goodsName),o.createElement("div",{className:"mr-goods-detail"},o.createElement("span",{className:"mr-price"},o.createElement("i",null,"￥"),e.price),o.createElement("span",{className:"mr-sales"},"已团",e.formatCnt,"件")))}});e.exports=a},"./components/widgets/MallRecommendItem/style.scss":function(e,t){},"./components/widgets/MallRecommend/style.scss":function(e,t){},"./components/widgets/GoodsDetailList2/index.js":function(e,t,s){"use strict";var o=s("./components/vendor/react.min.js"),n=s("./constants/constant_ui.js").ImgBase64,i="undefined"!=typeof window?s("./components/common/index.js"):{};"undefined"!=typeof window&&s("./components/widgets/GoodsDetailList2/style.scss");var a={Height:300,Width:640},r=o.createClass({displayName:"GoodsDetailList",getInitialState:function(){return{defaultImg:n.Default,detailList:[]}},getDefaultProps:function(){return{data:{}}},componentWillMount:function(){var e=this.props.data;this.setState({detailList:e})},onScroll:function(){for(var e=document.body.scrollTop,t=i.ui.getWindowHeight(),s=document.querySelector(".goods-details").offsetTop,o=e-s,n=o+t,r=document.querySelectorAll(".gd-item")||[],l=this.state.detailList,c=0;c<r.length;c++){var u=r[c].offsetTop;if(u>=o&&u<=n){var d=r[c].getElementsByTagName("img")[0];d&&d.dataset.url&&d.src!=d.dataset.url&&(d.src=d.dataset.url),0!=l[c].paddingTop&&(l[c].paddingTop=0),0!=l[c].marginLeft&&(l[c].marginLeft=0),l[c].defaultWidth!=a.Width&&(l[c].defaultWidth=a.Width),"auto"!=l[c].defaultHeight&&(l[c].defaultHeight="auto")}}this.setState({detailList:l})},componentDidMount:function(){window.addEventListener("scroll",this.onScroll,!1),this.onScroll()},render:function(){var e=this,t=(this.props.data,[]);return this.state.detailList.forEach(function(s,n){var i={height:s.height},a={width:s.defaultWidth,height:s.defaultHeight,paddingTop:s.paddingTop,marginLeft:s.marginLeft};t.push(o.createElement("li",{className:"gd-item",style:i,key:n},o.createElement("img",{className:"gd-img",src:e.state.defaultImg,"data-url":s.url,style:a})))}),o.createElement("div",{className:"goods-details"},o.createElement("p",null,"商品详情"),t)}});e.exports=r},"./components/widgets/GoodsDetailList2/style.scss":function(e,t){},"./components/widgets/GoodsPriceDescription/index.js":function(e,t,s){"use strict";var o=s("./components/vendor/react.min.js");"undefined"!=typeof window&&s("./components/widgets/GoodsPriceDescription/style.scss");var n=o.createClass({displayName:"GoodsPriceDescription",getInitialState:function(){return{showDetail:!1}},getDefaultProps:function(){return{}},componentWillMount:function(){},componentDidMount:function(){},showDetail:function(e){e&&e.preventDefault(),this.setState({showDetail:!0})},render:function(){var e=this.state.showDetail||!1;return e?o.createElement("div",{className:"g-price-desc-detail"},o.createElement("p",null,"价格说明"),o.createElement("ul",null,o.createElement("li",null,o.createElement("i",null,"单独购买价："),"是您单独购买商品的价格"),o.createElement("li",null,o.createElement("i",null,"一键开团价："),"是您拼团购买商品的价格"),o.createElement("li",null,o.createElement("i",null,"划线价："),"可能是商品的专柜价、吊牌价、零售价、指导价或该商品曾经展示过的销售价等，",o.createElement("i",null,"并非《价格法》、《禁止价格欺诈行为的规定》规定的“原价”，"),"仅供您参考"),o.createElement("li",null,o.createElement("i",null,"特别提示："),"实际的成交价格可能因您使用优惠券等发生变化，最终以订单结算页的价格为准。若商家单独对价格进行说明的，以商家的表述为准"))):o.createElement("div",{className:"g-price-desc-title",onClick:this.showDetail},o.createElement("span",null,"点击查看商品价格说明"))}});e.exports=n},"./components/widgets/GoodsPriceDescription/style.scss":function(e,t){},"./components/widgets/BaseList2/index.js":function(e,t,s){"use strict";function o(e,t,s){var o=b.getOffsetTopOnBody(e),n=o+e.offsetHeight/2;return n>=t&&n<=s}function n(e){return L[e]}function i(e){var t={goodsID:e};return L[e]=t,t}function a(e){var t=n(e);t&&(t.id="",t.logged=!1,t.timer&&(clearTimeout(t.timer),t.timer=null))}function r(e,t){var s=n(e);if(s||(s=i(e),f.util.merge(t,s)),!s.logged&&null==s.timer&&f.logger.isImprTester()){s.id||(s.id=f.logger.getImprID());var o=s.id;s.timer=setTimeout(function(){s.logged=!0,s.timer=null,o===s.id&&f.logger.trackingRecord(f.util.extend({impr_id:s.id,op:"impr",event:s.event,page_name:s.pageName,goods_id:s.goodsID,event_type:s.eventType,is_app:s.isApp,idx:s.index},s.params))},f.logger.getImprTime())}}var l=s("./components/vendor/react.min.js"),c=s("./components/widgets/GoodsListItem/index.js"),u=s("./components/widgets/GoodsListSlip/index.js"),d=s("./components/widgets/SuperSpikeListItem/index.js"),p=s("./components/widgets/SingleListItem/index.js"),m=s("./components/widgets/DoubleGridGoodsItem/index.js"),g=s("./components/widgets/RankGoodsListItem/index.js"),h=s("./components/widgets/SubjectSnapshot/index.js"),f="undefined"!=typeof window?s("./components/common/index.js"):{},v=s("./constants/constant_ui.js").ImgBase64,y=s("./constants/tracking/rank.js"),b=s("./components/common/ui/util.js"),k=("undefined"!=typeof window?s("./components/common/platform.js"):{},s("./components/widgets/SingleListItemV2/index.js")),_=s("./components/widgets/DoubleGridItemV2/index.js"),w=s("./components/widgets/PortalListItem/index.js"),I={show:"top-button-show",hide:"top-button-hide"},S={show:"pull-up-show",hide:"pull-up-hide"},E={defaultLabel:"正在加载中...",noMoreItem:"没有更多了...",nothingAtAll:"没有更多了..."},D=10,T={DEFAULT:0,LOADING:1,COMPLETE:2},N=10,C=50,x=!1,L={},j=l.createClass({displayName:"BaseList",getInitialState:function(){return{goTopClass:"go-top top-button-hide",topNum:10,loadingClass:S.show,loadingTxt:E.defaultLabel,pullUpShow:!0,list:[],lastShowIndex:0,waitForLoading:!1,loadListDataStatus:T.DEFAULT}},getDefaultProps:function(){return{list:[],currentList:[],doImpr:!1,doTubesImpr:!1,tubeImprModel:null,needUpdateFavorite:!1,isShowed:!1,nextSp:0,onLoadedAll:function(){},scrollerContainerId:null,useOnce:!1}},scrollerContainer:{},prepareView:function(e){this.doPreviousPageScroll()},doPreviousPageScroll:function(){if(!f.page.hasPageScrolled){var e=f.page.getPageScrollData();e.sp>0?(this.scrollerContainer.scrollTop=e.sp,e.sp=0):this.scrollerContainer.scrollTop=0,f.page.hasPageScrolled=!0,f.page.doAfterJSApiReady(function(){var t={sp:null,item_index:null,goods_id:null};e.goodsID||delete t.goods_id,f.navigation.replaceQuery(t)})}},showLoadMore:function(){this.setState({loadingClass:S.show,loadingTxt:E.defaultLabel,pullUpShow:!0})},hideLoadMore:function(e){this.setState({loadingClass:S.hide,loadingTxt:e?E.nothingAtAll:E.noMoreItem,pullUpShow:!1})},checkLoadMoreData:function(){var e=this;if(!([T.LOADING,T.COMPLETE].indexOf(e.state.loadListDataStatus)>=0))return!(!e.props.loadMoreDataFunc||!e.props.isShowed)&&void(e.props.list.length-e.state.list.length>D||(e.setState({loadListDataStatus:T.LOADING}),e.props.loadMoreDataFunc(function(t){e.loadMoreData(t)},!1,e.props.params)))},loadMoreData:function(e){var t;return!e||e.length<=0?(t=T.COMPLETE,self.loadMoreDataFunc&&self.loadMoreDataFunc(null,!0,self.props.params),void this.setState({loadListDataStatus:t})):(t=T.DEFAULT,this.setState({loadListDataStatus:t}),void(this.scrollerContainer.scrollTop-=1))},onScroll:function(){if(!x&&this.props.isShowed){var e=this;b.lazyLoadOnScroller(this.refs.listItems,null,{querySelectorAll:".base-list-wrapper img"},e.scrollerContainer),e.updateTopButtonStatus(),e.isPullDown()&&e.showListLoading(),e.checkLoadMoreData(),e.props.doImpr&&e.checkImpr(),e.props.doTubesImpr&&e.props.tubeImprModel&&e.props.tubeImprModel.onScroll()}},checkImpr:function(){var e=this.scrollerContainer.scrollTop,t=e+this.scrollerContainer.offsetHeight-this.cacheInfo.footerHeight;e+=this.cacheInfo.navBarHeight;for(var s=document.getElementsByClassName("goods-image")||[],n=0;n<s.length;n++){var i=s[n].getElementsByTagName("img")[0];if(i&&s[n].dataset.log){var l={};try{l=JSON.parse(s[n].dataset.log)||{}}catch(e){continue}var c=l.goodsID.toString();c&&(o(i,e,t)?r(c,l):a(c))}}},showListLoading:function(e){var t=this,s=t.state.list.length,o=t.state.lastShowIndex+1;if(s>o){var n=Math.min(s,o+N)-1;t.setState({lastShowIndex:n}),o=n+1}if(s===o&&s<t.props.list.length&&!t.state.waitForLoading){t.setState({waitForLoading:!0}),t.showLoadMore();var i=this.props.list.slice(s,N+s);t.setState({waitForLoading:!1,list:t.state.list.concat(i)},function(){"undefined"!=typeof window&&"function"==typeof e&&e()})}else o>=t.props.list.length&&t.hideLoadMore(!0)},updateTopButtonStatus:function(){var e="go-top",t=this.isNearTop()?I.hide:I.show;this.setState({goTopClass:[e,t].join(" ")})},goTop:function(){this.scrollerContainer.scrollTop=0,this.onScroll(),x=!0,setTimeout(function(){x=!1},C),this.props.goTopTrackingParams?f.logger.trackingRecord(this.props.goTopTrackingParams):f.logger.trackingRecord({op:"click",event:"back_top_clk",page_name:"index"})},isNearTop:function(){return this.useContainer?this.scrollerContainer.scrollTop<this.scrollerContainer.offsetHeight:this.scrollerContainer.scrollTop<f.ui.getWindowHeight()},isPullDown:function(){return this.useContainer?this.scrollerContainer.scrollTop+2*this.scrollerContainer.offsetHeight>=this.scrollerContainer.scrollHeight:this.scrollerContainer.scrollTop+2*f.ui.getWindowHeight()>=document.body.scrollHeight},componentWillMount:function(){var e=this;this.setState({list:e.props.currentList,lastShowIndex:(e.props.currentList||[]).length-N}),this.showListLoading()},componentDidMount:function(){var e=this.props.scrollerContainerId;if(this.scrollerContainer=document.body,e){var t=document.getElementById(e);t&&(this.scrollerContainer=t,this.useContainer=!0)}this.useContainer?(this.scrollerContainer.addEventListener("scroll",this.onScroll,!1),b.addGoTopButton(this.scrollerContainer,document.body)):window.addEventListener("scroll",this.onScroll,!1),this.cacheNodeInfo(),this.prepareView(),this.onScroll()},isCalledLoadedAll:!1,componentDidUpdate:function(e,t){var s=this;!this.props.isShowed||e.isShowed||0!==this.scrollerContainer.scrollTop&&0!==this.state.list.length||this.props.useOnce||this.showListLoading(function(){s.onScroll()}),0!==this.props.nextSp&&e.nextSp!==this.props.nextSp&&(this.scrollerContainer.scrollTop=this.props.nextSp),!this.isCalledLoadedAll&&this.state.loadingClass===S.hide&&this.props.isShowed&&this.state.loadListDataStatus===T.COMPLETE&&this.state.list.length>=this.props.list.length&&(this.isCalledLoadedAll=!0,this.props.onLoadedAll&&this.props.onLoadedAll())},render:function(){var e=[],t=this,s={},o=!1;this.state.list.forEach(function(n,i){var a=n.data||n,r=n.props||n,f=r.key||a.goodsID||a.goodsId||a.subjectID;if(!f||!s[f])switch(s[f]=!0,r.listItemName){case"goodsListItem":e.push(l.createElement(c,{goodsID:a.goodsID,"data-index":i,key:f,imgUrl:a.imgUrl,goodsName:a.goodsName,doImpr:r.doImpr,eventDesc:a.eventDesc,salePrice:a.salePrice,inViewIndex:i,needUpdateFavorite:t.props.needUpdateFavorite,eventType:a.eventType}));break;case"goodsListSlip":e.push(l.createElement(u,{key:a.subjectID,"data-index":i,goodsList:a.goodsList,subjectID:a.subjectID,subjectName:a.subjectName,inViewIndex:i,subjectVisitTrackingData:r.subjectVisitTrackingData,goodsVisitTrackingData:r.goodsVisitTrackingData}));break;case"superSpikeListItem":e.push(l.createElement(d,{key:f,"data-index":i,serverTime:a.serverTime,startTime:a.startTime,endTime:a.endTime,goodsList:a.goodsList,inViewIndex:i,extraTrackingParams:r.superSpikeVisitTrackingData}));break;case"portalListItem":e.push(l.createElement(w,{itemProps:r,goodsID:a.goodsID,goodsData:a,key:f,inViewIndex:i}));break;case"singleListItem":if(r.withLocalGroups){e.push(l.createElement(k,{itemProps:r,goodsID:a.goodsID,goodsData:a,key:f,inViewIndex:i,extraTrackingParams:r.extraTrackingParams,referPageName:r.referPageName,hasSlipAbove:r.hasSlipAbove}));break}e.push(l.createElement(p,{goodsID:a.goodsID,key:f,imgUrl:a.imgUrl,goodsName:a.goodsName,customerNum:a.customerNum,salePrice:a.salePrice||a.price,normalPrice:a.normalPrice,inViewIndex:i,eventType:a.eventType,isApp:a.isApp,buyButtonTxt:a.buyButtonTxt,extraTrackingParams:r.extraTrackingParams,referPageName:r.referPageName,buttonTrackingParams:r.buttonTrackingParams}));break;case"doubleGridGoodsItem":case"catGoodsItem":if(r.withLocalGroups){o=!0,e.push(l.createElement(_,{itemProps:r,goodsID:a.goodsID,goodsData:a,key:f,inViewIndex:i,doImpr:r.doImpr,imprParams:r.imprParams,ad:r.ad,extraTrackingParams:r.extraTrackingParams,referPageName:r.referPageName}));break}e.push(l.createElement(m,{inViewIndex:i,key:a.goodsId||a.goodsID,imgUrl:a.imgUrl,soldQuantity:a.soldQuantity,cnt:a.cnt,goodsName:a.goodsName,price:a.salePrice||a.price,customerNum:a.customerNum,goodsId:a.goodsId||a.goodsID,forwardUrl:r.forwardUrl,doImpr:r.doImpr,imprParams:r.imprParams,doTubesImpr:t.props.doTubesImpr,tubeImprModel:t.props.tubeImprModel,itemImprParams:r.itemImprParams,blockID:r.blockID,ad:r.ad,tag:a.tag,extraTrackingParams:r.extraTrackingParams}));break;case"rankNewGoodsItem":e.push(l.createElement(m,{forwardUrl:r.forwardUrl,extraTrackingParams:y.VisitGoodsInNewRank,inViewIndex:i,key:f,imgUrl:a.thumbUrl,goodsName:a.goodsName,goodsId:a.goodsId,customerNum:a.customerNum,price:a.salePrice,timeSpanDesc:a.timeSpanDesc}));break;case"rankHotGoodsItem":e.push(l.createElement(g,{forwardUrl:r.forwardUrl,trackingInfo:y.VisitGoodsInHotRank,inViewIndex:i,key:f,imgUrl:a.thumbUrl,goodsName:a.goodsName,goodsId:a.goodsId,customerNum:a.customerNum,salePrice:a.salePrice,marketPrice:a.marketPrice,cntDesc:a.cntDesc}));break;case"subjectItem":var v=a;e.push(l.createElement(h,{inViewIndex:i,key:v.key,subjectId:v.subjectID,list:v.goodsList,banner:v.banner,subjectDesc:v.subjectDesc,totalGoodsSales:v.totalGoodsSales,totalGoodsNum:v.totalGoodsNum}))}});var n="load-more "+this.state.loadingClass,i="loading-text";"pull-up-hide"===this.state.loadingClass&&(i+=" middle");var a=(v.LoadingIcon,this.generateGoTop());return l.createElement("div",{className:"base-list-wrapper"+(o?" double-list-v2":""),ref:"listItems"},e,l.createElement("div",{className:n},l.createElement("div",{className:"list-center",style:{display:"pull-up-hide"===this.state.loadingClass?"none":""}},l.createElement("span",{className:"img-rotate-bg"}),l.createElement("span",{className:i},this.state.loadingTxt))),a)},generateGoTop:function(){if(!this.useContainer)return l.createElement("div",{className:this.state.goTopClass,onClick:this.goTop},l.createElement("span",null,"顶部"))},cacheNodeInfo:function(){if(!this.cacheInfo){var e={};e.footerHeight=(document.getElementsByClassName("footer")[0]||{}).offsetHeight||0,e.navBarHeight=(document.getElementsByClassName("cf-container")[0]||{}).offsetHeight||0,this.cacheInfo=e}}});e.exports=j},"./components/widgets/GoodsListItem/index.js":function(e,t,s){"use strict";var o=s("./components/vendor/react.min.js"),n="undefined"!=typeof window?s("./components/common/index.js"):{},i=o.createClass({displayName:"GoodsListItem",getInitialState:function(){return{imgLogData:"",titleLogData:"",btnLogData:"",defaultImg:"image/default.png",imgHeight:0,showPrice:"",buyButtonTxt:"去开团",isLike:!1,likeImg:"image/unlike.png",priceStyle:{width:0},imprID:"",imprLogged:"",imprTime:null}},getDefaultProps:function(){return{imgUrl:"",inViewIndex:0,goodsID:"",goodsName:"",eventDesc:"",salePrice:0,doImpr:"",needUpdateFavorite:!1,startLog:!1,stopLog:!1}},handleGoodsClick:function(e){e&&e.preventDefault();var t=this,s={queries:{item_index:t.props.inViewIndex}};setTimeout(function(){n.page.setPageScrollPosition(s,function(){n.navigation.forward("goods.html?goods_id="+t.props.goodsID)})},0)},clickGoodsLike:function(e){var t=this,s=this.props.goodsID,o=n.likeUtil;if(e&&e.stopPropagation(),!o.isGoodsLikeDoing()){var i=function(){t.clickGoodsLike()},a="goods.html?like_flag=true&goods_id="+s;if(o.checkLogin(i,a,!0)){var r=o.checkGoodsLike(s);t.props.imprID;n.util.call(r?o.cancelGoodsLike:o.doGoodsLike,s,function(){r=o.checkGoodsLike(s),t.state.imprID&&n.logger.trackingRecord({impr_id:t.state.imprID,op:"click",click:r?"goods_favorite":"goods_cancel_favorite",goods_id:s,page_module:"goods_list",page_src:"favorite_btn"}),t.switchLike(r)})}}},switchLike:function(e){var t=n.image.getCDNImgURL("like/v2/unlike.png");e&&(t=n.image.getCDNImgURL("like/v2/like.png")),this.setState({likeImg:t,isLike:e})},componentWillMount:function(){},stopImpr:function(){var e=this.state;this.setState({imprID:"",imprLogged:!1}),e.imprTimer&&(clearTimeout(e.imprTimer),this.setState({imprTimer:null}))},logImpr:function(){var e=this.state,t=this;if(!e.imprLogged&&null==e.imprTimer&&n.logger.isImprTester()){e.imprID||(e.imprID=n.logger.getImprID());var s=e.imprID,o=this.props.goodsID,i=setTimeout(function(){t.setState({imprLogged:!0,imprTimer:null}),s===e.imprID&&n.logger.trackingRecord({impr_id:e.imprID,op:"impr",goods_id:o,page_module:"goods_list",page_src:"goods_image",event:"goods_show"})},n.logger.getImprTime());t.setState({imprTimer:i})}},componentWillReceiveProps:function(e){if(e.needUpdateFavorite){var t=n.likeUtil.checkGoodsLike(this.props.goodsID);this.switchLike(t)}},componentDidMount:function(){var e=n.ui.getWindowWidth(),t=.46875*e+"px",s=Math.min(.4*e+27,220),o=s>170?"tuan_g_price price-big":"tuan_g_price";this.switchLike(n.likeUtil.checkGoodsLike(this.props.goodsID)),this.props.eventType===n.constant.EventType.FreeTrial&&this.setState({buyButtonTxt:"免费申请"});var i=this.props.doImpr&&n.logger.isImprTester()?n.logger.getImprID():"";this.setState({imgHeight:t,showPrice:o,priceStyle:{width:s},imprID:i}),this.setLogData(i),this.logImpr()},setLogData:function(e){var t=this.props;this.setState({imgLogData:e?JSON.stringify({impr_id:e,click:"goods_buy",goods_ids:t.goodsID,page_module:"goods_list",page_src:"goods_image"}):"",titleLogData:e?JSON.stringify({impr_id:e,click:"goods_buy",goods_ids:t.goodsID,page_module:"goods_list",page_src:"goods_title"}):"",btnLogData:e?JSON.stringify({impr_id:e,click:"goods_buy",goods_ids:t.goodsID,page_module:"goods_list",page_src:"goods_buy_btn"}):""})},render:function(){return o.createElement("div",{className:"tuan_g",onClick:this.handleGoodsClick},o.createElement("div",{className:"tuan_g_img","data-log":this.state.imgLogData},o.createElement("img",{src:this.state.defaultImg,"data-url":this.props.imgUrl,"data-index":this.props.inViewIndex,height:"9.375rem"})),o.createElement("div",{className:"tuan_g_info",dataLog:this.state.titleLogData},o.createElement("p",{className:"tuan_g_name"},this.props.goodsName)),o.createElement("div",{className:"tuan_g_core","data-log":this.state.btnLogData},o.createElement("div",{className:"tuan_g_core_img"}),o.createElement("div",{className:this.state.showPrice,style:this.state.priceStyle},o.createElement("span",null,this.props.eventDesc),o.createElement("b",null,"￥",this.props.salePrice)),o.createElement("div",{className:"tuan_g_btn"},this.state.buyButtonTxt)),o.createElement("div",{className:"like goods_list_like"},o.createElement("img",{src:this.state.likeImg}),o.createElement("div",{onClick:this.clickGoodsLike,className:"like_click_button"})))}});e.exports=i},"./components/widgets/GoodsListSlip/index.js":function(e,t,s){"use strict";var o=s("./components/vendor/react.min.js"),n="undefined"!=typeof window?s("./components/common/index.js"):{},i=s("./constants/constant_ui.js").ImgBase64,a=s("./components/common/ui/util.js"),r=o.createClass({displayName:"GoodsListSlip",getInitialState:function(){return{defaultImg:i.DefaultSquare,scrollClass:"subject-scroll-goods_list_item",scrolling:!1,needUpdate:!0}},getDefaultProps:function(){return{subjectName:"",goodsList:[],subjectID:"",inViewIndex:0,scrollData:{},subjectVisitTrackingData:null,goodsVisitTrackingData:null}},getTransferParams:function(){var e=this,t=this.refs.tuanItems,s={queries:{item_index:e.props.inViewIndex}};return t&&t.scrollLeft&&(s.queries.subject_scroll=e.props.inViewIndex+"_"+t.scrollLeft),s},forwardGoods:function(e){e.preventDefault();var t=this,s=this.getTransferParams(),o=e.currentTarget.dataset,i=o.id,a=parseInt(o.index,10);n.page.setPageScrollPosition(s,function(){var e=function(){var e="goods.html?goods_id="+i;n.navigation.forward(e)},s=t.props.goodsVisitTrackingData;s?(s.section_id=t.props.subjectID,s.goods_id=i,s.idx=a,n.logger.trackingRecord(s,e)):e()})},forwardSubjects:function(e){e&&(e.preventDefault(),e.stopPropagation());var t=this,s=this.getTransferParams();n.page.setPageScrollPosition(s,function(){var e=function(){var e="subject.html?subject_id="+t.props.subjectID;n.navigation.forward(e)},s=t.props.subjectVisitTrackingData;s?(s.section_id=t.props.subjectID,s.idx=t.props.inViewIndex,n.logger.trackingRecord(s,e)):e()})},onSubjectScroll:function(e,t){var s=this.refs.tuanItems;0===e.detail&&e.stopPropagation();var o=a.lazyLoadOnScroller(s);this.setState({needUpdate:o})},prepare:function(e){var t=this;e=e||{};var s=e.subjectScroll;if(s){var o=s.split("_"),i=parseInt(o[0],10),a=parseInt(o[1],10);if(i===t.props.inViewIndex&&a>0){var r=t.refs.tuanItems;if(r){setTimeout(function(){r.scrollLeft=a},0);var l=function(){n.navigation.replaceURL(n.url.buildURL({subject_scroll:null}))};window.wxReady||!n.platform.isWeChatPlatform()?l():(window.wxAfterReady=window.wxAfterReady||[],window.wxAfterReady.push(l))}}}},componentDidUpdate:function(e){this.setState({needUpdate:!1})},shouldComponentUpdate:function(e,t){return t.needUpdate},componentDidMount:function(){var e=n.page.getPageScrollData();this.prepare(e);var t=[this.state.scrollClass,this.props.inViewIndex].join("-");this.setState({scrollClass:t})},render:function(){var e=this,t=this.props.goodsList.map(function(t,s){return o.createElement("li",{key:t.goodsID,"data-id":t.goodsID,onClick:e.forwardGoods,"data-index":s},o.createElement("div",{className:"std-goods-image-square"},o.createElement("img",{"data-url":t.thumbUrl})),o.createElement("p",{className:"goods-name"},t.goodsName),o.createElement("div",{className:"goods-price"},o.createElement("i",null,"￥"),t.price))});return o.createElement("div",{className:"goods-list-slip"},o.createElement("div",{className:"slip-head",onClick:this.forwardSubjects},o.createElement("p",null,this.props.subjectName),o.createElement("div",{className:"read-more",onClick:this.forwardSubjects},o.createElement("span",null,"查看更多"))),o.createElement("ul",{onScroll:this.onSubjectScroll,className:"detail-goods "+this.state.scrollClass,ref:"tuanItems"},t))}});e.exports=r},"./components/widgets/SuperSpikeListItem/index.js":function(e,t,s){"use strict";var o=s("./components/vendor/react.min.js"),n="undefined"!=typeof window?s("./components/common/index.js"):{},i=(s("./components/widgets/TimeMeter/index.js"),s("./constants/constant_ui.js").ImgBase64),a=o.createClass({displayName:"SuperSpikeListItem",getInitialState:function(){return{subjectNameLogData:{},defaultImg:i.DefaultSquare,maxLen:3,goodsItemStyle:{width:0},superGoodsStyle:{width:0,height:0},goodsImgStyle:{width:0,height:0}}},getDefaultProps:function(){return{goodsList:[],serverTime:"",startTime:"",endTime:"",inViewIndex:0,extraTrackingParams:null}},forwardSuperSpike:function(e){e.preventDefault();var t={queries:{item_index:this.props.inViewIndex}},s=this;n.page.setPageScrollPosition(t,function(){var e=function(){Navigation.forwardSubjectsPage({subjects_id:14})};s.props.extraTrackingParams?n.logger.trackingRecord(s.props.extraTrackingParams,e):e()})},componentDidMount:function(){var e=n.ui.getWindowWidth(),t=(e-4)/3,s=t-6;this.setState({goodsItemStyle:{width:t+"px"},superGoodsStyle:{width:s+"px",height:s+18+"px"},goodsImgStyle:{width:s+"px",height:s+"px"}})},getDiscount:function(e,t){if(!e||!t)return 0;var s=Math.floor(e/t*100)/10;return s%1===0&&0!==s&&(s=s.toFixed(1)),s},render:function(){var e=this,t=[];return this.props.goodsList.forEach(function(s,n){var i=e.getDiscount(s.price,s.marketPrice);n<e.state.maxLen&&t.push(o.createElement("li",{key:s.goodsID,style:e.state.goodsItemStyle},o.createElement("div",{className:"tuan-super-img",style:e.state.superGoodsStyle},o.createElement("img",{src:e.state.defaultImg,"data-url":s.thumbUrl,style:e.state.goodsImgStyle}),o.createElement("div",{className:"super-spike-logo"},o.createElement("img",{src:s.logo}))),o.createElement("div",{className:"super-spike-price"},o.createElement("div",null,o.createElement("b",null,"￥"),o.createElement("b",{className:"price-num"},s.price)),o.createElement("div",{className:"tuan-super-discount"},o.createElement("span",{className:"number"},i),o.createElement("span",{className:"word"},"折")))))}),o.createElement("div",{className:"tuan-super-spike",onClick:this.forwardSuperSpike},o.createElement("div",{className:"tuan-super-head"},"超值大牌"),o.createElement("ul",{className:"tuan-super-bd"},t),o.createElement("div",{className:"tuan-read-more"},"查看更多"))}});e.exports=a},"./components/widgets/TimeMeter/index.js":function(e,t,s){"use strict";var o=s("./components/vendor/react.min.js"),n=["距抢购结束:","距抢购开始:"],i={timeMeterContent:"tm-content",timeMeterNumber:"tm-number",timeMeterHMS:"tm-hms"},a="tm-bg-red",r=function(e){return e<10?"0"+e:e+""},l=o.createClass({displayName:"TimeMeter",getInitialState:function(){return{serverTime:"",startTime:"",endTime:"",content:"",leftDays:"00",leftHours:"00",leftMinutes:"00",leftSeconds:"00",timeMeterContent:i.timeMeterContent,timeMeterNumber:i.timeMeterNumber,timeMeterHMS:i.timeMeterHMS,numBgClass:"",timeMeterNumberWithBg:i.timeMeterNumber}},getDefaultProps:function(){return{serverTime:Date.now(),startTime:Date.now(),endTime:Date.now(),loadCallback:function(){},style:"small"}},componentWillMount:function(){this.setState({serverTime:parseInt(this.props.serverTime,10),startTime:parseInt(this.props.startTime,10),endTime:parseInt(this.props.endTime,10)})},componentDidMount:function(){this.initStyle(),this.changeEndTime()},changeEndTime:function(){var e=this,t={},s=this.state.startTime>this.state.serverTime?this.state.startTime-this.state.serverTime:this.state.endTime-this.state.serverTime,o=s,i=Math.floor(o/60),l=Math.floor(i/60),c=Math.floor(l/24);c%=365,l%=24,i%=60,o=Math.floor(o%60),l+=24*c,this.props.loadCallback&&(this.state.serverTime>=this.state.startTime&&this.state.serverTime<this.state.endTime?this.props.loadCallback(!0):this.props.loadCallback(!1)),this.state.startTime-this.state.serverTime>0?t.content=n[1]:t.content=n[0],s>0?(t.leftHours=r(l),t.leftMinutes=r(i),t.leftSeconds=r(o),t.leftDays=r(c),c<=0&&l<=0&&this.props.startTime<=this.props.serverTime&&"small"!==this.props.style&&(t.numBgClass=a),t.serverTime=this.state.serverTime+1,window.setTimeout(function(){e.changeEndTime.call(e)},1e3)):(t.leftHours="00",t.leftMinutes="00",t.leftSeconds="00",t.leftDays="00","small"!==this.props.style&&(t.numBgClass=a)),t.numBgClass&&(t.timeMeterNumberWithBg=(this.state.timeMeterNumber,a).join(" ")),this.setState(t)},initStyle:function(){var e=this.props.style;"small"===e&&this.setState({timeMeterContent:[i.timeMeterContent,e].join("-"),timeMeterNumber:[i.timeMeterNumber,e].join("-"),timeMeterHMS:[i.timeMeterHMS,e].join("-"),timeMeterNumberWithBg:[i.timeMeterNumber,e].join("-")})},render:function(){return o.createElement("section",{className:"time-meter"},o.createElement("span",{className:this.state.timeMeterContent},this.state.content),o.createElement("span",{className:this.state.timeMeterNumberWithBg},this.state.leftHours[0]),o.createElement("span",{className:this.state.timeMeterNumberWithBg},this.state.leftHours[1]),o.createElement("span",{className:this.state.timeMeterHMS},"时"),o.createElement("span",{className:this.state.timeMeterNumberWithBg},this.state.leftMinutes[0]),o.createElement("span",{className:this.state.timeMeterNumberWithBg},this.state.leftMinutes[1]),o.createElement("span",{className:this.state.timeMeterHMS},"分"),o.createElement("span",{className:this.state.timeMeterNumberWithBg},this.state.leftSeconds[0]),o.createElement("span",{className:this.state.timeMeterNumberWithBg},this.state.leftSeconds[1]),o.createElement("span",{className:this.state.timeMeterHMS},"秒"))}});e.exports=l},"./components/widgets/SingleListItem/index.js":function(e,t,s){"use strict";var o=s("./components/vendor/react.min.js"),n="undefined"!=typeof window?s("./components/common/index.js"):{},i=s("./components/common/ui/util.js"),a=o.createClass({displayName:"SingleListItem",getInitialState:function(){return{imgLogData:""}},getDefaultProps:function(){return{imgUrl:"",inViewIndex:0,goodsID:"",goodsName:"",salePrice:0,normalPrice:0,customerNum:0,buyButtonTxt:"去开团",extraTrackingParams:null,referPageName:null,buttonTrackingParams:null,eventType:0,isApp:0}},handleGoodsClick:function(e){var t=this,s=t.props.extraTrackingParams;if(e){e.preventDefault(),e.stopPropagation();var o=e.currentTarget.children[3]||null;i.isNodeInPath(o,e.target,e.currentTarget)&&t.props.buttonTrackingParams&&(s=t.props.buttonTrackingParams)}var a={queries:{item_index:t.props.inViewIndex}};n.page.setPageScrollPosition(a,function(){function e(){var e=t.props.forwardUrl||"goods.html?goods_id="+t.props.goodsID;t.props.referPageName&&(e=n.url.buildURL({refer_page_name:t.props.referPageName},e)),e+="&is_spike="+(2===t.props.eventType?"1":"0"),n.navigation.forward(e)}s?(s.idx=t.props.inViewIndex,s.goods_id=t.props.goodsID,s.event_type=t.props.eventType,s.is_app=t.props.isApp,n.logger.trackingRecord(s,e)):e()})},componentWillMount:function(){},componentDidMount:function(){this.setLogData()},setLogData:function(){var e=this.props;this.setState({imgLogData:JSON.stringify({goodsID:e.goodsID,event:"goods_show",pageName:"index",eventType:e.eventType,isApp:e.isApp,index:e.inViewIndex})})},render:function(){var e;return this.props.normalPrice&&(e=o.createElement("del",{className:"normal-price"},"单买价￥",this.props.normalPrice)),o.createElement("div",{className:"single-list-item",onClick:this.handleGoodsClick
},o.createElement("div",{className:"std-goods-image goods-image","data-log":this.state.imgLogData},o.createElement("img",{"data-url":this.props.imgUrl,"data-index":this.props.inViewIndex,height:"1.76rem"})),o.createElement("p",{className:"goods-name"},this.props.goodsName),o.createElement("div",{className:"detail"},o.createElement("div",{className:"index-group-icon"}),o.createElement("a",{className:"group-desc"},this.props.customerNum,"人团"),o.createElement("a",{className:"sale-price"},o.createElement("i",null,"￥"),this.props.salePrice),e),o.createElement("div",{className:"core"},o.createElement("span",null,this.props.buyButtonTxt),o.createElement("div",{className:"index-button-arrow"})))}});e.exports=a},"./components/widgets/DoubleGridGoodsItem/index.js":function(e,t,s){"use strict";var o=s("./components/vendor/react.min.js"),n=s("./components/common/std_format.js"),i="undefined"!=typeof window?s("./components/common/index.js"):{},a={Left:"gap-left",Right:"gap-right"},r=o.createClass({displayName:"DoubleGridGoodsItem",getInitialState:function(){return{imgHeight:0,soldQuantity:0,imgUrl:"",price:0,timeSpanDesc:null}},getDefaultProps:function(){return{imgUrl:"",goodsName:"",cnt:0,price:0,inViewIndex:0,customerNum:0,goodsId:0,extraTrackingParams:null,forwardUrl:null,ad:"",tag:"",doTubesImpr:!1,tubeImprModel:null,blockID:null,itemImprParams:null}},handleGoodsClick:function(e){e&&e.preventDefault();var t=this,s={queries:{item_index:t.props.inViewIndex}};i.page.setPageScrollPosition(s,function(){function e(){var e=t.props.forwardUrl||"goods.html?goods_id="+t.props.goodsId;e+="&is_spike="+(2===t.props.eventType?"1":"0"),i.navigation.forward(e)}t.props.extraTrackingParams?i.logger.trackingRecord(t.props.extraTrackingParams,function(){e()}):e()})},componentWillMount:function(){var e=this.props;this.setState({imgUrl:e.imgUrl,price:e.price,soldQuantity:e.soldQuantity||(e.cnt?n.sales(e.cnt):null),imgLogData:e.doImpr?JSON.stringify({goodsID:e.goodsId,params:e.imprParams}):null})},componentDidMount:function(){this.registerImpr()},registerImpr:function(){var e=this.props,t="double-grid-one-"+e.inViewIndex;e.doTubesImpr&&e.tubeImprModel&&e.itemImprParams&&e.blockID&&e.tubeImprModel.registerImprChild(e.blockID,t,{name:t,view:document.querySelector("."+t),logData:e.itemImprParams,idx:e.inViewIndex})},render:function(){var e=this.props,t=this.state,s=[],n="double-grid-item ";n+=e.inViewIndex%2?a.Left:a.Right,t.soldQuantity?s.push(o.createElement("span",{key:"soldQuantity"},"已团",t.soldQuantity,"件")):e.timeSpanDesc&&e.timeSpanDesc.length>0&&s.push(o.createElement("span",null,e.timeSpanDesc));var i=!1,r=!1,l=!1;if(e.tag>=0){var c=["spike","economical-brand","go-shopping","good-fruit"],u="activity-flag activity-flag-gap activity-flag-"+c[e.tag];l=o.createElement("span",{className:u})}var d="double-grid-one double-grid-one-"+e.inViewIndex;return o.createElement("div",{className:d},o.createElement("div",{className:n,onClick:this.handleGoodsClick},o.createElement("div",{className:"std-goods-image-square goods-image","data-log":this.state.imgLogData},i,o.createElement("img",{"data-url":t.imgUrl,"data-index":e.inViewIndex})),o.createElement("div",{className:"goods-name"},l,e.goodsName,r),o.createElement("div",{className:"detail"},o.createElement("b",{className:"price-icon"},"￥"),o.createElement("b",{className:"price"},t.price),o.createElement("div",{className:"info"},s))))}});e.exports=r},"./components/widgets/RankGoodsListItem/index.js":function(e,t,s){"use strict";var o=s("./components/vendor/react.min.js"),n="undefined"!=typeof window?s("./components/common/index.js"):{},i=s("./constants/constant_ui.js"),a=s("./constants/constant_ui.js").ImgBase64,r=o.createClass({displayName:"RankGoodsListItem",getInitialState:function(){return{defaultImg:a.DefaultSquare}},getDefaultProps:function(){return{inViewIndex:0,imgUrl:"",goodsName:"",salePrice:0,marketPrice:0,customerNum:0,cntDesc:"",goodsId:0,trackingInfo:null,forwardUrl:null}},onGoodsClick:function(e){e&&e.preventDefault();var t=this.getTransferParams(),s=this;s.props.trackingInfo?(s.props.trackingInfo.goods_id=s.props.goodsId,n.logger.trackingRecord(s.props.trackingInfo,function(){n.page.setPageScrollPosition(t,function(){n.navigation.forward(s.props.forwardUrl||"goods.html?goods_id="+s.props.goodsId)})})):n.page.setPageScrollPosition(t,function(){n.navigation.forward(s.props.forwardUrl||"goods.html?goods_id="+s.props.goodsId)})},componentDidMount:function(){},render:function(){var e=this,t=null,s={color:"#ffffff"};switch(e.props.inViewIndex){case 0:t=i.ImgBase64.RankMarkRed;break;case 1:t=i.ImgBase64.RankMarkYellow;break;case 2:t=i.ImgBase64.RankMarkGreen;break;default:t=i.ImgBase64.RankMarkGray,delete s.color}return o.createElement("div",{onClick:e.onGoodsClick,className:"v2-rank-base"},o.createElement("div",{className:"v2-rank-img"},o.createElement("div",{className:"v2-rank-index"},o.createElement("span",{style:s},e.props.inViewIndex+1),o.createElement("img",{className:"mark-icon",src:t})),o.createElement("img",{className:"image",src:e.state.defaultImg,"data-url":e.props.imgUrl})),o.createElement("div",{className:"v2-rank-right-box"},o.createElement("div",{className:"v2-rank-info"},o.createElement("p",null,e.props.goodsName)),o.createElement("div",{className:"v2-rank-core"},o.createElement("div",{className:"v2-rank-market-price"},"已团"+e.props.cntDesc+"件 · 市场价",o.createElement("div",null,o.createElement("b",null,"￥"),o.createElement("b",null,e.props.marketPrice))),o.createElement("div",{className:"v2-rank-detail"},o.createElement("div",{className:"v2-rank-btn"},"去开团"),o.createElement("div",{className:"v2-rank-group"},o.createElement("div",{className:"v2-rank-sold"},o.createElement("b",null,e.props.customerNum+"人团"),o.createElement("div",{className:"v2-rank-price"},o.createElement("span",null,"￥"),o.createElement("span",{className:"sale-price"},e.props.salePrice))))))))},getTransferParams:function(){var e=this,t={queries:{item_index:e.props.inViewIndex}};return t}});e.exports=r},"./components/app/goods_v2/index.js":function(e,t,s){(function(t){"use strict";var o=s("./components/vendor/react.min.js"),n=(s("./components/vendor/react-dom.min.js"),"undefined"!=typeof window?s("./components/common/index.js"):{}),i=s("./configs/index.js").app,a=i.constant,r=s("./components/widgets/Banner3/index.js"),l=s("./components/widgets/BaseGoodsInfo/index.js"),c=s("./components/widgets/MallService/index.js"),u=s("./components/widgets/ServiceDetail/index.js"),d=s("./components/widgets/GoodsMallCoupons/index.js"),p=s("./components/widgets/MallCouponList/index.js"),m=s("./components/widgets/GoodsMallInfo/index.js"),g=s("./abtest/mallInfoDsr.js"),h=s("./components/widgets/LocalGroup2/index.js"),f=s("./components/widgets/LocalGroupHorizontal/index.js"),v=s("./abtest/localGroupHorizontal.js"),y=s("./components/widgets/Reviews2/index.js"),b=s("./components/widgets/SkuSelector2/index.js"),k=s("./components/widgets/GoodsBottomBar2/index.js"),_=s("./components/widgets/MallRecommend/index.js"),w=s("./components/widgets/GoodsDetailList2/index.js"),I=s("./components/widgets/GoodsPriceDescription/index.js"),S=s("./components/widgets/DownloadNotification/index.js"),E=s("./components/widgets/BaseList2/index.js"),D=(s("./components/widgets/Notification/index.js"),s("./components/widgets/MidYearPromoAct/Bubble.js")),T=s("./components/app/createPageComponent.js"),N=s("./components/widgets/ErrorPage.js"),C=s("./models/Goods.js"),x=s("./models/Mall.js"),L=s("./models/UserEvent.js"),j=s("./models/LocalGroup.js"),P=s("./models/LuckyDraw.js"),G=s("./models/Reviews.js"),M=s("./abtest/grayReleaseGoods.js"),R=s("./abtest/commentTag.js"),O=s("./lib/platform.js"),B=s("./constants/tracking/goods_detail_v2.js"),F=s("./components/app/goods_v2/bottomBar.js"),A=s("./components/app/goods_v2/recommend_v2.js"),U=s("./components/app/goods_v2/detailList.js"),H=(s("./components/app/goods_v2/address.js"),s("./components/common/tracking/impr.js")),q=s("./manager/index.js").moduleList,W=s("./manager/index.js").page.getInstance();"undefined"!=typeof window&&s("./components/app/goods_v2/goods.scss");var V=s("./components/widgets/SubscribeTopBanner/index.js"),z=o.createClass({displayName:"Goods",getInitialState:function(){return{serviceDetail:[],serviceDetailVisible:!1,mallCoupons:[],mallCouponListVisible:!1,hasSkuSelector:!1,skuSelectorVisible:!1,selectedGroup:null,selectedLocalGroupOrderID:null,mallRecommend:null,recommend:null,mallRecommendList:null,recommendList:null,currentRecommendList:null,playRulesKey:"",detailList:null,bottomBarData:null,showUnreachableAddressHint:!1,showRecommendHint:!1,subscribeData:{isContactTester:!1,resubscribe:!1},appDownload:{show:!1,title:"",content:"",queries:""},referPageElement:null,appDownloadInfo:null,hasInstalledApp:!1,enableBuyBtn:!1,showPriceDescription:!1}},getDefaultProps:function(){return{data:{}}},initPlayRulesKey:function(){var e=this.props.data.goods,t="";t=e.isFreeTrial||e.isDepositeGroup?"freeTrial":e.isCapitalGift||e.isCapitalGiftLottery?"capitalGift":"default",this.setState({playRulesKey:t})},componentWillMount:function(){var e=this,t=this.props.data.goods,s=this.props.data.mall,o=this.props.data.extraData;F(t,s,o,function(t){e.setState({bottomBarData:t})})},pinsocket:function(){n.pinsocket.onOpen(n.pinsocket.checkNewMessage);var e="goods_detail";n.notification.start(e)},isSkuLessThenBound:function(e,t,s){return!!s||e<t},updateSubscribeData:function(e){var t=this,s=this.props.data.goods,o=this.isSkuLessThenBound(s.minOnSaleGroupPrice,a.ForceContactBound,s.hasFreeCoupons),i=this.isSkuLessThenBound(s.minOnSaleGroupPrice,a.ForceContactHighBound,s.hasFreeCoupons);n.platform.isWeChatPlatform()?n.page.weChatForceContact(function(o,i,a,r){!s.isDepositeGroup||n.user.isSubscribed()||i||(o=!1),n.page.checkInstalledAppV2(function(){t.setState({subscribeData:{isContactTester:o,resubscribe:i},appDownloadInfo:r,hasInstalledApp:!0},function(){n.util.call(e)})},function(){t.setState({subscribeData:{isContactTester:o,resubscribe:i},appDownloadInfo:r,hasInstalledApp:!1},function(){n.util.call(e)})},r)},o,i,s.isLottery,{goodsID:s.goodsID,checkAppLogin:!0}):n.platform.isQQPlatform()?n.page.qqForceContact(function(o,i){if(t.setState({subscribeData:{isContactTester:o,resubscribe:i}}),n.util.call(e),o){var a=n.url.getParameter("group_order_id")||"",r=n.url.getParameter("wt_id")||"";n.page.qqContactTesterForward({goodsID:s.goodsID,groupOrderID:a,wtID:r,resubscribe:i,isNewUserGroup:s.isNewUserGroup},s.eventType)}},{goodsID:s.goodsID}):n.user.hasLogin()&&s.isDepositeGroup?n.user.requestSelfInfo({},function(){n.util.call(e)},function(){n.util.call(e)}):n.util.call(e)},goodsDetailTracking:function(){var e=this.props.data.goods;n.page.setKeyParams({goods_id:e.goodsID});var t=n.util.extend(B.PV,{goods_id:e.goodsID,has_local_group:e.hasLocalGroup?"1":"0",from_order_sn:n.url.getParameter("from_order_sn"),message_type:n.url.getParameter("message_type"),event_type:e.eventType,is_mall_rec:e.showMallRecommend?"1":"0"}),s=n.url.getParameter("from_subject_id");s&&(t.from="subject",t.subject_id=s);var o=n.url.getParameter("refer_page_name");"seckill"===o?t.event="seckill_goods_show":"seckill_no"===o?t.event="seckill_no_goods_show":"super_spike"===o?t.event="super_spike_goods_show":"haitao"===o?t.event="ht_goods_detail_show":"shangxin"===o?t.event="shangxin_goods_show":"selectedsubject"===o?t.event="selectedsubject_goods_show":"hotcity"===o&&(t.event="hotcity_goods_show");for(var i=a.TrackingChannels,r=0;r<i.length;r++){var l=n.url.getParameter(i[r]);l&&(t["refer_channel_"+i[r]]=l)}n.logger.trackingRecord(t)},getPageIndex:function(e,t){if(t<=0)return 0;var s=Math.floor(e/t)*t;return s},initRecommend:function(){var e=this,t=this.props.data.goods,s=12,o=this.getPageIndex(parseInt(n.url.getParameter("item_index"),10)||0,s),i=this.getListID();this.initImprLogger(t.goodsID,i),A.init({offset:0,count:s,goodsID:t.goodsID,showMallRecommend:t.showMallRecommend,hasLocalGroup:t.hasLocalGroup,pageIndex:o,eventType:t.inViewIndex,listID:i});var a=function(t){var n={};t&&t.mallRecommend&&(n.mallRecommendList=t.mallRecommend),t&&t.recommend&&(n.recommendList=t.recommend,n.currentRecommendList=t.recommend.slice(0,o+s||s)),e.setState(n)};A.requestData(a)},componentDidMount:function(){var e=this,t=this.props.data.goods,s=(this.props.data.mall,this.props.data.lottery,t.goodsName),o=t.useOnSalePrice?t.minOnSaleGroupPrice:t.minGroupPrice;t.isCapitalGift||t.isCapitalGiftLottery||(s=n.stdFormat.goodsNameWithPrice(t.goodsName,o,t.isFreeTrial||t.isDepositeGroup));a.ShareChannel;n.page.prepareShare({title:s,message:t.shareDesc,timelineMessage:s,thumbnailURL:t.thumbUrl,shareURL:n.url.buildURL({mall_id:null,group_order_id:null,wt_id:null,status:null,group_role:null,like_flag:null,from:null,et:n.url.getParameter("et")},(t.gpv?t.gpv:n.navigation.GoodsUrl)+location.search),forceShareToWeChatTimeline:!1});var i=function(){t.isOnSale&&t.skus&&t.skus.length>1&&e.setState({hasSkuSelector:!0}),e.state.bottomBarData.showSkuSelector&&e.setState({selectedGroup:t.groupTypes[1]},function(){e.showSkuSelector()}),e.initRecommend(),U(t.detailGallery,function(t){e.setState({detailList:t})}),e.setState({showPriceDescription:!0}),e.pinsocket()};e.updateSubscribeData(function(){e.setState({enableBuyBtn:!0}),i()}),e.mainBlockTracking(),e.localGroupImpr()},getListID:function(){var e=q.getInstance({pageManager:W,name:"rec_list"}).listID;return e},initImprLogger:function(e,t){H.init({bottomBarHeight:(document.querySelector(".goods-bottom-bar")||{}).offsetHeight});var s="goodsDetailRecommend";H.initImprBlocks({blockID:s,view:document.querySelector("#goods-recommend-container"),imprBase:{op:"impr",page_section:"rec_list",page_element:"item",goods_id:e,list_id:t}})},mainBlockTracking:function(){var e=this.props.data.goods,t=n.util.extend(B.GoodsMainImpr,{goods_id:e.goods_id,event_type:e.eventType});n.logger.trackingRecord(t)},localGroupImpr:function(){var e=this.props.data.goods,t=e.localGroups||[],s=[];if(t.forEach(function(e,t){s.push(e.groupOrderID)}),s&&s.length>0){var o=n.util.extend(B.LocalGroupImr,{goods_id:e.goodsID,group_order_ids:s.join(",")});n.logger.trackingRecord(o)}},showMallServiceDetial:function(e){this.setState({serviceDetail:e||[],serviceDetailVisible:!0})},hideServiceDetail:function(){this.setState({serviceDetailVisible:!1})},showMallCouponList:function(e){this.setState({mallCoupons:e||[],mallCouponListVisible:!0})},hideMallCouponList:function(){this.setState({mallCouponListVisible:!1})},selectedSku:function(e,t){var s=this.props.data.goods;this.setState({skuSelectorVisible:!1}),e>0&&s.isOnSale&&this.confirmOrder(e,t)},showSkuSelector:function(){if(this.state.enableBuyBtn){var e=this.props.data.goods;if(!e.isOnSale)return!1;if(1===e.isApp&&!n.platform.isNativePlatform()&&!this.state.hasInstalledApp)return this.showDownloadNotification(),!1;var t=this.state.selectedGroup||e.groupTypes[1];return!!(e.skus&&e.skus.length>0&&e.skus[0].specs&&e.skus[0].specs.length>0&&t)&&(this.setState({skuSelectorVisible:!0}),!0)}},confirmOrder:function(e,t,s){t=t||1;var o=this.props.data.goods,i=o.skus,a=null;if(1===i.length)a=i[0];else if(i.length>1)for(var r=0;r<i.length;++r)if(i[r].skuID==e){a=i[r];break}if(null!==a){var l=this.state.selectedGroup.groupID,c={sku_id:a.skuID,group_id:l,goods_id:o.goodsID,goods_number:t,et:n.url.getParameter("et")},u=n.url.getParameter("group_order_id");null!==this.state.selectedLocalGroupOrderID&&(u=this.state.selectedLocalGroupOrderID),u&&(c.group_order_id=u);var d=n.url.getParameter("wt_id");d&&(c.wt_id=d),n.platform.isWeChatPlatform()&&(c.showwxpaytitle="1"),c.refer_page_name="goods_detail";var p=this.state.referPageElement;p&&(c.refer_page_element=p);var m="order_checkout.html?"+n.url.buildQuery(c);n.user.hasAccessToken()?n.navigation.forward(m):n.user.login(null,null,function(){n.navigation.forward(m)},null,m,!0)}},groupBuy:function(e){e&&e.preventDefault();var t=this,s=this.props.data.goods,o=this.state;if(o.enableBuyBtn&&(n.logger.trackingRecord(n.util.extend(B.OpenBtnClick,{goods_id:s.goodsID,has_local_group:s.hasLocalGroup?"1":"0",event_type:s.eventType})),s.isOnSale)){if(1===s.isApp&&!n.platform.isNativePlatform()&&!o.hasInstalledApp)return void this.showDownloadNotification();if(o.subscribeData.isContactTester){var i=n.url.getParameter("group_order_id")||"",a=n.url.getParameter("wt_id")||"";n.page.weChatContactTesterForward({goodsID:s.goodsID,groupID:s.groupTypes[1].groupID,groupOrderID:i,wtID:a,resubscribe:o.subscribeData.resubscribe,isNewUserGroup:s.isNewUserGroup},s.eventType)}else this.setState({selectedGroup:s.groupTypes[1],selectedLocalGroupOrderID:null,referPageElement:"open_btn"},function(){t.state.hasSkuSelector?t.showSkuSelector():t.confirmOrder()})}},directBuy:function(e){e&&e.preventDefault();var t=this,s=this.props.data.goods,o=this.state;if(o.enableBuyBtn&&(n.logger.trackingRecord(n.util.extend(B.IconClick,{page_element:"single_buy",goods_id:s.goodsID,has_local_group:s.hasLocalGroup?"1":"0",event_type:s.eventType})),s.isOnSale)){if(1===s.isApp&&!n.platform.isNativePlatform()&&!o.hasInstalledApp)return void this.showDownloadNotification();if(s.isLottery)return void n.ui.showToast("抽奖活动暂不支持单独购买");if(s.isFreeTrial||s.isDepositeGroup)return void n.ui.showToast("免费试用活动暂不支持单独购买");if(s.isCapitalGift||s.isCapitalGiftLottery)return void n.ui.showToast("团长送礼活动暂不支持单独购买");if(o.subscribeData.isContactTester){var i=n.url.getParameter("group_order_id")||"",a=n.url.getParameter("wt_id")||"";n.page.weChatContactTesterForward({goodsID:s.goodsID,groupID:s.groupTypes[0].groupID,groupOrderID:i,wtID:a,resubscribe:o.subscribeData.resubscribe,isNewUserGroup:s.isNewUserGroup},s.eventType)}else this.setState({selectedGroup:s.groupTypes[0],selectedLocalGroupOrderID:null,referPageElement:"single_buy"},function(){t.state.hasSkuSelector?t.showSkuSelector():t.confirmOrder()})}},showDownloadNotification:function(){var e="APP专享团",t="该商品是APP专享团商品，请在APP中购买。",s=n.url.getParameters();this.setState({appDownload:{show:!0,title:e,content:t,queries:s}})},hideDownloadNotification:function(){var e=this.state.appDownload;this.setState({appDownload:{show:!1,title:e.title,content:e.content,queries:e.queries}})},handlerLocalGroup:function(e){var t=this,s=this.props.data.goods,o=this.state,i=n.util.extend(B.JoinBtnClick,{goods_id:s.goodsID,event_type:s.eventType});if(n.logger.trackingRecord(i),s.isOnSale)return 1!==s.isApp||n.platform.isNativePlatform()||o.hasInstalledApp?void(o.subscribeData.isContactTester?n.page.weChatContactTesterForward({goodsID:s.goodsID,groupID:s.groupTypes[1].groupID,groupOrderID:e,resubscribe:o.subscribeData.resubscribe,isNewUserGroup:s.isNewUserGroup},s.eventType):this.setState({selectedLocalGroupOrderID:e,selectedGroup:s.groupTypes[1],referPageElement:"local_group"},function(){t.state.hasSkuSelector?t.showSkuSelector():t.confirmOrder()})):void this.showDownloadNotification()},onRecommendLoadedAll:function(){this.setState({showRecommendHint:!0})},loadMoreRecommendData:function(e,t){var s=this;if(!t){var o=12,n=this.state.recommendList||[];if(n&&n.length>=o)return void e([]);var i=function(t){var o=n.concat(t.recommend);s.setState({recommendList:o}),e(t.recommend)};A.loadedGoodsNum=n.length,A.offset+=A.count,A.requestData(i)}},getSubscribeTopBanner:function(){var e=this.state.appDownloadInfo;return e?o.createElement(V.Module,{type:V.Constant.Type.Goods,appDownloadInfo:e,parentNodeName:"goods-top-banner"}):null},getPriceRange:function(e,t){var s={normal:[t.minOnSaleNormalPrice],group:[t.minOnSaleGroupPrice]};return t.minOnSaleNormalPrice!==t.maxOnSaleNormalPrice&&s.normal.push(t.maxOnSaleNormalPrice),t.minOnSaleGroupPrice!==t.maxOnSaleGroupPrice&&s.group.push(t.maxOnSaleGroupPrice),e.requireNum>1?s.group:s.normal},render:function(){if(this.props.data.error)return o.createElement(N,this.props.data.error);var e=this.props.data.goods,t=this.props.data.mall,s=this.props.data.lottery||null,i=this.props.data.reviews||null,a=e.bannerHeight/100+"rem",g=e.hasLocalGroup?"1":"0",v=!1;if(e.isShowBanner){var T=!0,C=B.BannerClick;C.goods_id=e.goodsID,C.has_local_group=g,C.event_type=e.eventType,v=o.createElement(r,{data:e.topGallery,height:a,viewImages:T,trackingParams:C,bannerClass:"goods-banner"})}var x=!1;t.mallCoupons&&t.mallCoupons.length>0&&(x=o.createElement(d,{data:t.mallCoupons,showMallCouponList:this.showMallCouponList}));var L=!1;this.state.mallCoupons.length>0&&(L=o.createElement(p,{data:this.state.mallCoupons,mallName:t.mallName,hideMallCouponList:this.hideMallCouponList,visible:this.state.mallCouponListVisible}));var j=!1;this.state.serviceDetail.length>0&&(j=o.createElement(u,{data:this.state.serviceDetail,tag:e.tag,hideServiceDetail:this.hideServiceDetail,visible:this.state.serviceDetailVisible}));var P=!1;if(e.isOnSale&&e.localGroups.length>0){var G={localGroups:e.localGroups,serverTime:e.serverTime,requireNum:e.groupTypes[1].requireNum};P=e.isLocalGroupHorizontal?o.createElement(f,{data:G,total:e.localGroupsTotal,forwardOrderCheckout:this.handlerLocalGroup,goodsID:e.goodsID,eventType:e.eventType}):o.createElement(h,{data:G,forwardOrderCheckout:this.handlerLocalGroup,goodsID:e.goodsID,eventType:e.eventType})}var M=!1;t&&t.mallName&&t.mallName.length>0&&(M=o.createElement(m,{data:t,goodsID:e.goodsID,eventType:e.eventType,hasLocalGroup:g}));var R=!1,O=this.state.mallRecommendList;O&&O.length>0&&(R=o.createElement(_,{list:O}));var F=!1;i&&i.detailList&&i.detailList.length>0&&(F=o.createElement(y,{data:i,subscribeData:this.state.subscribeData,hasLocalGroup:g,eventType:e.eventType}));var A=!1,U=this.state.detailList;(e.isOnSale||e.isSpikeComing)&&U&&U.length>0&&(A=o.createElement(w,{data:U}));var q=!1,W=this.state.recommendList,V=this.state.currentRecommendList;if(W&&W.length>0){var z=B.PopBtnClick;z.goods_id=e.goodsID,z.has_local_group=g,z.event_type=e.eventType;var Y=this.state.showRecommendHint,Q=!!Y&&o.createElement("div",{className:"goods-recommend-bottom"},o.createElement("div",{className:"goods-recommend-line"}),o.createElement("p",null,"已经到底部了"));q=o.createElement("div",{id:"goods-recommend-container"},o.createElement("div",{className:"goods-recommend-title"},o.createElement("span",null,"为你推荐")),o.createElement(E,{list:W,showHint:this.state.showRecommendHint,isShowed:!0,currentList:V,goTopTrackingParams:z,loadMoreDataFunc:this.loadMoreRecommendData,onLoadedAll:this.onRecommendLoadedAll,useOnce:!0,doTubesImpr:!0,tubeImprModel:H}),Q)}else q=o.createElement("div",{id:"goods-recommend-container"});var J=!1,K=this.state.bottomBarData;if(K){var Z=B.HighPriceBubble;Z.goods_id=e.goodsID,J=o.createElement(k,{data:K,groupBuy:this.groupBuy,directBuy:this.directBuy,highPriceBubbleTrackingParams:Z})}var X=!1,$=this.state.showUnreachableAddressHint;$&&(X=o.createElement("p",{className:"goods-address-hint"},"你已有的收货地址暂不在该商品的配送范围内，购买时请新增地址"));var ee=!1,te=this.state.appDownload;if(te.show){var se=te.queries||{};se.cid=["appzxdownload",e.goodsID].join("_");var oe="";if(n&&n.platform&&n.platform.isAndroidWeChatPlatform()||n.platform.isIOSWeChatPlatform()){var ne=this.props.data.extraData;oe={goodsName:e.goodsName,thumbUrl:e.thumbUrl,goodsID:e.goodsID,status:ne.status,groupRole:ne.groupRole}}ee=o.createElement(S,{title:te.title,content:te.content,queries:se,hideFunc:this.hideDownloadNotification,data:oe,show:te.show})}var ie=!1,ae=this.state.selectedGroup||e.groupTypes[1];if(this.state.hasSkuSelector&&ae){var re=e.hdThumbUrl||e.thumbUrl,le={skus:e.skus,defaultImg:re,priceRange:this.getPriceRange(ae,e),orderLimit:ae.orderLimit,isGroupBuy:ae.requireNum>1};ie=o.createElement(b,{data:le,visible:this.state.skuSelectorVisible,goodsID:e.goodsID,hasLocalGroup:g,eventType:e.eventType,callback:this.selectedSku})}var ce=!1;return this.state.showPriceDescription&&(ce=o.createElement(I,null)),o.createElement("div",{className:"goods-container-v2"},v,o.createElement(l,{data:e,lotteryRules:s}),x,o.createElement(c,{data:e,showServiceDetail:this.showMallServiceDetial}),j,P,F,M,R,A,ce,L,q,ie,J,X,ee,o.createElement(D,null))}});e.exports=T({view:z,fetchData:function(e){function s(e,s,o){return t.reject({handled:!0,alterText:e,redirectUrl:encodeURIComponent(s),isBack:o||!1})}function o(e,t,s,o){e.isOnSale||(e.isSpike||e.isSuperSpike)&&e.eventComing?e.isShowBanner=!0:e.isShowBanner=!1,s&&s.info&&(e.luckyID=s.info.luckyID||e.luckyID,e.luckyStatus=s.info.luckyStatus||e.luckyStatus,e.luckyStartTime=s.info.luckyStartTime||e.luckyStartTime,e.luckyEndTime=s.info.luckyEndTime||e.luckyEndTime,e.eventComing=e.luckyStartTime>e.serverTime);var n=null;s&&s.rules&&(n=s.rules);var a={host:i.hostname,status:c.status||null,groupRole:c.group_role||null,showSkuSelector:c.show_sku_selector||null,isNativePlatform:b},r={isWhite:!0,goods:e,mall:t,lottery:n,reviews:o||null,extraData:a};return r}function n(e){var o=e.length;if(o<=0)return t.resolve();h=parseInt(h,10)||0;var n=h%o,i=e[n];if(i>0&&i!=d){var a=c||{};a.goods_id=i;var r=[];for(var l in a)r.push(l+"="+a[l]);var u="goods.html?"+r.join("&");return s("",u,!1)}return t.resolve()}var i=e.requestContext,r=a.CookieKey.AccessToken,l=i.cookies,c=i.queries,u=l[r],d=parseInt(c.goods_id,10)||0,p=c.rec_from_group||"",m=a.CookieKey.UID,h=l[m]||"",f=i.hostname,y=i.userAgent||"",b=O.isNativePlatform(y);if(!M.isTester(h,f))return t.resolve({isWhite:!1,error:null});if(!d)return s("商品信息错误","index.html");var k=new C({req:i.__req,goodsID:d,recFromGroup:p,accessToken:u});return k.getGoodsDetail().then(function(e){return e.groupTypes.length<2?s("活动已经结束了，点击返回上一页","",!0):n(e.skipGoodsIDs).then(function(){var s=(parseInt(e.eventType,10)||0,e.isHaitao,{mallModel:0,userEventModel:0,localGroupModel:0,luckyDrawModel:0,reviewsModel:0}),n=[],a=new x({req:i.__req,mallID:e.mallID,checkMechantCoupon:"yes",accessToken:u,showDsr:g.isTester(h,f)});if(n.push(a.get()),s.mallModel=1,e.isGroupFree){var r=new L({req:i.__req,goodsID:d,accessToken:u});n.push(r.getUserEvent()),s.userEventModel=1}var l=e.groupTypes.length;if(2==e.groupTypes[l-1].requireNum&&e.isOnSale&&(!e.isSpike&&!e.isSuperSpike||!e.eventComing)){var c=new j({req:i.__req,goodsID:d,accessToken:u,isHorizontal:v.isTester(h,f)});n.push(c.getLocalGroup()),s.localGroupModel=1}if(e.luckyID&&(e.isLottery||e.isDepositeGroup||e.isFreeTrial||e.isCapitalGiftLottery)){var p="LuckyDraw";p=e.isFreeTrial?"FreeTrial":e.isDepositeGroup?"DepositeGroup":e.isCapitalGiftLottery?"CapitalGiftLottery":"LuckyDraw";var m=new P({req:i.__req,goodsID:d,rulesKey:p,accessToken:u});n.push(m.getLuckyDraw()),s.luckyDrawModel=1}if(e.rv){var y=new G({req:i.__req,goodsID:d,page:1,size:2,accessToken:u,withLabel:R.isTester(h,f)});n.push(y.getReviews()),s.reviewsModel=1}return t.all(n).then(function(t){var n=null,i=null,a=null,r=null,l=null;return t.length>0&&1===s.mallModel&&(n=t.shift()),t.length>0&&1===s.userEventModel&&(i=t.shift()),t.length>0&&1===s.localGroupModel&&(a=t.shift()),t.length>0&&1===s.luckyDrawModel&&(r=t.shift()),t.length>0&&1===s.reviewsModel&&(l=t.shift()),i&&"ok"===i.result&&(e.freeCoupon=i.freeCoupon||[],e.captainCoupon=i.captainCoupon||[]),a&&"ok"===a.result&&(e.localGroups=a.data,e.localGroupsTotal=a.total,e.isLocalGroupHorizontal=a.isHorizontal,a.data.length>0&&(e.hasLocalGroup=!0)),r&&"ok"===r.result&&(r=r.data),l&&"ok"===l.result&&(l=l.data),o(e,n,r,l)})})})},rerenderOnMount:function(e){if(e.isWhite===!1)return s.e(3,function(e){var t=[e("./components/common/rerenderViewPage.js")];(function(e){e("goods",{isWhite:!1,error:null})}).apply(null,t)}),!0}})}).call(t,s("./node_modules/imports-loader/index.js?this=>global!./node_modules/exports-loader/index.js?global.Promise!./node_modules/es6-promise/dist/es6-promise.js"))},"./constants/tracking/rank.js":function(e,t){"use strict";var s=function(){var e={Op:{PageView:"pv",Event:"event"},PageName:{Rank:"rank",HotRank:"rank_hot",NewRank:"rank_new",Subject:"subject",Goods:"goods_detail"},ReferPageName:{key:"refer_page_name",Rank:"rank",HotRank:"rank_hot",NewRank:"rank_new",Subject:"subject_list"},ReferPageSection:{key:"refer_page_section",Foot:"foot_tab",HotRank:"rank_hot_list",NewRank:"rank_new_list",Subject:"subject_list",Goods:"goods_list"},ReferPageElement:{key:"refer_page_element",Rank:"rank"},Result:{Success:1,Fail:0}};return{Field:e,VisitRank:{op:e.Op.PageView,page_name:e.PageName.Rank},ShareRank:{op:e.Op.Event,page_name:e.PageName.Rank},VisitHotRank:{op:"pv",event:"hotcity_show",page_name:"hotcity"},VisitNewRank:{op:e.Op.PageView,page_name:e.PageName.NewRank},VisitSubject:{op:e.Op.PageView,page_name:e.PageName.Subject},ShareHotRank:{op:e.Op.Event,page_name:e.PageName.HotRank},ShareNewRank:{op:e.Op.Event,page_name:e.PageName.NewRank},ShareHotCity:{op:"event",page_name:"hotcity",event:"hotcity_share"}}}();e.exports=s},"./constants/index.js":function(e,t,s){"use strict";var o=s("./constants/modules/index.js"),n=s("./constants/tracking/index.js");e.exports={Modules:o,Tracking:n,Subject:s("./constants/subject.js"),Other:{ListWrapperForIos:"list-wrapper-for-ios"}}},"./constants/modules/index.js":function(e,t,s){"use strict";var o=s("./constants/modules/portalNavigation.js"),n=s("./constants/modules/entrance.js"),i=s("./constants/modules/rank.js");e.exports={PortalNavigation:o,Entrance:n,Rank:i}},"./constants/modules/portalNavigation.js":function(e,t){"use strict";var s=function(){return[{id:0,optType:1,optName:"首页",priority:0,show:!0},{id:1,optType:1,optName:"食品",priority:2,show:!0,optId:1},{id:14,optType:1,optName:"服饰箱包",priority:1,show:!0,optId:14},{id:15,optType:1,optName:"家居生活",priority:3,show:!0,optId:15},{id:18,optType:1,optName:"数码电器",priority:4,show:!0,optId:18},{id:4,optType:1,optName:"母婴",priority:8,show:!0,optId:4},{id:16,optType:1,optName:"美妆护肤",priority:5,show:!0,optId:16},{id:13,optType:1,optName:"水果生鲜",priority:7,show:!0,optId:13},{id:818,optType:1,optName:"家纺家具",priority:6,show:!0,optId:818}]}();e.exports=s},"./constants/modules/entrance.js":function(e,t){"use strict";function s(e){var t={};for(var s in e)t[s]=e[s];return t}function o(e,t){e=e||[];var t=t||Date.now();return e.map(function(e,o){var n=s(i[e]);return n.priority=o,t>=new Date("2017/06/12").getTime()&&t<=new Date("2017/06/21").getTime()&&(n.imageForActivity="entrance/act/170618/"+o+".png"),n})}var n={TimeSpike:"time_spike",SuperSpike:"super_spike",FreeTrial:"free_trial",Special99:"special_99",Lottery:"lottery",Oversea:"oversea",AppOnly:"app_only",GoodFruit:"good_fruit",PreferentialFamily:"preferential_family",EntryLux:"entry_lux",GoShopping:"go_shopping",ElectricCity:"electric_city",Food:"food",Furniture:"furniture",ChargeCenter:"charge_center",Maternal:"maternal",RankHot:"rank_hot",FlashGroups:"flash_groups",PrimeSubjects:"prime_subjects",EconomicalBrand:"economical_brand"},i={};i[n.Oversea]={name:"海淘",imgUrlInCdn:"entrance/v2/3x/oversea.png",forwardUrl:"haitao.html?refer_page_name=index&refer_page_section=icon_list&refer_page_element=haitao_code",key:n.Oversea,show:!0,pageSrc:"haitao_code"},i[n.ElectricCity]={name:"电器城",imgUrlInCdn:"entrance/v2/3x/subject_973.png",forwardUrl:"subjects.html?subjects_id=23",key:n.ElectricCity,show:!0,pageSrc:"electric_city"},i[n.TimeSpike]={name:"限时秒杀",imgUrlInCdn:"entrance/v2/3x/spike.png",imageForActivity:"entrance/v2/3x/spike_act.png",forwardUrl:"spike.html",showDynamicTip:!0,key:n.TimeSpike,show:!0,pageSrc:"time_spike",redPointKey:"time_spike"},i[n.SuperSpike]={name:"品牌清仓",imgUrlInCdn:"entrance/v2/3x/super_spike.png",forwardUrl:"subjects.html?subjects_id=14",key:n.SuperSpike,show:!0,pageSrc:"super_spike",redPointKey:"super_brands"},i[n.FreeTrial]={name:"免费试用",imgUrlInCdn:"entrance/v2/3x/free_trial.png",forwardUrl:"free_trial_page.html",key:n.FreeTrial,show:!1,pageSrc:"free_try"},i[n.Special99]={name:"9块9特卖",imgUrlInCdn:"entrance/v2/3x/special99.png",forwardUrl:"subjects.html?subjects_id=12",key:n.Special99,show:!0,pageSrc:"bargain"},i[n.Maternal]={name:"省钱妈咪",imgUrlInCdn:"entrance/v2/3x/subjects_20_v2.png",imageForActivity:"entrance/v2/3x/subjects_20_act_0601_v2.gif",forwardUrl:"subjects.html?subjects_id=20",key:n.Maternal,show:!0,pageSrc:"maternal"},i[n.Food]={
name:"美食汇",imgUrlInCdn:"entrance/v2/3x/food.png",forwardUrl:"subjects.html?subjects_id=17",imageForActivity:"entrance/v2/3x/subjects_17_517.png",key:n.Food,show:!0,pageSrc:"food"},i[n.Furniture]={name:"家居优品",imgUrlInCdn:"entrance/v2/3x/furniture.png",forwardUrl:"subjects.html?subjects_id=18",key:n.Furniture,show:!0,pageSrc:"furniture"},i[n.Lottery]={name:"抽奖",imgUrlInCdn:"entrance/v2/3x/lottery.png",forwardUrl:"lottery.html",key:n.Lottery,show:!1,pageSrc:"lottery",redPointKey:"lucky_draw"},i[n.GoShopping]={name:"爱逛街",imgUrlInCdn:"entrance/v2/3x/subjects_15.png",imageForActivity:"entrance/v2/3x/subjects_15_act.gif",forwardUrl:"subjects.html?subjects_id=15&refer_page_name=index&refer_page_section=icon_list&refer_page_element=go_shopping",key:n.GoShopping,show:!0,pageSrc:"go_shopping"},i[n.GoodFruit]={name:"品质水果",imgUrlInCdn:"entrance/v2/3x/subjects_11_v1.png",imageForActivity:"entrance/v2/3x/subjects_11_517.png",forwardUrl:"subjects.html?subjects_id=11&refer_page_name=index&refer_page_section=icon_list&refer_page_element=good_fruit",key:n.GoodFruit,show:!0,pageSrc:"good_fruit"},i[n.EntryLux]={name:"爱轻奢",imgUrlInCdn:"entrance/v2/3x/entry_lux.png",forwardUrl:"subjects.html?subjects_id=22",key:n.EntryLux,show:!0,pageSrc:"entry_lux"},i[n.ChargeCenter]={name:"手机充值",imgUrlInCdn:"entrance/v2/3x/charge_center.png",forwardUrl:"subjects.html?subjects_id=19",key:n.ChargeCenter,show:!0,pageSrc:"charge_center",redPointKey:"charge_center"},i[n.RankHot]={name:"同城排行",imgUrlInCdn:"entrance/v2/3x/rank_hot.png",forwardUrl:"rank_hot.html",key:n.RankHot,show:!0,pageSrc:"rank_hot"},i[n.PrimeSubjects]={name:"精选专题",imgUrlInCdn:"entrance/v2/3x/prime_subjects.png",forwardUrl:"prime_subjects.html",key:n.PrimeSubjects,show:!0,pageSrc:"prime_subjects"},i[n.FlashGroups]={name:"极速红包团",imgUrlInCdn:"entrance/v2/3x/flash_groups.png",forwardUrl:"flash_groups.html",key:n.FlashGroups,show:!0,pageSrc:"flash_groups"},i[n.EconomicalBrand]={name:"名品折扣",imgUrlInCdn:"entrance/v2/3x/economical_brand_v2.png",forwardUrl:"economical_brand.html",key:n.EconomicalBrand,show:!0,pageSrc:"economical_brand",redPointKey:"economical_brand"};var a=[n.TimeSpike,n.SuperSpike,n.EconomicalBrand,n.GoodFruit,n.Maternal,n.GoShopping,n.Special99,n.FlashGroups,n.Food,n.ChargeCenter],r=[n.TimeSpike,n.SuperSpike,n.EconomicalBrand,n.GoodFruit,n.Maternal,n.Oversea,n.Furniture,n.GoShopping,n.Special99,n.FlashGroups,n.Food,n.ChargeCenter,n.ElectricCity,n.EntryLux],l=o(a),c=o(r),u={};!function(e,t,s){e.forEach(function(e,o){u[e]={START:t,END:s}})}(r,new Date("2017/06/12").getTime(),new Date("2017/06/21").getTime());var d={};d[n.TimeSpike]={dayOfWeek:[1,5],timeslices:[{START:72e3,END:86400}]},d[n.ChargeCenter]={redPointDayOfMonth:[26,27,28,29,30,31,1,2,3,4]};var p={sequenceA:l,sequenceB:c,key:n,activityTimeStamp:u,regularActivityConfig:d,getSequenceA:function(e){return o(a,e)},getSequenceB:function(e){return o(r,e)}};e.exports=p},"./constants/modules/rank.js":function(e,t,s){"use strict";var o=s("./models/util.js"),n=s("./configs/app/index.js").constant,i=function(){return{SnapshotName:{Hot:"同城排行",New:"精选新品",Subject:"精选专题"},Api:{HotList:"v2/ranklist?page={0}&size={1}",NewList:"v3/newlist?page={0}&size={1}",Subject:"rank_subjects?page={0}&size={1}"},SnapshotGoodsListSize:10,Title:{Hot:"同城排行",New:"新品推荐",Rank:"排行榜"},ShareInfoForRank:{title:"排行榜",shareURL:"rank.html",message:"如何找到便宜又优质的热门商品？点这里查看",thumbnailURL:o.getCDNImgURL("share/rank_v2.png"),waterMark:n.WaterMark.None,forceShareToWeChatTimeline:!0,appShareNotUseDelete:!0},ShareInfoForHot:{title:"同城排行",shareURL:"rank_hot.html",message:"如何找到同城热卖商品？点这里查看",thumbnailURL:o.getCDNImgURL("share/rank.jpg"),waterMark:n.WaterMark.None,forceShareToWeChatTimeline:!0,appShareNotUseDelete:!0},ShareInfoForNew:{title:"新品尝鲜",shareURL:"rank_new.html",message:"如何找到最新发布的优质商品？点这里查看",thumbnailURL:o.getCDNImgURL("share/rank_new.png"),waterMark:n.WaterMark.None,forceShareToWeChatTimeline:!0,appShareNotUseDelete:!0},BannerUrl:{New:o.getCDNImgURL("base/banner_rank_new.png"),Hot:o.getCDNImgURL("base/banner_rank_hot.png")},HintText1:"专题看完了，去看看",HintText2:"吧"}}();e.exports=i},"./constants/tracking/index.js":function(e,t,s){"use strict";var o=s("./constants/tracking/rank.js");e.exports={Rank:o}},"./constants/subject.js":function(e,t){"use strict";e.exports={LANG_NO_SUBJECT:"找不到这个专题",TOP_NUM:20,BASE_NUM:20,SPECIAL_99_ID:384,ONE_PURCHASE_ID:452,FRUITS_GROUP_ID:502,PREFERENTIAL_FAMILY_ID:559,shareInfo:{DefaultDesc:"优质商品精心挑选，走过路过不要错过"},MaxRollContentLen:10,LOAD_SIZE:50,ListClass:{Default:"",Single:"subject-single-goods",Double:"subject-double-goods"},ReferPageName:{PreferentialFamily:"preferential_family"},SubjectType:{carnivalSubject:"carnival",categoryDaySubject:"category_day",brandDaySubject:"brand_day"},SubjectsCollectionType:{spec99:"spec99"},SubjectsCollectionTitle:{spec99:"9块9特卖"}}},"./components/widgets/SingleListItemV2/index.js":function(e,t,s){"use strict";var o=s("./components/vendor/react.min.js"),n="undefined"!=typeof window?s("./components/common/index.js"):{},i=s("./components/widgets/SingleListItemV2/localGroups.js"),a=s("./manager/index.js").goods.getInstance(),r=o.createClass({displayName:"SingleListItemV2",getInitialState:function(){return{}},getDefaultProps:function(){return{goodsID:null,goodsData:{}}},getGoodsData:function(){return a.getGoodsDataByID(this.props.goodsID)||this.props.goodsData},handleGoodsClick:function(e){var t=this,s=t.props.extraTrackingParams;e&&(e.preventDefault(),e.stopPropagation());var o={queries:{item_index:t.props.inViewIndex}},i=this.getGoodsData(),a=function(){var e=i.forwardUrl||"goods.html?goods_id="+t.props.goodsID;t.props.referPageName&&(e+="&refer_page_name="+i.referPageName),e+="&is_spike="+(2===i.eventType?"1":"0"),n.navigation.forward(e)};n.page.setPageScrollPosition(o,function(){s?(s.idx=t.props.inViewIndex,s.goods_id=i.goodsID,s.event_type=i.eventType,s.is_app=i.isApp,n.logger.trackingRecord(s,a)):a()})},componentWillMount:function(){var e=this.getGoodsData();e&&!a.getGoodsDataByID(e.goodsID)&&a.updateGoodsInfo(e),this.setState({nationalFlag:e.nationalFlag,soldQuantity:e.hideSoldQuantity||"0"===e.soldQuantity.toString()?"":e.soldQuantity,likeFirstItem:this.props.hasSlipAbove||0===this.props.inViewIndex})},render:function(){var e,t=this.getGoodsData(),s=t.goodsID,n=this.props.inViewIndex;this.state.nationalFlag&&(e=o.createElement("img",{className:"national-flag",src:this.state.nationalFlag}));var a;this.state.soldQuantity&&(a=o.createElement("span",null,"已团",this.state.soldQuantity,"件"));var r;return this.state.likeFirstItem||(r=o.createElement("div",{className:"top-line"})),o.createElement("div",{className:"single-list-item-v2"+(this.state.likeFirstItem?" first-item":""),onClick:this.handleGoodsClick},o.createElement("div",{className:"std-goods-image-square goods-image"},o.createElement("img",{"data-url":t.thumbUrl,"data-index":n})),o.createElement("div",{className:"detail"},o.createElement("p",{className:"goods-name"},e,t.goodsName),o.createElement(i,{goodsID:s}),o.createElement("div",{className:"core"},o.createElement("div",{className:"info"},a),o.createElement("span",{className:"sale-price"},o.createElement("i",null,"￥"),t.price)),o.createElement("div",{className:"enter-button enter-button-arrow"},"去开团"),r))}});e.exports=r},"./components/widgets/SingleListItemV2/localGroups.js":function(e,t,s){"use strict";var o=s("./components/vendor/react.min.js"),n=s("./manager/index.js").goods.getInstance(),i=s("./command/GoodsCommand.js").getInstance(),a=s("./proxy/GoodsProxy.js").getInstance(),r=o.createClass({displayName:"LocalGroups",getInitialState:function(){return{list:[],bubble:"",style:{display:"none"}}},getDefaultProps:function(){return{goodsID:null}},componentWillMount:function(){this.setupLocalGroups()},componentDidMount:function(){var e=this;a.registerLocalGroups(this.props.goodsID,function(){e.setupLocalGroups()}),i.loadLocalGroups(this.props.goodsID)},setupLocalGroups:function(){var e=n.getLocalGroups(this.props.goodsID);if(e&&e.list.length){var t=[];e.list.forEach(function(e){t.push({avatar:e.avatar,display:e.avatar?"":"none"})}),this.setState({list:t,bubble:e.bubble,style:{display:""}})}},avatarLoadFailed:function(e){if(this.state.list[e]){var t=this.state.list.slice();t[e].display="none",this.setState({list:t})}},render:function(){var e=this,t=[],s=e.state.list.length;return e.state.list.forEach(function(n,i){t.push(o.createElement("div",{className:"avatar"+(1===s?" single-avatar":""),key:i},o.createElement("img",{src:n.avatar,style:{display:n.display},onError:function(){e.avatarLoadFailed(i)}})))}),o.createElement("div",{className:"local-groups",style:e.state.style},o.createElement("span",{className:"local-groups-bubble"},e.state.bubble),t.reverse())}});e.exports=r},"./manager/index.js":function(e,t,s){"use strict";var o=s("./manager/GoodsManager.js"),n=s("./manager/PopupManager.js"),i=s("./manager/PageManager.js"),a=s("./manager/ActivityManager.js"),r=s("./manager/ModuleListManager.js");e.exports={mall:s("./manager/MallManager.js"),mallCollection:s("./manager/MallCollectionManager.js"),goods:o,popup:n,page:i,activity:a,moduleList:r}},"./manager/GoodsManager.js":function(e,t,s){"use strict";function o(){this.goodsInfos={}}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=s("./models/common/goodsInfo/index.js");o.prototype={getGoodsInfoByID:function(e){return e=e.toString(),this.goodsInfos[e]},getGoodsDataByID:function(e){var t=this.getGoodsInfoByID(e)||{};return t.data},updateGoodsInfo:function(){var e,t,s=arguments[0];if(null!=s){if("object"!==("undefined"==typeof s?"undefined":n(s)))e=arguments[0].toString(),s=arguments[1]||{},t=arguments[2];else{if(e=s.goodsID||s.goods_id||s.key,!e)return;e=e.toString(),t=arguments[1]}var o=this.goodsInfos[e];return o?o.update(s):(o=new i(e,s),this.goodsInfos[e]=o),"function"==typeof t&&t(),o}},shouldLoadLocalGroups:function(e){var t=this.getGoodsInfoByID(e);return t&&t.shouldLoadLocalGroups},getLocalGroups:function(e){var t=this.getGoodsInfoByID(e);return t?t.getLocalGroups():null},setLocalGroupsLoading:function(e){var t=this.getGoodsInfoByID(e);t&&t.setLocalGroupsLoading()}},e.exports={instance:null,getInstance:function(){return this.instance||(this.instance=new o),this.instance}}},"./models/common/goodsInfo/index.js":function(e,t,s){"use strict";function o(){var e=arguments[0];if(!e)return null;var t;if("object"!==("undefined"==typeof e?"undefined":n(e)))t=arguments[0].toString(),e=arguments[1]||{};else{if(t=e.goodsID||e.goods_id||e.key,!t)return;t=t.toString()}this.key=this.goodsID=t,this.init(e)}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=s("./constants/goods/index.js"),a=i.EventType,r=s("./models/util.js"),l=s("./models/common/goodsInfo/localGroup.js"),c={Default:0,Loading:1,Setting:2,Loaded:3};o.prototype={init:function(e){this.data={localGroupsInfo:{list:[],bubble:"",status:c.Default},set localGroups(e){if(e){var t=[];if(r.isArray(e))t=e;else{if(!r.isArray(e.list))return;t=e.list}var s=this;s.localGroupsInfo={list:[],bubble:e.bubble||"来拼团吧",status:c.Setting},t.forEach(function(e){var t=new l(e);s.localGroupsInfo.list.push(t)}),s.localGroupsInfo.status=null!=e.status?e.status:c.Loaded}},get localGroups(){return this.localGroupsInfo},get isCompleteLottery(){var e=parseInt(this.eventType,10);return!!e&&[a.LUCKY_DRAW,a.FREE_TRIAL,a.CAPITAL_GIFT_LOTTERY,a.DEPOSITE_GROUP].indexOf(e)>=0},get showDiscount(){var e=parseInt(this.eventType,10);return!e||[a.CAPITAL_GIFT,a.CAPITAL_GIFT_LOTTERY].indexOf(e)===-1},get showExpress(){var e=this.goodsType||"";if(e&&e===i.GoodsType.TRADE_COUPON)return!1;var t=this.catID2||"";return!t||t!==i.CategoriesType.CHARGE_CENTER&&t!==i.CategoriesType.VIP_CHARGE},get hideSoldQuantity(){return this.isCompleteLottery},get isSpike(){return parseInt(this.eventType,10)===a.SPIKE},get isFreeTrial(){return parseInt(this.eventType,10)===a.FREE_TRIAL},get isDepositeGroup(){return parseInt(this.eventType,10)===a.DEPOSITE_GROUP}},this.update(e)},update:function(e){e=e||{};var t=this;for(var s in e)if(e.hasOwnProperty(s)){if(!t.data.__lookupSetter__(s)&&t.data.__lookupGetter__(s))continue;t.data[s]=e[s]}},get shouldLoadLocalGroups(){return this.data.localGroupsInfo.status===c.Default},getLocalGroups:function(){return this.data.localGroups},setLocalGroupsLoading:function(){this.data.localGroupsInfo.status=c.Loading}},e.exports=o},"./models/common/goodsInfo/localGroup.js":function(e,t,s){"use strict";function o(e){if(!e)return null;if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}this.init(e)}var n=s("./models/util.js"),i={name:"游客",avatar:n.getCDNImgURL("base/logo.jpg"),userNum:1};o.prototype={init:function(e){this.avatar=n.getAvatarURL(e.avatar)||i.avatar,this.cityName=e.city_name||"",this.expireTime=parseInt(e.expire_time,10)||0,this.goodsID=e.goods_id,this.groupOrderID=e.group_order_id,this.nickname=e.nickname||i.name,this.usersNum=e.usersNum||i.usersNum}},e.exports=o},"./manager/PopupManager.js":function(e,t,s){"use strict";function o(){this.init()}var n=s("./constants/popup/index.js"),i={Waiting:0,Consuming:1,Consumed:2,Removed:-1};o.prototype={Constant:{TaskName:n.IndexPopup},init:function(){this.pointer=0,this.total=n.IndexOrder.length,this.squence=[]},produce:function(e,t){t=t||{};var s=n.IndexOrder.indexOf(e);if(s!==-1){this.squence[s]=this.squence[s]||{status:i.Waiting};var o=this;"function"==typeof t.show&&(o.squence[s].show=t.show),o.squence[s].withoutDelay=t.withoutDelay||!1,s===this.pointer&&this.consume()}},consume:function(){for(;this.pointer<this.total&&this.squence[this.pointer]&&this.squence[this.pointer].status!==i.Waiting;)this.pointer++;if(!(this.pointer>=this.total)&&this.squence[this.pointer]){var e=this.squence[this.pointer].show;"function"==typeof e&&(this.squence[this.pointer].status=i.Consuming,e()),this.squence[this.pointer].withoutDelay&&this.completeByOrder(this.pointer)}},remove:function(e){var t=n.IndexOrder.indexOf(e);t!==-1&&(this.squence[t]=this.squence[t]||{},this.squence[t].status=i.Removed,t===this.pointer&&this.consume())},completeByOrder:function(e){e===this.pointer&&(this.squence[e].status=i.Consumed,this.pointer++,this.consume())},completeByName:function(e){var t=n.IndexOrder.indexOf(e);this.completeByOrder(t)}},e.exports={instance:null,getInstance:function(){return this.instance||(this.instance=new o),this.instance}}},"./constants/popup/index.js":function(e,t){"use strict";var s={Double12:"double12",NewYear:"new_year",PromotionActivity:"promotion_activity",UnpayedAlarm:"unpayed_alarm",CouponExpire:"coupon_expire",ForceContact:"force_contact"},o=[s.ForceContact,s.PromotionActivity,s.UnpayedAlarm,s.CouponExpire];e.exports={IndexPopup:s,IndexOrder:o}},"./manager/ModuleListManager.js":function(e,t,s){"use strict";function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i,a=function(){function e(e,t){for(var s=0;s<t.length;s++){var o=t[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,s,o){return s&&e(t.prototype,s),o&&e(t,o),t}}();i=s("./components/common/util.js");var r=function(){function e(t){n(this,e),this.name=t.name,this.pageManager=t.pageManager,this.requestContext=t.requestContext,this.savedKey=[this.pageManager.getPageName(),this.name].join("_")}return a(e,[{key:"getModuleListID",value:function(){var e=this.savedKey;return this.requestContext?this.requestContext.cookies[e]:i.getCookieByName(e)||localStorage.getItem(e)}},{key:"setModuleListID",value:function(){var e,t=864e5,s=[this.savedKey,i.getRandomString(6)].join("_");return this.requestContext?(this.requestContext.setCookie(this.savedKey,s,t),s):(i.saveToLocalStorage(this.savedKey,s),i.setCookie((e={},o(e,this.savedKey,s),o(e,"msec",t),e)),s)}},{key:"listID",get:function(){var e=this.pageManager.getQuery();return e.is_back&&this.getModuleListID()?this.getModuleListID():this.setModuleListID()}}]),e}();e.exports={getInstance:function(e){return new r(e)}}},"./manager/MallManager.js":function(e,t,s){"use strict";function o(){this.Constant=i,this.malls={},this.collectedMalls=[],this.lastFavTime=0}var n=s("./models/common/MallInfo.js"),i=s("./constants/mall/index.js");o.prototype.getMallInfoByID=function(e){if(e)return this.malls[e.toString()]},o.prototype.getMallDataByID=function(e){var t=this.getMallInfoByID(e);return(t||{}).data},o.prototype.updateMallInfo=function(e){e=e||{};var t=e.mallID;if(t){t=t.toString();var s=this.getMallInfoByID(t);return s||(s=this.malls[t]=new n(t)),s.update(e),s}},e.exports={instance:null,getInstance:function(){return this.instance||(this.instance=new o),this.instance}}},"./models/common/MallInfo.js":function(e,t,s){"use strict";function o(e,t){e&&(this.id=this.key=this.mallID=e.toString(),this.data={},t&&this.update(t))}s("./models/util.js");o.prototype.update=function(e){if(e=e||{},!e.mallID||e.mallID.toString()===this.mallID)for(var t in e)if(e.hasOwnProperty(t)){var s=e[t];if(!this.data.__lookupSetter__(t)&&this.data.__lookupGetter__(t))continue;if(void 0===s)continue;this.data[t]=s}},e.exports=o},"./constants/mall/index.js":function(e,t){"use strict";e.exports={DescHint:{ShowMore:"查看更多",Hide:"收起"}}},"./manager/MallCollectionManager.js":function(e,t,s){"use strict";function o(){this.collectedMalls=[],this.lastFavTime=0}var n=s("./constants/storage/index.js"),i=n.LocalStorageKey.MallCollection,a=n.SessionStorageKey.CollectionMallIDsCheck,r=s("./models/DataFormat/mall.js"),l=s("./manager/MallManager.js").getInstance();o.prototype.setFuncs=function(e){e=e||{},this.saveFunc=this.saveFunc||e.saveFunc,this.loadFunc=this.loadFunc||e.loadFunc},o.prototype.saveCollection=function(){var e=this.encodeCollection();this.saveFunc?this.saveFunc(e):"undefined"!=typeof localStorage&&localStorage.setItem(i,e)},o.prototype.loadCollection=function(){var e=this;this.loadFunc?this.loadFunc(function(t){e.decodeCollection(t)}):"undefined"!=typeof localStorage&&e.decodeCollection(localStorage.getItem(i))},o.prototype.encodeCollection=function(){var e=[];for(var t in this.collectedMalls)this.collectedMalls.hasOwnProperty(t)&&this.collectedMalls[t]&&e.push(t);return[this.lastFavTime,e.join("|")].join(":")},o.prototype.decodeCollection=function(e){var t=(e||"").split(":"),s=parseInt(t[0],10)||0;this.updateLastFavTime(s);var o=(t[1]||"").split("|");this.updateFavMallIDs(o)},o.prototype.like=function(e){e=(e||"").toString(),e&&(this.collectedMalls[e]=!0,this.saveCollection())},o.prototype.checkLike=function(e){if(e=(e||"").toString())return this.collectedMalls[e]},o.prototype.dislike=function(e){e=(e||"").toString(),e&&(delete this.collectedMalls[e],this.saveCollection())},o.prototype.checkDislike=function(e){if(e=(e||"").toString())return!this.collectedMalls[e]},o.prototype.updateLastFavTime=function(e){this.lastFavTime=e||this.lastFavTime||0},o.prototype.updateFavMallIDs=function(e,t){t&&(this.collectedMalls={});var s=this;e=e||[],e.forEach(function(e){e=(e||"").toString(),e&&(s.collectedMalls[e]=!0)}),this.saveCollection()},o.prototype.appendFavMallList=function(e,t){t&&(this.collectedMalls={});var s=this;e=e||[];var o=[];return e.forEach(function(e){var t=r.info(e);if(t){l.updateMallInfo(t.data);var n=t.data.mallID;n&&!s.collectedMalls[n]&&(s.collectedMalls[n]=!0,o.push({props:t.props,mallID:n}))}}),this.saveCollection(),o},o.prototype.notCheckedFromSession=function(){return"undefined"!=typeof sessionStorage&&!sessionStorage.getItem(a)},o.prototype.init=function(e){e=e||{},this.isNative=e.isNative,this.setFuncs(e);var t=this;this.notCheckedFromSession()?(s("./proxy/MallCollectionProxy.js").getInstance().registerLikeIDs({onSuccess:function(){sessionStorage.setItem(a,"1")},onFailed:function(){t.loadCollection()}}),s("./command/MallCollectionCommand.js").getInstance().requestLikeIDs()):this.loadCollection()},o.prototype.clear=function(){this.saveFunc?this.saveFunc(""):"undefined"!=typeof localStorage&&localStorage.removeItem(i)},e.exports={instance:null,getInstance:function(){return this.instance||(this.instance=new o),this.instance}}},"./models/DataFormat/mall.js":function(e,t,s){"use strict";function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var n=s("./models/util.js");e.exports={listItem:function(e,t){var s=e.group||{},o=e.goods_id,i={goodsID:o,goodsName:e.goods_name,price:n.StdFormat.price(e.price||s.price,100),shortGoodsName:e.short_name||e.goods_name,normalPrice:n.StdFormat.price(e.normal_price,100),discount:n.StdFormat.price((e.market_price||e.normal_price)-(e.price||s.price),100),customerNum:parseInt(e.customer_num||s.customer_num,10),soldQuantity:n.StdFormat.sales(e.cnt),eventType:null!=e.event_type?parseInt(e.event_type,10)||0:null,country:e.country||""};e.image_url&&(i.imageUrl=n.cdnCompress(e.image_url,t.type,t.webpEnable));var a=e.hd_thumb_url||e.thumb_url;a&&(i.thumbUrl=i.imgUrl=n.cdnCompress(a,t.type,t.webpEnable)),i.imgUrl=i.thumbUrl||i.imageUrl;var r={key:"goods_"+o,forwardUrl:function(){var e="goods.html?goods_id="+o;return t.referPageName&&(e+="&refer_page_name="+t.referPageName),e}(),listItemName:"doubleGridItem",eventType:null!=e.event_type?parseInt(e.event_type,10)||0:null,get extraTrackingParams(){return t.clickTrackingParams&&t.mallID?n.extend(t.clickTrackingParams,{goods_id:o}):null},withLocalGroups:t.withLocalGroups,isDoubleList:!0};return{data:i,props:r}},info:function(e,t){var s;e=e||{};var n=(s={mallID:e.mall_id,logo:e.logo,mallName:e.mall_name,hasCoupon:void 0!==e.mall_coupon_available?parseInt(e.mall_coupon_available,10)>0:void 0,isOpen:void 0!==e.is_open?parseInt(e.is_open,10)>0:void 0},o(s,"isOpen",void 0!==e.is_open?parseInt(e.is_open,10)>0:void 0),o(s,"sales",void 0!==e.mall_sales?parseInt(e.mall_sales,10)||0:void 0),s),i={};return{data:n,props:i}}}},"./proxy/MallCollectionProxy.js":function(e,t,s){"use strict";function o(){n.call(this)}var n=s("./proxy/base.js"),i=s("./node_modules/webpack/node_modules/node-libs-browser/node_modules/util/util.js"),a=s("./event/mallCollection.js"),r=a.constant,l=s("./manager/MallCollectionManager.js").getInstance();i.inherits(o,n),o.prototype.registerLike=function(e){var t=a.get(r.Like,{mallID:e.mallID});this.register(t.getKey(),e,t)},o.prototype.receiveLike=function(e,t,s){!e&&t&&(l.like(s.mallID),l.updateLastFavTime(t.time)),this.receive(s.getKey(),e,t,s)},o.prototype.registerDislike=function(e){var t=a.get(r.Dislike,{mallID:e.mallID});this.register(t.getKey(),e)},o.prototype.receiveDislike=function(e,t,s){!e&&t&&(l.dislike(s.mallID,t.time),l.updateLastFavTime(t.time)),this.receive(s.getKey(),e,t,s)},o.prototype.registerLikeIDs=function(e){var t=a.get(r.LikeIDs);this.register(t.getKey(),e)},o.prototype.receiveLikeIDs=function(e,t,s){!e&&t&&(l.updateFavMallIDs(t.mall_id_list,!0),l.updateLastFavTime(t.favorite_mall_update_time)),this.receive(s.getKey(),e,t,s)},o.prototype.registerLikeList=function(e){var t=a.get(r.LikeList,e.query);this.register(t.getKey(),e)},o.prototype.receiveLikeList=function(e,t,s){var o=[];!e&&t&&(o=l.appendFavMallList(t.mall_list),l.updateLastFavTime(t.favorite_mall_update_time)),this.receive(s.getKey(),e,o,s)},e.exports={instance:null,getInstance:function(){return this.instance||(this.instance=new o),this.instance}}},"./proxy/base.js":function(e,t){"use strict";function s(){this.callbacksMap={}}s.prototype.register=function(e,t){t=t||{};var s="function"==typeof t.onSuccess?t.onSuccess:null,o="function"==typeof t.onFailed?t.onFailed:null;e&&(s||o)&&(this.callbacksMap[e]||(this.callbacksMap[e]=[]),this.callbacksMap[e].push({onSuccess:s,onFailed:o}))},s.prototype.receive=function(e,t,s,o){if(o&&(s=s||{},e&&(o.setRequested&&o.setRequested(),this.callbacksMap[e]))){var n=this.callbacksMap[e]||[];n.forEach(function(e,o){t&&e.onFailed?e.onFailed(t,s):!t&&e.onSuccess&&e.onSuccess(s)})}},e.exports=s},"./event/mallCollection.js":function(e,t,s){"use strict";function o(e,t){n.call(this,e,t)}var n=s("./event/base.js"),i=s("./node_modules/webpack/node_modules/node-libs-browser/node_modules/util/util.js"),a={LikeIDs:{method:"GET",route:"favorite/mall/id/list"},LikeList:{method:"GET",route:"favorite/mall/list?page={$page}&size={$size}"},Like:{method:"POST",route:"favorite/mall/like/{$mallID}"},Dislike:{method:"POST",route:"favorite/mall/unlike/{$mallID}"}};i.inherits(o,n),e.exports={events:null,constant:a,get:function(e,t){this.events||(this.events={});var s=new o(e,t),n=s.getKey();return this.events[n]?s=this.events[n]:this.events[n]=s,s}}},"./event/base.js":function(e,t,s){"use strict";function o(e,t){this.init(e),this.init(t,!0),this.formatRoute(),this.requestStatus=n.unrequested}var n=s("./constants/network.js");o.prototype.getKey=function(){return this.key||this.createKey(),this.key},o.prototype.getMethod=function(){return(this.method||"get").toUpperCase()},o.prototype.getRoute=function(){return this.route},o.prototype.isRequesting=function(){return this.requestStatus===n.RequestStatus.requesting},o.prototype.setRequesting=function(){this.requestStatus=n.RequestStatus.requesting},o.prototype.setRequested=function(){this.requestStatus=n.RequestStatus.requested},o.prototype.init=function(e,t){e=e||{};for(var s in e)e.hasOwnProperty(s)&&(t||null==this[s])&&(this[s]=e[s])},o.prototype.createKey=function(){this.key=[this.getMethod(),this.getRoute()].join(":")},o.prototype.formatRoute=function(){if(this.route){var e=this;this.route=this.route.replace(/{\$[a-zA-Z0-9]+}/g,function(t){var s=t.slice(2,-1);return e[s]||""})}},e.exports=o},"./command/MallCollectionCommand.js":function(e,t,s){"use strict";function o(){}var n=s("./network/index.js").getInstance(),i=s("./event/mallCollection.js"),a=i.constant,r=s("./proxy/MallCollectionProxy.js").getInstance(),l=s("./manager/MallCollectionManager.js").getInstance();o.prototype.like=function(e){if(!l.checkLike(e)){var t=i.get(a.Like,{mallID:e});t&&!t.isRequesting()&&(t.setRequesting(),n.apiRequest(t.getMethod(),t.getRoute(),null,function(e){r.receiveLike(0,e,t)},function(e,s){r.receiveLike(e||-1,s,t)}))}},o.prototype.dislike=function(e){if(l.checkLike(e)){var t=i.get(a.Dislike,{mallID:e});t&&!t.isRequesting()&&(t.setRequesting(),n.apiRequest(t.getMethod(),t.getRoute(),null,function(e){r.receiveDislike(0,e,t)},function(e,s){r.receiveDislike(e||-1,s,t)}))}},o.prototype.requestLikeIDs=function(){var e=i.get(a.LikeIDs);e&&!e.isRequesting()&&(e.setRequesting(),n.apiRequest(e.getMethod(),e.getRoute(),null,function(t){r.receiveLikeIDs(0,t,e)},function(t,s){r.receiveLikeIDs(t||-1,s,e)}))},o.prototype.requestLikeList=function(e){var t=i.get(a.LikeList,e);t&&!t.isRequesting()&&(t.setRequesting(),n.apiRequest(t.getMethod(),t.getRoute(),null,function(e){r.receiveLikeList(0,e,t)},function(e,s){r.receiveLikeList(e||-1,s,t)}))},e.exports={instance:null,getInstance:function(){return this.instance||(this.instance=new o),this.instance}}},"./command/GoodsCommand.js":function(e,t,s){"use strict";function o(){this.LocalGroupsCommand=n.getInstance()}var n=s("./command/LocalGroupsCommand.js");o.prototype.loadFirstLocalGroups=function(e){e&&this.LocalGroupsCommand.loadFirst(e)},o.prototype.loadLocalGroups=function(e,t){e&&this.LocalGroupsCommand.load(e)},e.exports={instance:null,getInstance:function(){return this.instance||(this.instance=new o),this.instance}}},"./command/LocalGroupsCommand.js":function(e,t,s){"use strict";function o(){this.isFirst=!0,this.savingGoodsIDs=[],this.savingTimer=null}var n=s("./manager/index.js").goods.getInstance(),i=s("./proxy/GoodsProxy.js").getInstance(),a=s("./network/index.js").getInstance(),r=1e3,l=20,c=100;o.prototype.loadFirst=function(e){var t=[],s=this;e.forEach(function(o){!o||s.savingGoodsIDs.indexOf(o)>=0||t.indexOf(e)>=0||n.shouldLoadLocalGroups(o)&&t.push(o)}),this.savingGoodsIDs=this.savingGoodsIDs.concat(t),this.solve()},o.prototype.load=function(e){if(e&&!(this.savingGoodsIDs.indexOf(e)>=0)&&n.shouldLoadLocalGroups(e)){if(this.savingGoodsIDs.push(e),this.savingGoodsIDs.length>=l)return void this.solve();if(!this.savingTimer){var t=r;this.isFirst&&(t=c,this.isFirst=!1);var s=this;this.savingTimer=setTimeout(function(){s.solve()},t)}}},o.prototype.request=function(){if(a.apiRequest&&!(this.savingGoodsIDs.length<=0)){var e=this.savingGoodsIDs.slice();e.forEach(function(e){n.setLocalGroupsLoading(e)}),this.savingGoodsIDs=[],a.apiRequest("POST","goods/local_groups",{goods_ids:e},function(e){i.receiveLocalGroups(e)},function(){},!0)}},o.prototype.solve=function(){this.savingTimer&&(clearTimeout(this.savingTimer),this.savingTimer=null),this.request()},e.exports={instance:null,getInstance:function(){return this.instance||(this.instance=new o),this.instance}}},"./proxy/GoodsProxy.js":function(e,t,s){"use strict";function o(){}var n=s("./proxy/LocalGroupsProxy.js").getInstance();o.prototype.receiveLocalGroups=function(e){n.receive(e)},o.prototype.registerLocalGroups=function(e,t){n.register(e,t)},e.exports={instance:null,getInstance:function(){return this.instance||(this.instance=new o),this.instance}}},"./proxy/LocalGroupsProxy.js":function(e,t,s){"use strict";function o(){this.callbacksMap={}}var n=s("./manager/index.js").goods.getInstance();o.prototype.receive=function(e){for(var t in e)if(e.hasOwnProperty(t)&&t){var s=e[t];n.updateGoodsInfo(t,{localGroups:s}),this.callbacksMap[t]&&this.callbacksMap[t].forEach(function(e){"function"==typeof e&&e()})}},o.prototype.register=function(e,t){e&&"function"==typeof t&&(e=e.toString(),this.callbacksMap[e]||(this.callbacksMap[e]=[]),this.callbacksMap[e].push(t))},e.exports={instance:null,getInstance:function(){return this.instance||(this.instance=new o),this.instance}}},"./components/widgets/DoubleGridItemV2/index.js":function(e,t,s){"use strict";var o=s("./components/vendor/react.min.js"),n="undefined"!=typeof window?s("./components/common/index.js"):{},i=s("./components/widgets/DoubleGridItemV2/localGroups.js"),a=s("./manager/index.js").goods.getInstance(),r=o.createClass({displayName:"DoubleGridItemV2",getInitialState:function(){return{}},getDefaultProps:function(){return{goodsID:null,goodsData:{}}},getGoodsData:function(){return a.getGoodsDataByID(this.props.goodsID)||this.props.goodsData},handleGoodsClick:function(e){var t=this,s=t.props.extraTrackingParams;e&&(e.preventDefault(),e.stopPropagation());var o={queries:{item_index:t.props.inViewIndex}},i=this.getGoodsData(),a=function(){var e=i.forwardUrl||"goods.html?goods_id="+t.props.goodsID;t.props.referPageName&&(e+="&refer_page_name="+i.referPageName),e+="&is_spike="+(2===i.eventType?"1":"0"),n.navigation.forward(e)};n.page.setPageScrollPosition(o,function(){s?(s.idx=t.props.inViewIndex,s.goods_id=i.goodsID,s.event_type=i.eventType,s.is_app=i.isApp,n.logger.trackingRecord(s,a)):a()})},componentWillMount:function(){var e=this.getGoodsData();e&&!a.getGoodsDataByID(e.goodsID)&&a.updateGoodsInfo(e),this.setState({nationalFlag:e.nationalFlag,soldQuantity:e.hideSoldQuantity||"0"===e.soldQuantity.toString()?"":e.soldQuantity})},render:function(){var e,t=this.getGoodsData(),s=t.goodsID,n=this.props.inViewIndex;this.state.nationalFlag&&(e=o.createElement("img",{className:"national-flag",src:this.state.nationalFlag}));var a;this.state.soldQuantity&&(a=o.createElement("p",{className:"sold-quantity"},"已团",this.state.soldQuantity,"件"));var r=!1,l=!1;return o.createElement("div",{className:"double-grid-one-v2"},o.createElement("div",{className:"double-grid-item-v2",onClick:this.handleGoodsClick},o.createElement("div",{className:"std-goods-image-square"},r,o.createElement("img",{"data-url":t.imgUrl,"data-index":n})),o.createElement("div",{className:"detail"},o.createElement("div",{
className:"name-block"},o.createElement("p",{className:"goods-name"},e,t.goodsName),l),o.createElement("div",{className:"core"},o.createElement("div",{className:"info"},o.createElement("p",{className:"sale-price"},o.createElement("i",null,"￥"),t.price),a),o.createElement(i,{goodsID:s})))))}});e.exports=r},"./components/widgets/DoubleGridItemV2/localGroups.js":function(e,t,s){"use strict";var o=s("./components/vendor/react.min.js"),n=s("./manager/index.js").goods.getInstance(),i=s("./command/GoodsCommand.js").getInstance(),a=s("./proxy/GoodsProxy.js").getInstance(),r=o.createClass({displayName:"LocalGroups",getInitialState:function(){return{list:[],bubble:"",style:{display:"none"}}},getDefaultProps:function(){return{goodsID:null}},componentWillMount:function(){this.setupLocalGroups()},componentDidMount:function(){var e=this;a.registerLocalGroups(this.props.goodsID,function(){e.setupLocalGroups()}),i.loadLocalGroups(this.props.goodsID)},setupLocalGroups:function(){var e=n.getLocalGroups(this.props.goodsID);if(e&&e.list.length){var t=[];e.list.forEach(function(e){t.push({avatar:e.avatar,display:e.avatar?"":"none"})}),this.setState({list:t,bubble:e.bubble,style:{display:""}})}},avatarLoadFailed:function(e){if(this.state.list[e]){var t=this.state.list.slice();t[e].display="none",this.setState({list:t})}},render:function(){var e=this,t=[],s=e.state.list.length;return e.state.list.forEach(function(n,i){t.push(o.createElement("div",{className:"avatar"+(1===s?" single-avatar":""),key:i},o.createElement("img",{src:n.avatar,style:{display:n.display},onError:function(){e.avatarLoadFailed(i)}})))}),o.createElement("div",{className:"local-groups",style:e.state.style},o.createElement("span",null),t.reverse())}});e.exports=r},"./components/widgets/PortalListItem/index.js":function(e,t,s){"use strict";var o=s("./components/vendor/react.min.js"),n="undefined"!=typeof window?s("./components/common/index.js"):{},i=s("./components/widgets/PortalListItem/localGroups.js"),a=s("./manager/index.js").goods.getInstance(),r=o.createClass({displayName:"PortalListItem",getInitialState:function(){return{}},getDefaultProps:function(){return{goodsID:null,goodsData:{},itemProps:{}}},getGoodsData:function(){return a.getGoodsDataByID(this.props.goodsID)||this.props.goodsData},handleGoodsClick:function(e){var t=this,s=t.props.itemProps.extraTrackingParams;e&&(e.preventDefault(),e.stopPropagation());var o={queries:{item_index:t.props.inViewIndex}},i=this.getGoodsData(),a=function(){var e=t.props.itemProps.forwardUrl||"goods.html?goods_id="+t.props.goodsID;t.props.itemProps.referPageName&&(e+="&refer_page_name="+i.referPageName),e+="&is_spike="+(i.isSpike?"1":"0"),n.navigation.forward(e)};n.page.setPageScrollPosition(o,function(){s?(s.idx=t.props.inViewIndex,s.goods_id=i.goodsID,s.event_type=i.eventType,s.is_app=i.isApp,n.logger.trackingRecord(s,a)):a()})},componentWillMount:function(){var e=this.getGoodsData();e&&!a.getGoodsDataByID(e.goodsID)&&a.updateGoodsInfo(e);var t={goodsID:e.goodsID,event:"goods_show",pageName:"index",eventType:e.eventType,isApp:e.isApp,index:this.props.inViewIndex};this.props.itemProps.imprParams&&(t.params=this.props.itemProps.imprParams),this.setState({nationalFlag:e.nationalFlag,soldQuantity:e.hideSoldQuantity||"0"===e.soldQuantity.toString()?"":e.soldQuantity,isCompleteLottery:e.isCompleteLottery,imgLogData:JSON.stringify(t)})},render:function(){var e,t=this.getGoodsData(),s=t.goodsID,n=this.props.inViewIndex;this.state.nationalFlag&&(e=o.createElement("img",{className:"national-flag",src:this.state.nationalFlag}));var a;this.state.isCompleteLottery?a=o.createElement("span",null,t.customerNum,"人团",o.createElement("i",null,"·"),"单买价",t.normalPrice,"元"):this.state.soldQuantity&&(a=o.createElement("span",null,"已团",this.state.soldQuantity,"件"));var r=t.isFreeTrial||t.isDepositeGroup?"免费试用":"去开团";return o.createElement("div",{className:"portal-list-item",onClick:this.handleGoodsClick},o.createElement("div",{className:"std-goods-image goods-image","data-log":this.state.imgLogData},o.createElement("img",{"data-url":t.imageUrl,"data-index":n})),o.createElement("p",{className:"goods-name"},e,t.goodsName),o.createElement("div",{className:"detail"},o.createElement("div",{className:"left-side"},o.createElement("div",{className:"sale-price"},o.createElement("i",null,"￥"),t.price),o.createElement("div",{className:"group-desc"},a)),o.createElement("div",{className:"right-side"},o.createElement(i,{goodsID:s}),o.createElement("div",{className:"enter-button enter-button-arrow"},r))))}});e.exports=r},"./components/widgets/PortalListItem/localGroups.js":function(e,t,s){"use strict";var o=s("./components/vendor/react.min.js"),n="undefined"!=typeof window?s("./components/common/index.js"):{},i=s("./manager/index.js").goods.getInstance(),a=s("./command/GoodsCommand.js").getInstance(),r=s("./proxy/GoodsProxy.js").getInstance(),l=o.createClass({displayName:"LocalGroups",getInitialState:function(){return{list:[],bubble:"",style:{display:"none"}}},getDefaultProps:function(){return{goodsID:null}},componentWillMount:function(){this.setupLocalGroups()},componentDidMount:function(){var e=this;r.registerLocalGroups(this.props.goodsID,function(){e.setupLocalGroups()}),a.loadLocalGroups(this.props.goodsID)},setupLocalGroups:function(){var e=i.getLocalGroups(this.props.goodsID);if(e&&e.list.length){var t=[];e.list.forEach(function(e){t.push({avatar:e.avatar,display:e.avatar?"":"none",groupOrderID:e.groupOrderID})}),this.setState({list:t,bubble:e.bubble,style:{display:""}})}},avatarLoadFailed:function(e){var t=this.state.list[e],s={op:"error",event:"local_groups_avatar_missing",group_order_id:t.groupOrderID,avatar:t.avatar};if(this.state.list[e]){var o=this.state.list.slice();n.logger.trackingRecord(s),o[e].display="none",this.setState({list:o})}},render:function(){var e=this,t=[],s=e.state.list.length;return e.state.list.forEach(function(n,i){t.push(o.createElement("div",{className:"avatar"+(1===s?" single-avatar":""),key:i},o.createElement("img",{src:n.avatar,style:{display:n.display},onError:function(){e.avatarLoadFailed(i)}})))}),o.createElement("div",{className:"local-groups",style:e.state.style},o.createElement("span",null),t.reverse())}});e.exports=l},"./components/widgets/MidYearPromoAct/Bubble.js":function(e,t,s){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=s("./components/widgets/BaseAct/Bubble.js"),r=s("./components/widgets/MidYearPromoAct/utils.js"),l=function(e){function t(e){o(this,t);var s=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s.utils=r,s}return i(t,e),t}(a);e.exports=l},"./components/widgets/BaseAct/Bubble.js":function(e,t,s){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var s=0;s<t.length;s++){var o=t[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,s,o){return s&&e(t.prototype,s),o&&e(t,o),t}}(),r=s("./components/vendor/react.min.js"),l="undefined"!=typeof window?s("./components/common/index.js"):{},c=s("./components/common/image.js"),u=s("./manager/ActivityManager.js").getInstance(),d=function(e){function t(e){o(this,t);var s=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s.utils={},s.state={style:{display:"none"},eventBubbleUrl:""},s}return i(t,e),a(t,[{key:"clickEventBubble",value:function(e){e&&(e.stopPropagation(),e.preventDefault());var t=this;l.logger.trackingRecord(t.utils.Constant.TK.bubbleClick,function(){var e={refer_page_element:t.utils.Constant.TK.bubbleClick.page_element};t.utils.targetPathname?l.navigation.forward(t.utils.targetPathname+"?"+l.url.buildQuery(e)):t.utils.targetPage&&l.navigation[t.utils.targetPage]("forward",e)})}},{key:"componentDidMount",value:function(){if(this.utils.checkInTime(this.props.nodeServerTime)&&!this.state.eventBubbleUrl){var e=this,t=u.getPromotionActivityImagesModel(),s=function(){var s=t.getImageUrlByKey(e.utils.Constant.ImageKeys.EventBubble)||c.getCDNImgURL(e.utils.getEventBubble());e.setState({style:{display:""},eventBubbleUrl:s})};t.isLoaded()?s():t.addEvent(t.Event.onLoad,function(){s()})}}},{key:"render",value:function(){var e=this;return r.createElement("div",{className:"act-event-bubble",style:this.state.style,onClick:function(t){e.clickEventBubble(t)}},r.createElement("img",{src:this.state.eventBubbleUrl}))}}]),t}(r.Component);d.defaultProps={innerFrom:""},e.exports=d},"./components/app/createPageComponent.js":function(e,t,s){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var s=0;s<t.length;s++){var o=t[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,s,o){return s&&e(t.prototype,s),o&&e(t,o),t}}(),r=s("./components/vendor/react.min.js"),l=s("./components/common/uiWidgets/ProvideContext.js");e.exports=function(e){var t=e.view,s=e.fetchData,c=e.rerenderOnMount,u=function(e){function u(e){o(this,u);var t=n(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,e));return t.state={fetchedData:t.props.data},t}return i(u,e),a(u,[{key:"componentDidMount",value:function(){var e=this;this.state.fetchedData||s(l.buildContext()).then(function(t){c&&c(t)||e.setState({fetchedData:t})}).catch(function(t){return e.setState({fetchedData:{error:t}})})}},{key:"render",value:function(){var e=this.state.fetchedData;return e?r.createElement(t,{data:e}):r.createElement("span",null)}}]),u}(r.Component);return u.displayName=(t.displayName||t.name)+"-PageComponent",u.fetchData=s,u}},"./components/common/uiWidgets/ProvideContext.js":function(e,t,s){"use strict";var o=s("./components/vendor/react.min.js"),n=o.PropTypes,i=s("./components/common/platform.js"),a=i.buildPlatform,r=s("./components/common/RequestContext.js"),l=s("./components/common/util.js"),c={requestContext:n.instanceOf(r).isRequired,platform:n.object.isRequired},u=o.createClass({displayName:"ProvideContext",propTypes:l.extend({children:n.element.isRequired,context:n.shape(c)},null),childContextTypes:c,getChildContext:function(){if(!this._childContext){var e=this.props,t=e.req,s=e.res,o=e.context;this._childContext=o||u.buildContext(t,s)}return this._childContext},render:function(){return this.props.children}});u.buildContext=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=new r(e,t);return{requestContext:s,platform:a(s.userAgent,s.hostname)}},e.exports=u},"./components/common/RequestContext.js":function(e,t,s){(function(t){"use strict";function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var s=0;s<t.length;s++){var o=t[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,s,o){return s&&e(t.prototype,s),o&&e(t,o),t}}(),a=null,r=(s("./configs/app/constant.js"),s("./components/common/url.js")),l=s("./components/common/util.js"),c=s("./components/common/user.js");a=function(){function e(){n(this,e)}return i(e,[{key:"fetchAccessToken",value:function(){return t.resolve(c.getAccessToken())}},{key:"setCookie",value:function(e,t,s){var n;l.setCookie((n={},o(n,e,t),o(n,"msec",s),n))}},{key:"pathname",get:function(){return location.pathname}},{key:"queries",get:function(){return r.pageParseQuery()}},{key:"userAgent",get:function(){return navigator.userAgent}},{key:"hostname",get:function(){return location.hostname}},{key:"cookies",get:function(){var e=l.getCookies();for(var t in e)e[t]instanceof Array&&(e[t]=e[t][0]);return e}}]),e}(),e.exports=a}).call(t,s("./node_modules/imports-loader/index.js?this=>global!./node_modules/exports-loader/index.js?global.Promise!./node_modules/es6-promise/dist/es6-promise.js"))},"./components/widgets/ErrorPage.js":function(e,t,s){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var s=0;s<t.length;s++){var o=t[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,s,o){return s&&e(t.prototype,s),o&&e(t,o),t}}(),r=s("./components/vendor/react.min.js"),l=r.PropTypes,c=function(e){function t(){return o(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"componentDidMount",value:function(){var e=this.props;e.alterText&&alert(e.alterText),e.isBack?history.back():e.redirectUrl&&(location.href=e.redirectUrl)}},{key:"render",value:function(){return r.createElement("span",null)}}]),t}(r.Component);c.propTypes={alertText:l.string,isBack:l.bool,redirectUrl:l.string},e.exports=c},"./models/Goods.js":function(e,t,s){(function(t){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var s=0;s<t.length;s++){var o=t[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,s,o){return s&&e(t.prototype,s),o&&e(t,o),t}}(),r=function e(t,s,o){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,s);if(void 0===n){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,s,o)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(o)},l=s("./models/BaseModel.js"),c=s("./models/util.js"),u=s("./models/DataFormat/goods_detail.js"),d=function(e){function s(e){o(this,s);var t=n(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e));return t.name=e.name||"goods",t.goodsID=e.goodsID||"",t.recFromGroup=e.recFromGroup||"",t.accessToken=e.accessToken||"",t}return i(s,e),a(s,[{key:"dealParams",value:function(){r(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"dealParams",this).call(this),this.recFromGroup>0&&(this.params.rec_from_group=this.recFromGroup)}},{key:"dealPath",value:function(){r(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"dealPath",this).call(this),this.path=c.format(this.path,this.goodsID+"")}},{key:"dealHeaders",value:function(){r(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"dealHeaders",this).call(this),this.headers.AccessToken=this.accessToken}},{key:"getGoodsDetail",value:function(){var e=this,s=new t(function(t,s){e.get().then(function(e){var s=u.processGoodsData(e);t(s)},function(e){s(e)}).catch(function(e){s(e)})});return s}}]),s}(l);e.exports=d}).call(t,s("./node_modules/imports-loader/index.js?this=>global!./node_modules/exports-loader/index.js?global.Promise!./node_modules/es6-promise/dist/es6-promise.js"))},"./models/DataFormat/goods_detail.js":function(e,t,s){"use strict";var o=s("./configs/index.js").app,n=o.constant,i=s("./models/util.js"),a={min:.625,max:1},r=function(e){e=e||[];var t=[],s=[];e=e.sort(function(e,t){return e.priority-t.priority});for(var o=375*a.max,r=0;r<e.length;r++){var l=e[r],c=i.upaiyunCompress(l.url),u=l.type+"";if(u===n.GalleryType.Top){if(t.push(c),l.height>0&&l.width>0){var d=l.height/l.width,p=0;p=d>=a.max?375*a.max:375*a.min,p<o&&(o=p)}}else u===n.GalleryType.Detail&&s.push({url:c,width:l.width,height:l.height})}return{bannerHeight:o,topGallery:t,detailGallery:s}},l=function(e,t){e=e||[];for(var s=[],o={},n=0;n<e.length;n++){var a=e[n],r=parseInt(a.is_open,10)||0;0===r||o[a.customer_num]||(s.push({requireNum:a.customer_num.toString(),price:i.StdFormat.price(a.price,100),totalPrice:i.StdFormat.price(a.price*a.customer_num,100),deltaPrice:i.StdFormat.price(t-a.price,100),groupID:a.group_id,startTime:parseInt(a.start_time,10),endTime:parseInt(a.end_time,10),orderLimit:parseInt(a.order_limit,10)||1}),o[a.customer_num]=!0)}return s.sort(function(e,t){return e.requireNum-t.requireNum}),s},c=function(e){return e=parseInt(e,10)||0,e===n.GoodsType.IMPORTS||e===n.GoodsType.OVERSEAS_TRANSSHIP||e===n.GoodsType.OVERSEAS_DM},u=function(e,t,s,o){e=e||0;var i=!1,a=!1,r=!1,l=!1,c=!1,u=!1,d=!1,p=!1,m=!1,g=!1,h=!1;switch(t.length>1&&t[1].startTime>o&&(i=!0),e){case n.EventType.NewUserGroup:a=!0;break;case n.EventType.Lottery:s>0&&(r=!0);break;case n.EVENT_TYPE.FREE_TRIAL:s>0&&(l=!0);break;case n.EVENT_TYPE.DEPOSITE_GROUP:s>0&&(c=!0);break;case n.EventType.Spike:u=!0;break;case n.EventType.SuperSpike:d=!0;break;case n.EVENT_TYPE.TZMD:p=!0;break;case n.EventType.CapitalGift:m=!0;break;case n.EventType.CapitalGiftLottery:s>0&&(g=!0);break;case n.EVENT_TYPE.TZYY:h=!0}return{eventComing:i,isNewUserGroup:a,isLottery:r,isFreeTrial:l,isDepositeGroup:c,isSpike:u,isSuperSpike:d,isGroupFree:p,isCapitalGift:m,isCapitalGiftLottery:g,isTZYY:h,isSpikeComing:i&&(u||d)}},d=function(e,t){t=t||[];for(var s=t.length,o=!1,n=e,i=0;i<s;i++){var a=t[i];o=o||a.is_onsale&&a.quantity>0}return n&&!o&&(n=!1),n},p=function(e,t){var s=!1;return(e||t.eventComing&&(t.isSpike||t.isSuperSpike||t.isLottery||t.isCapitalGiftLottery||t.isFreeTrial||t.isDepositeGroup))&&(s=!0),s},m=function(e,t,s,o){var n=0;return n=o?i.StdFormat.price(s-t,100):i.StdFormat.price(s-e,100)},g=function(e,t){e=e||[];for(var s=[],o=0;o<e.length;o++){var n=e[o],a=parseInt(n.is_onsale,10)||0;if(0!==a){var r=parseInt(n.limit_quantity,10)||0;s.push({skuID:n.sku_id,quantity:parseInt(n.quantity,10),initQuantity:parseInt(n.init_quantity,10),isOnSale:a,soldQuantity:parseInt(n.sold_quantity,10),specs:n.specs,thumbUrl:n.thumb_url||t,limitQuantity:r,normalPrice:i.StdFormat.price(n.normal_price,100),groupPrice:i.StdFormat.price(n.group_price,100)})}}return s},h=function(e){var t=[];return i.isArray(e)?(e.forEach(function(e){t.push({id:parseInt(e.id,10),type:e.type,startTime:parseInt(e.start_time,10),endTime:parseInt(e.end_time,10)})}),t):t},f=function(e){e=(e||"").toString();var t=e.split(",");return t},v=function(e){var t=parseInt(e.goodsType,10)||0,s=e.country||"",o=e.warehouse||"",i=e.isHaitao||!1;if(i){switch(t){case n.GoodsType.IMPORTS:s+="进口";break;case n.GoodsType.OVERSEAS_TRANSSHIP:s+="直供";break;case n.GoodsType.OVERSEAS_DM:s+="直邮"}""!==o&&(o+="发货")}return{isHaitao:i,goodsCountry:s,goodsWarehouse:o}},y=function(e,t,s){if(s)return!0;t=t||parseInt(Date.now()/1e3,10),e=e||[];for(var o=0;o<e.length;o++){var i=e[o];if(i.type===n.PromotionType.Event618&&i.startTime<=t&&i.endTime>=t)return!0}return!1},b=function(e){if(e&&e[0])return{soldQuantity:e[0].sold_quantity,allQuantity:e[0].all_quantity}},k=function(e){e=e||{};var t=e.server_time||parseInt(Date.now()/1e3,10),s=r(e.gallery),o=l(e.group,e.market_price),a=c(e.goods_type),k=a?i.getCDNImgURL("nation/rect/"+e.country.trim()+".png"):"",_=u(e.event_type,o,e.lucky_id,t),w=null;e.gpv&&e.gpv.length>0&&(w="goods"+e.gpv+".html");var I=d(0!==parseInt(e.is_onsale,10),e.sku),S=p(I,_),E=i.StdFormat.price(e.max_normal_price,100),D=i.StdFormat.price(e.min_normal_price||0,100),T=i.StdFormat.price(e.max_group_price||0,100),N=i.StdFormat.price(e.min_group_price||0,100),C=i.StdFormat.price(e.max_on_sale_group_price||0,100),x=i.StdFormat.price(e.min_on_sale_group_price||0,100),L=i.StdFormat.price(e.max_on_sale_normal_price||0,100),j=i.StdFormat.price(e.min_on_sale_normal_price||0,100),P=0,G=0;o.length>1&&(P=i.StdFormat.price(e.min_on_sale_group_price*o[1].requireNum,100),G=m(e.min_group_price,e.min_on_sale_group_price,e.market_price,S));var M={serverTime:t,allowedRegions:e.allowed_region,catID:e.cat_id,country:e.country||"",warehouse:e.warehouse||"",goodsDesc:e.goods_desc,goodsID:e.goods_id,goodsName:e.goods_name,shareDesc:e.share_desc,goodsType:parseInt(e.goods_type,10)||1,localGroups:[],hasLocalGroup:!1,bannerHeight:s.bannerHeight,topGallery:s.topGallery,detailGallery:s.detailGallery,mallID:e.mall_id,marketPrice:i.StdFormat.price(e.market_price,100),groupTypes:o,skus:g(e.sku,e.thumb_url),thumbUrl:e.thumb_url,luckyID:e.lucky_id,luckyEndTime:parseInt(e.lucky_end_time,10),luckyStartTime:parseInt(e.lucky_start_time,10),luckyStatus:parseInt(e.lucky_status,10)||0,eventType:parseInt(e.event_type,10)||n.EVENT_TYPE.DEFAULT,isOnSale:I,isRefundable:1===parseInt(e.is_refundable,10),freeCoupon:[],isApp:parseInt(e.is_app,10)||0,isPreSale:e.is_pre_sale,sales:e.sales,hasAddress:!!e.has_address,catID1:e.cat_id_1,catID2:e.cat_id_2,catID3:e.cat_id_3,promotions:h(e.promotions),eventComing:_.eventComing,isNewUserGroup:_.isNewUserGroup,isLottery:_.isLottery,isFreeTrial:_.isFreeTrial,isDepositeGroup:_.isDepositeGroup,isSpike:_.isSpike,isSuperSpike:_.isSuperSpike,isGroupFree:_.isGroupFree,isCapitalGift:_.isCapitalGift,isCapitalGiftLottery:_.isCapitalGiftLottery,isTZYY:_.isTZYY,isSpikeComing:_.isSpikeComing,isHaitao:a,countryLogo:k,gpv:w,deltaPrice:G,quickRefund:1===parseInt(e.quick_refund,10),rv:1===parseInt(e.rv,10),useOnSalePrice:S,maxNormalPrice:E,minNormalPrice:D,maxGroupPrice:T,minGroupPrice:N,maxOnSaleGroupPrice:C,minOnSaleGroupPrice:x,maxOnSaleNormalPrice:L,minOnSaleNormalPrice:j,minTotalGroupPrice:P,skipGoodsIDs:f(e.skip_goods),tag:parseInt(e.tag,10),spikeInfo:b(e.spike_group)},R=v(M);R.service=e.service_promise||[];var O=parseInt(e.is_mall_rec,10)||0,B=y(M.promotions,t,O);return M.mallService=R,M.showMallRecommend=B,M};e.exports={processGoodsData:k}},"./models/Mall.js":function(e,t,s){"use strict";function o(e){n.call(this,e),this.name="mall",this.mallID=e.mallID||"",this.checkMechantCoupon=e.checkMechantCoupon||"",this.accessToken=e.accessToken||"",this.showDsr=e.showDsr||""}var n=s("./models/BaseModel.js"),i=s("./node_modules/webpack/node_modules/node-libs-browser/node_modules/util/util.js"),a=s("./models/util.js"),r=(s("./node_modules/webpack/node_modules/node-libs-browser/node_modules/path-browserify/index.js"),s("./configs/index.js").app),l=(r.constant,"已领完"),c="已抢光";i.inherits(o,n),o.prototype.dealParams=function(){n.prototype.dealParams.call(this),this.showDsr&&(this.params.check_merchant_score="yes"),this.params.check_merchant_coupon=this.checkMechantCoupon},o.prototype.dealPath=function(){n.prototype.dealPath.call(this),this.path=a.format(this.path,this.mallID+"")},o.prototype.dealHeaders=function(){n.prototype.dealHeaders.call(this),this.headers.AccessToken=this.accessToken},o.prototype.process=function(e){return this.processMallData(e)},o.prototype.processMallData=function(e){var t={mallID:e.mall_id,mallName:e.mall_name||"",logo:e.logo,mallCoupons:this.processMallCoupons(e.mall_coupons||[]),chatEnable:e.chat_enable||0,soldQuantity:a.StdFormat.sales(e.mall_sales)||0,goodsNum:e.goods_num||0};return e.dsr&&e.dsr.logistics_score&&e.dsr.desc_score&&e.dsr.service_score&&(t.dsr=this.processDsr(e.dsr)),t},o.prototype.processMallCoupons=function(e){e=e||[];var t=[];return e.forEach(function(e,s){t.push({index:s,batchID:e.id,batchName:e.batch_name,mallID:e.mall_id,startTime:a.StdFormat.time(e.start_time,"YYYY.M.d"),endTime:a.StdFormat.time(e.end_time,"YYYY.M.d"),startTimeForToast:a.StdFormat.time(e.start_time,"MM.dd"),endTimeForToast:a.StdFormat.time(e.end_time,"MM.dd"),discount:a.StdFormat.price(e.discount,100),minAmount:a.StdFormat.price(e.min_amount,100),couponDisableText:e.is_taken_out?c:l,canReceived:!e.is_taken_out})}),t},o.prototype.processDsr=function(e){return{logisticsScore:e.logistics_score,descScore:e.desc_score,serviceScore:e.service_score}},e.exports=o},"./node_modules/webpack/node_modules/node-libs-browser/node_modules/path-browserify/index.js":function(e,t,s){(function(e){function s(e,t){for(var s=0,o=e.length-1;o>=0;o--){var n=e[o];"."===n?e.splice(o,1):".."===n?(e.splice(o,1),s++):s&&(e.splice(o,1),s--)}if(t)for(;s--;s)e.unshift("..");return e}function o(e,t){if(e.filter)return e.filter(t);for(var s=[],o=0;o<e.length;o++)t(e[o],o,e)&&s.push(e[o]);return s}var n=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,i=function(e){return n.exec(e).slice(1)};t.resolve=function(){for(var t="",n=!1,i=arguments.length-1;i>=-1&&!n;i--){var a=i>=0?arguments[i]:e.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(t=a+"/"+t,n="/"===a.charAt(0))}return t=s(o(t.split("/"),function(e){return!!e}),!n).join("/"),(n?"/":"")+t||"."},t.normalize=function(e){var n=t.isAbsolute(e),i="/"===a(e,-1);return e=s(o(e.split("/"),function(e){return!!e}),!n).join("/"),e||n||(e="."),e&&i&&(e+="/"),(n?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(o(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},t.relative=function(e,s){function o(e){for(var t=0;t<e.length&&""===e[t];t++);for(var s=e.length-1;s>=0&&""===e[s];s--);return t>s?[]:e.slice(t,s-t+1)}e=t.resolve(e).substr(1),s=t.resolve(s).substr(1);for(var n=o(e.split("/")),i=o(s.split("/")),a=Math.min(n.length,i.length),r=a,l=0;l<a;l++)if(n[l]!==i[l]){r=l;break}for(var c=[],l=r;l<n.length;l++)c.push("..");return c=c.concat(i.slice(r)),c.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){var t=i(e),s=t[0],o=t[1];return s||o?(o&&(o=o.substr(0,o.length-1)),s+o):"."},t.basename=function(e,t){var s=i(e)[2];return t&&s.substr(-1*t.length)===t&&(s=s.substr(0,s.length-t.length)),s},t.extname=function(e){return i(e)[3]};var a="b"==="ab".substr(-1)?function(e,t,s){return e.substr(t,s)}:function(e,t,s){return t<0&&(t=e.length+t),e.substr(t,s)}}).call(t,s("./node_modules/webpack/node_modules/node-libs-browser/node_modules/process/browser.js"))},"./models/UserEvent.js":function(e,t,s){(function(t){"use strict";function o(e){n.call(this,e),this.name="userEvent",this.goodsID=e.goodsID||"",this.accessToken=e.accessToken||""}var n=s("./models/BaseModel.js"),i=s("./node_modules/webpack/node_modules/node-libs-browser/node_modules/util/util.js"),a=s("./models/util.js");s("./node_modules/webpack/node_modules/node-libs-browser/node_modules/path-browserify/index.js");i.inherits(o,n),o.prototype.dealPath=function(){n.prototype.dealPath.call(this),this.path=a.format(this.path,this.goodsID+"")},o.prototype.dealHeaders=function(){n.prototype.dealHeaders.call(this),this.headers.AccessToken=this.accessToken},o.prototype.getUserEvent=function(){var e=this,s=new t(function(t,s){e.get().then(function(e){t({result:"ok",freeCoupon:e.free_coupon||[],captainCoupon:e.captain_coupon||[]})},function(e){t({result:"error",data:e})}).catch(function(e){t({result:"error",data:""})})});return s},e.exports=o}).call(t,s("./node_modules/imports-loader/index.js?this=>global!./node_modules/exports-loader/index.js?global.Promise!./node_modules/es6-promise/dist/es6-promise.js"))},"./models/LocalGroup.js":function(e,t,s){(function(t){"use strict";function o(e){n.call(this,e),this.isHorizontal=e.isHorizontal||!1,this.name=this.isHorizontal?"localGroupV2":"localGroup",this.goodsID=e.goodsID||"",this.accessToken=e.accessToken||""}var n=s("./models/BaseModel.js"),i=s("./node_modules/webpack/node_modules/node-libs-browser/node_modules/util/util.js"),a=s("./models/util.js"),r=(s("./node_modules/webpack/node_modules/node-libs-browser/node_modules/path-browserify/index.js"),s("./configs/index.js").app);i.inherits(o,n),o.prototype.dealPath=function(){n.prototype.dealPath.call(this),this.path=a.format(this.path,this.goodsID+"")},o.prototype.dealHeaders=function(){n.prototype.dealHeaders.call(this),this.headers.AccessToken=this.accessToken},o.prototype.getLocalGroup=function(){var e=this,s=new t(function(t,s){e.get().then(function(s){t({result:"ok",data:e.processLocalGroupData(s.local_group,s.server_time),total:s.total,isHorizontal:e.isHorizontal})},function(e){t({result:"error",data:e})}).catch(function(e){t({result:"error",data:""})})});return s},o.prototype.processLocalGroupData=function(e,t){e=e||[];for(var s=r.get(this.host),o=[],n=0;n<e.length;n++){var i={};try{i=JSON.parse(e[n])||{}}catch(e){}!i.group_order_id||parseInt(i.expire_time)<t||o.push({groupOrderID:i.group_order_id,cityName:i.city_name,nickname:i.nickname||"游客",avatar:a.getAvatarURL(i.avatar,s.shop.logo),requireNum:i.require_num||1,usersNum:i.users_num||1,expireTime:i.expire_time})}return o},e.exports=o}).call(t,s("./node_modules/imports-loader/index.js?this=>global!./node_modules/exports-loader/index.js?global.Promise!./node_modules/es6-promise/dist/es6-promise.js"))},"./models/LuckyDraw.js":function(e,t,s){(function(t){"use strict";function o(e){i.call(this,e),this.name="luckyDraw",this.goodsID=e.goodsID||"",this.rulesKey=e.rulesKey||"LuckyDraw",this.accessToken=e.accessToken||""}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=s("./models/BaseModel.js"),a=s("./node_modules/webpack/node_modules/node-libs-browser/node_modules/util/util.js"),r=s("./models/util.js"),l=(s("./node_modules/webpack/node_modules/node-libs-browser/node_modules/path-browserify/index.js"),s("./configs/index.js").app),c=(l.constant,{LuckyDraw:{key:"LuckyDraw",title:"抽奖规则",time:"活动时间: {0}~{1}",detail:["活动结束后从组团成功的订单中随机抽取中奖者。","一等奖为{0}（共{1}名），二等奖会全额退款并赠送88元代金券。","中奖的商品预计{0}发放。","本活动最终解释权归拼多多所有。"]},FreeTrial:{key:"FreeTrial",title:"规则",time:"活动时间: {0}~{1}",detail:["申请结束后从组团成功的订单中随机选取{0}名试用者赠送{1}。","拼团成功后即可获得88元代金券。","试用的商品预计{0}发放。","试用者完成试用报告后可以保留试用品。","本活动最终解释权归拼多多所有。"]},DepositeGroup:{key:"DepositeGroup",title:"规则",time:"活动时间: {0}~{1}",detail:["申请结束后从组团成功的订单中随机选取{0}名试用者赠送{1}。","拼团成功后即可获得88元代金券。","为进行用户验证，下单时需预付10元押金，成团或24小时内自动全额退还押金。","试用的商品预计{0}发放。","试用者完成试用报告后可以保留试用品。","本活动最终解释权归拼多多所有。"]
},CapitalGiftLottery:{key:"CapitalGiftLottery",title:"送礼抽奖规则",time:"活动时间: {0}~{1}",detail:["活动结束后从拼团成功的订单中随机抽取中奖者。","一等奖为{0}（共{1}名），二等奖会全额退款并赠送88元代金券。","中奖的商品预计{0}发放。","团员若中一等奖，该团团长必中一等奖。","本活动最终解释权归拼多多所有。"]}});a.inherits(o,i),o.prototype.dealPath=function(){i.prototype.dealPath.call(this),this.path=r.format(this.path,this.goodsID+"")},o.prototype.dealHeaders=function(){i.prototype.dealHeaders.call(this),this.headers.AccessToken=this.accessToken},o.prototype.getLuckyDraw=function(){var e=this,s=new t(function(t,s){e.get().then(function(s){t({result:"ok",data:{rules:e.processLotteryRules(s),info:e.processLotteryData(s)}})},function(e){t({result:"error",data:e})}).catch(function(){t({result:"error",data:""})})});return s},o.prototype.getRuleTemplete=function(e){var t={};for(var s in e)t[s]="object"===n(e[s])?this.getRuleTemplete(e[s]):e[s];return t},o.prototype.processLotteryRules=function(e){var t=c[this.rulesKey]||{},s=this.getRuleTemplete(t);return r.getLotteryRules(e,s)},o.prototype.processLotteryData=function(e){return e?{luckyID:e.lucky_id,luckyStatus:parseInt(e.status,10)||0,luckyStartTime:parseInt(e.start_time,10),luckyEndTime:parseInt(e.end_time,10)}:{}},e.exports=o}).call(t,s("./node_modules/imports-loader/index.js?this=>global!./node_modules/exports-loader/index.js?global.Promise!./node_modules/es6-promise/dist/es6-promise.js"))},"./models/Reviews.js":function(e,t,s){(function(t){"use strict";function o(e){n.call(this,e),this.name="reviews",this.goodsID=e.goodsID+"",this.page=e.page||1,this.size=e.size||2,this.accessToken=e.accessToken||"",this.withLabel=e.withLabel||!1}var n=s("./models/BaseModel.js"),i=s("./node_modules/webpack/node_modules/node-libs-browser/node_modules/util/util.js"),a=s("./models/util.js"),r=(s("./node_modules/webpack/node_modules/node-libs-browser/node_modules/path-browserify/index.js"),s("./configs/index.js").app),l=s("./models/DataFormat/goods_comment.js"),c="此用户未填写文字评论";i.inherits(o,n),o.prototype.dealParams=function(){n.prototype.dealParams.call(this),this.params.page=this.page,this.params.size=this.size,this.params.label=this.withLabel?1:0},o.prototype.dealHeaders=function(){n.prototype.dealHeaders.call(this),this.headers.AccessToken=this.accessToken},o.prototype.dealPath=function(){n.prototype.dealPath.call(this),this.path=a.format(this.path,this.goodsID+"")},o.prototype.getReviews=function(){var e=this,s=new t(function(t,s){e.get().then(function(s){var o=e.processReviewData(s);t({result:"ok",data:o})},function(e){t({result:"error",data:e})}).catch(function(e){t({result:"error",data:e})})});return s},o.prototype.processReviewData=function(e){var t=r.get(this.host),s=(this.withLabel?e.number:e.score_num)||null,o=e.data||[],n=null,i=[];e.average&&(n=e.average.toFixed(1));for(var u=0;u<o.length;u++){var d=o[u];i.push({index:u,stars:parseInt(d.stars),avatar:a.getAvatarURL(d.avatar,t.shop.logo),name:d.name||"游客",comment:d.comment||c,time:a.StdFormat.time(d.time,"YYYY-MM-dd hh:mm"),time2:a.StdFormat.time(d.time,"YYYY.MM.dd"),orderSpecs:l.formatSpecs(d.specs||"[]")})}var p=l.formatTagList(e.labels||[]);return{goodsID:this.goodsID,commentsAmount:s,commentsScore:n,detailList:i,tagList:p}},e.exports=o}).call(t,s("./node_modules/imports-loader/index.js?this=>global!./node_modules/exports-loader/index.js?global.Promise!./node_modules/es6-promise/dist/es6-promise.js"))},"./models/DataFormat/goods_comment.js":function(e,t,s){"use strict";var o=s("./models/util.js");e.exports={formatTag:function(e){return{id:parseInt(e.id,10)||0,name:e.name||"",number:parseInt(e.num,10)||0,positive:parseInt(e.positive,10)||0,level:parseInt(e.level,10)||0}},formatTagList:function(e,t){var s=this;return e.map(function(e,t){return s.formatTag(e)})},formatSpecs:function(e){var t=null;try{t=JSON.parse(e)}catch(e){t=[]}return t&&o.isArray(t)?t.map(function(e,t){return e.spec_key&&e.spec_value?{key:e.spec_key,value:e.spec_value}:""}):[]}}},"./abtest/grayReleaseGoods.js":function(e,t,s){"use strict";var o=s("./abtest/config/grayReleaseGoods.js"),n=o.Rate||0,i=o.MinRange||0,a=o.MaxRange||0,r=o.InnerTesterMinRange||0,l=o.InnerTesterMaxRange||0,c=o.WhiteList||[];o.HtjTesterList||[];e.exports={isTester:function(e,t){if(e=parseInt(e,10)||0,"m.hutaojie.com"===t)return!0;if("panduoduo.yangkeduo.com"===t)return!0;if(0===e&&n<100)return!1;if(c.indexOf(e)>=0)return!0;var s=e%100;return s>=i&&s<a},isInnerTester:function(e,t){if(!this.isTester(e,t))return!1;if(e=parseInt(e,10)||0,"panduoduo.yangkeduo.com"===t||"m.hutaojie.com"===t)return e%2===0;var s=e%100;return s>=r&&s<l}}},"./abtest/config/grayReleaseGoods.js":function(e,t,s){"use strict";var o=100,n=0,i=100,a=60,r=70,l=s("./abtest/config/whiteListUsers.js"),c=l.prod,u=[c.PG.LongYan,c.PG.UltramanZHY,c.PG.DingDang,c.PM.AoLi,c.PM.HeiGeEr,c.PM.KaLu,c.UI.FanFan,c.UI.HanSen,c.PM.ZhiShen,c.PM.KangDe,c.UI.ShenMiGuo,c.UI.SanJin,c.UI.LiLiJiang,c.PM.XiYue,c.UI.LvLuo,c.PM.LuoSu,c.UI.YuanBo,c.PM.LingSu,c.PM.XiaoRang,c.PM.MaoMao,c.TT.AZhi,c.TT.RuiEn,c.TT.Tmp1,c.TT.Tmp2,c.VIP.Dora],d=l.hutaojie,p=[d.Dummy,d.LongYan];e.exports={Rate:o,MinRange:n,MaxRange:i,InnerTesterMinRange:a,InnerTesterMaxRange:r,WhiteList:u,HtjTesterList:p}},"./lib/platform.js":function(e,t,s){"use strict";var o=s("./configs/index.js").app.constant,n=o.Platform;e.exports={getPlatform:function(e){return/micromessenger/i.test(e)?n.WeChat:/phh_ios_version/i.test(e)?n.IOS:/phh_android_version/i.test(e)?n.Android:/weibo/i.test(e)?n.Weibo:/qq/i.test(e)||/qzone/.test(e)?n.QQ:n.Unknown},isWeChatPlatform:function(e){return this.getPlatform(e)===n.WeChat},isWeiboPlatform:function(e){return this.getPlatform(e)===n.Weibo},isQQPlatform:function(e){return this.getPlatform(e)===n.QQ},isNativePlatform:function(e){var t=this.getPlatform(e);return t===n.Android||t===n.IOS},isEmbeddedBrowser:function(e){return this.isWeChatPlatform(e)||this.isWeiboPlatform(e)||this.isQQPlatform(e)},isIOS:function(e){return e=e.toLowerCase(),/iphone|ipad|ipod/.test(e)}}},"./components/app/goods_v2/bottomBar.js":function(e,t,s){"use strict";var o=s("./components/common/std_format.js"),n=s("./configs/index.js").app,i=n.constant,a={default:"查看获奖名单",freeTrial:"查看申请结果"},r={default:"待公布抽奖结果",freeTrial:"免费试用活动已结束"},l=function(e,t){t=t||2,e=(e||"").toString();for(var s=t-e.length,o=0;o<s;o++)e="0"+e;return e},c=function(e,t,s){var n=[];if(e>=t)return n;var i=o.timeParams(e),a=o.timeParams(t),r=[i.year,l(i.month),l(i.date)].join(""),c=[a.year,l(a.month),l(a.date)].join("");return r===c?n[0]=[a.hours,l(a.minutes)].join(":"):c-r==1?n[0]="明日 "+[a.hours,l(a.minutes)].join(":"):n[0]=a.month+"月"+a.date+"日 "+[a.hours,l(a.minutes)].join(":"),n[1]=s,n};e.exports=function(e,t,s,o){var l=n.get(s.host),u=i.OFFICIAL_MALL_ID.Online;1===l.shop.shopID?u=i.OFFICIAL_MALL_ID.Hutaojie:3===l.shop.shopID&&(u=i.OFFICIAL_MALL_ID.Weipin);var d=l.shop.logo,p="游客",m=(l.shop.chatDomain,s.status),g=s.groupRole,h=s.showSkuSelector,f={goodsID:e.goodsID,goodsName:e.goodsName,thumbUrl:e.thumbUrl,normalPrice:e.useOnSalePrice?e.minOnSaleNormalPrice:e.minNormalPrice,groupPrice:e.useOnSalePrice?e.minOnSaleGroupPrice:e.minGroupPrice,totalPrice:e.minTotalGroupPrice,soldQuantity:e.sales+"",customerNumber:e.groupTypes[1].requireNum,mallID:t.mallID,mallName:t.mallName,mallAvatar:t.logo,mallChatEnable:t.chatEnable,officialMallID:u,guestAvatar:d,guestName:p,luckyID:e.luckyID,luckyStatus:e.luckyStatus,isOnSale:!1,isFreeTrial:!1,isDepositeGroup:!1,isLottery:!1,spikeComing:!1,lotteryComing:!1,resultOn:"",resultLabel:"",lotteryWaitingLabel:"",eventComingLabel:"",canContact:!1,hasFreeCoupons:!1,hasCaptainCoupons:!1,hasAssociatedGroup:!1,isCapitalGift:!1,isCapitalGiftLottery:!1,isSpike:!1,isSuperSpike:!1,groupbuyDesc:"",inGroup:!1,showSkuSelector:!1,hasLocalGroup:e.hasLocalGroup?"1":"0",eventType:e.eventType,isTester:s.isBottomBarTester||!1,isApp:e.isApp,isNativePlatform:s.isNativePlatform||!1};f.isOnSale=e.isOnSale,f.isFreeTrial=e.isFreeTrial,f.isDepositeGroup=e.isDepositeGroup,f.isLottery=e.isLottery||e.isCapitalGiftLottery,f.isSpike=e.isSpike,f.isSuperSpike=e.isSuperSpike,f.isCapitalGift=e.isCapitalGift,f.isCapitalGiftLottery=e.isCapitalGiftLottery;var v="开团购买";(e.isSpike||e.isSuperSpike)&&e.eventComing&&(f.spikeComing=!0,f.eventComingLabel=c(e.serverTime,e.groupTypes[1].startTime,v)),(f.isLottery||f.isFreeTrial||f.isDepositeGroup)&&e.eventComing&&(f.lotteryComing=!0,f.eventComingLabel=c(e.serverTime,e.luckyStartTime,v)),e.isGroupFree&&e.freeCoupon&&e.freeCoupon.length>0&&(f.hasFreeCoupons=!0),e.isTZYY&&(f.hasCaptainCoupons=!0),e.isFreeTrial||e.isDepositeGroup?(f.resultLabel=a.freeTrial,f.lotteryWaitingLabel=r.freeTrial):(f.resultLabel=a.default,f.lotteryWaitingLabel=r.default),f.canContact=t.chatEnable,(f.isFreeTrial||f.isDepositeGroup||f.isLottery)&&e.luckyEndTime<e.serverTime&&(2===e.luckyStatus||3===e.luckyStatus?f.resultOn="on":f.resultOn="waiting"),f.groupbuyDesc="开团购买",e.isFreeTrial||e.isDepositeGroup?f.groupbuyDesc="开团购买":e.isCapitalGift||e.isCapitalGiftLottery?f.groupbuyDesc="开团送礼":f.groupbuyDesc="开团购买",m==i.GroupStatus.OnGoing?(f.hasAssociatedGroup=!0,g==i.GroupRole.Member||g==i.GroupRole.Lead?(f.inGroup=!0,f.groupRoleDesc="邀请好友参团"):(f.groupRoleDesc="立即参团",f.showSkuSelector=!0)):(f.hasAssociatedGroup=!1,m!=i.GroupStatus.Success&&m!=i.GroupStatus.Failed&&"1"!==h||(f.showSkuSelector=!0)),"function"==typeof o&&o(f)}},"./components/app/goods_v2/recommend_v2.js":function(e,t,s){"use strict";var o="undefined"!=typeof window?s("./components/common/index.js"):{},n=s("./constants/tracking/goods_detail_v2.js");e.exports={offset:0,count:20,goodsID:"",referrer:"goods",showMallRecommend:null,hasLocalGroup:"0",pageIndex:0,eventType:0,loadedGoodsNum:0,listID:0,init:function(e){e=e||{},this.offset=e.offset||0,this.count=e.count||20,this.goodsID=e.goodsID||"",this.showMallRecommend=e.showMallRecommend||null,this.hasLocalGroup=e.hasLocalGroup?"1":"0",this.pageIndex=e.pageIndex||0,this.eventType=e.eventType||0,this.listID=e.listID||""},requestData:function(e){var t=this,s=this.offset,n=this.count;this.pageIndex&&(n=this.pageIndex+this.count,this.offset=n-this.count,n%2!==0&&(n+=1),this.pageIndex=0);var i=this.showMallRecommend||null,a=(this.goodID,"recommendation?"+o.url.buildQuery({goods_id:t.goodsID,referrer:"goods",with_mall_rec:i?"1":null,offset:s,count:n,list_id:t.listID}));o.request.apiRequest("GET",a,null,function(s){var o=t.processGoods(s.list);t.showMallRecommend=null,e(o)},function(){})},processGoods:function(e){var t=this,s=null,i=null,a=null,r=null;this.showMallRecommend===!0?(i=e.slice(0,3),s=e.slice(3)):s=e;var l=this.listID;if(i&&i.length>0){r=[];var c=[];i.forEach(function(e,s){var i=o.util.extend(n.MallRecommendGoodsClick,{goods_id:t.goodsID,idx:s+"",rec_goods_id:e.goods_id});r.push({goodsID:e.goods_id,goodsName:e.goods_name,price:o.stdFormat.price(e.price,100),imgUrl:e.hd_thumb_url||e.thumb_url,customerNum:e.customer_num,cnt:e.sales,formatCnt:o.stdFormat.sales(e.sales),trackingParams:i}),c.push(e.goods_id)});var u=o.util.extend(n.MallRecommendGoodsImpr,{goods_id:t.goodsID,rec_goods_ids:c.join(",")});o.logger.trackingRecord(u)}return s&&s.length>0&&(a=s.map(function(e,s){var i=o.util.extend(n.RecommendGoodsClick,{goods_id:t.goodsID,rec_goods_id:e.goods_id,list_id:l}),a={rec_goods_id:e.goods_id};return e.p_rec&&(i.p_rec=JSON.stringify(e.p_rec),a.p_rec=JSON.stringify(e.p_rec)),e.ad&&(i.ad=JSON.stringify(e.ad),a.ad=JSON.stringify(e.ad)),{goodsID:e.goods_id,goodsName:e.goods_name,price:o.stdFormat.price(e.price,100),imgUrl:e.hd_thumb_url||e.thumb_url,customerNum:e.customer_num,cnt:e.sales,formatCnt:o.stdFormat.sales(e.sales),listItemName:"doubleGridGoodsItem",extraTrackingParams:i,itemImprParams:a,blockID:"goodsDetailRecommend"}})),{recommend:a,mallRecommend:r}}}},"./components/app/goods_v2/detailList.js":function(e,t,s){"use strict";var o="undefined"!=typeof window?s("./components/common/index.js"):{},n=960,i=640,a={Height:300,Width:640};e.exports=function(e,t){for(var s=Math.min(o.ui.getWindowWidth(),640),r=0;r<e.length;r++){var l=e[r];0===parseInt(l.width||0)&&(l.width=i),0==parseInt(l.height||0)&&(l.height=n);var c=s/l.width;l.height<a.Height?(l.defaultWidth=a.Width*l.height/a.Height,l.defaultHeight=l.height*c,l.marginLeft=(a.Width-l.defaultWidth)*c/2,l.defaultWidth*=c,l.paddingTop=0):(l.defaultWidth=a.Width,l.defaultHeight="auto",l.paddingTop=(l.height-a.Height)*c/2,l.marginLeft=0),l.height=Math.floor(l.height*c,10)}"function"==typeof t&&o.util.call(t,e)}},"./components/app/goods_v2/address.js":function(e,t,s){"use strict";var o="undefined"!=typeof window?s("./components/common/index.js"):{},n=function(e,t){var s=e?e.split(","):[],o=!1,n=t.length;if(n<=0)return!0;for(var i=0;i<n;i++){var a=t[i];if(s.length<=0||s.indexOf(a.province_id+"")>=0){o=!0;break}}return o};e.exports=function(e,t){o.user.hasAccessToken()?o.request.apiRequest("GET","addresses",null,function(s){var i=s||[],a=!n(e,i);o.util.call(t,a)},function(e){o.util.call(t,!1)}):o.util.call(t,!1)}},"./components/common/tracking/impr.js":function(e,t,s){"use strict";var o=s("./components/common/util.js"),n=s("./components/common/ui/util.js"),i=50,a=300;e.exports={scrollContainer:null,imprGap:0,imprDuration:0,imprBlocks:{},topBarHeight:0,bottomBarHeight:0,logger:null,initImprBlocks:function(e){e&&e.blockID&&e.imprBase&&e.view&&(this.imprBlocks[e.blockID]={view:e.view,tubes:[],children:{},imprBase:e.imprBase})},registerImprChild:function(e,t,s){e&&this.imprBlocks[e]&&t&&s&&(this.imprBlocks[e].children[t]=s)},onScroll:function(){this.unionImpr()},unionImpr:function(){var e=this.scrollContainer.scrollTop,t=this.imprBlocks;for(var s in t){var o=t[s]||{};o.view&&0===this.checkInView(o.view)&&this.tubeImpr(e,o)}},tubeImpr:function(e,t){var s=this,i=t.tubes,a=t.children,r=i.length,l=Date.now();if(!(r&&l-i[r-1].ts<this.imprGap&&i[r-1].cnt)){i[r]={ts:l,cnt:0,items:{}};var c={top:this.topBarHeight+e,bottom:n.getWindowHeight()+e-this.bottomBarHeight};for(var u in a){if(a.hasOwnProperty(u)){var d=a[u];if(d.view=d.view||document.querySelector("."+u),!d||!d.view)continue}if(!d.viewOffsetTop){var p=n.getOffsetFromParent(d.view,this.scrollContainer);d.viewOffsetTop=p.offsetTop,d.viewOffsetBottom=d.viewOffsetTop+d.view.offsetHeight,d.viewOffsetMid=(d.viewOffsetTop+d.viewOffsetBottom)/2}var m=!1;m="function"==typeof d.checkImprRes?d.checkImprRes(e):this.checkImprRes(e,d,c),m?null==d.imprTubeIndex&&this.pushImprTube(i,r,d):null!=d.imprTubeIndex&&this.popImprTube(i,d)}i[r].cnt>0&&(i[r].timer=setTimeout(function(){if(i[r]){var e=[],n=[];for(var a in i[r].items)if(i[r].items.hasOwnProperty(a)){var l=i[r].items[a];if(!l||l.viewDestroy)continue;l.logData&&l.logData.ad?n.push(o.extend(l.logData,{idx:l.idx})):e.push(o.extend(l.logData,{idx:l.idx}))}n.length&&s.logger.trackingRecord(o.extend(t.imprBase,{items:JSON.stringify(n),routeKey:"ad"})),e.length&&s.logger.trackingRecord(o.extend(t.imprBase,{items:JSON.stringify(e)}))}},this.imprDuration))}},checkImprRes:function(e,t,s){var o=t.view.offsetHeight/4;return t.viewOffsetMid-o>=s.top&&t.viewOffsetBottom<=s.bottom||t.viewOffsetMid+o<=s.bottom&&t.viewOffsetTop>=s.top},pushImprTube:function(e,t,s){e&&null!=t&&e[t]&&s&&(e[t].cnt++,e[t].items[s.name]=s,s.imprTubeIndex=t)},popImprTube:function(e,t,s){if(t){var o=t.imprTubeIndex;e&&null!=o&&e[o]&&(delete e[o].items[t.name],e[o].cnt--,delete t.imprTubeIndex,s&&(delete t.viewOffsetTop,delete t.viewOffsetBottom,delete t.viewOffsetMid),e[o].cnt<=0&&clearTimeout(e[o].timer))}},clearImprTube:function(e){var t=this.imprBlocks[e]||{},s=t.children||[],o=t.tubes||[];for(var n in s)s.hasOwnProperty(n)&&this.popImprTube(o,s[n],!0)},checkInView:function(e,t){if(!e||!this.scrollContainer)return null;var s=this.scrollContainer.scrollTop,o=n.getWindowHeight(),i=t?s+this.navBarHeight:Math.max(s-o,0),a=s+(t?o-this.footerHeight:2*o),r=0,l=n.getWindowWidth(!0),c=n.getOffsetFromParent(e,this.scrollContainer),u=c.offsetTop,d=c.offsetLeft,p=e.offsetHeight,m=e.offsetWidth,g=u+p;if(g<i)return-1;if(u>a)return 1;var h=d+m;return h<r||d>l?-1:0},init:function(e){e=e||{},this.scrollContainer=e.scrollContainer||document.body,this.imprGap=e.imprGap||i,this.imprDuration=e.imprDuration||a,this.imprBlocks={},this.topBarHeight=e.topBarHeight||0,this.bottomBarHeight=e.bottomBarHeight||0,this.logger=e.logger||s("./components/common/logger.js")}}},"./components/app/goods_v2/goods.scss":function(e,t){},"./components/widgets/SubscribeTopBanner/index.js":function(e,t,s){"use strict";"undefined"!=typeof window&&s("./static/src/assets/scss/module/_subscribe_top_banner.scss");var o=s("./components/vendor/react.min.js"),n=s("./components/vendor/react-dom.min.js"),i="undefined"!=typeof window?s("./components/common/index.js"):{},a=i.constant,r=s("./constants/strategy/subscribe_top_banner.js"),l=o.createClass({displayName:"SubscribeTopBanner",getInitialState:function(){return{show:!1,canSubscribe:!1,bannerLabel:"",bannerBtnText:"立即抢"}},getDefaultProps:function(){return{}},handleClick:function(e){var t=this,a=function(){i.navigation.forward("goods.html?"+i.url.buildQuery({goods_id:t.goodsID,src:t.src,campaign:t.campaign,cid:t.cid}))},r=function(){i.navigation.forward("download.html?"+i.url.buildQuery({src:t.src,campaign:t.campaign,cid:t.cid}))};if(e&&(e.preventDefault(),e.stopPropagation()),t.forceContact)if(t.isSubscribed){if(i.platform.isIOSWeChatPlatform()&&t.hasAppLogin&&a(),i.platform.isAndroidWeChatPlatform())return void i.page.weChatGetAPPInstallState().then(function(e){e.installed?a():r()},function(){t.hasAppLogin?a():r()}).catch(function(){});r()}else{var l=function(){i.logger.trackingRecord({op:"impr",page_name:t.props.type.page,page_section:"subscribe_popup",style:"qrcode"}),t.bannerClicked=!1;var e=s("./components/common/uiWidgets/ForceContact/index.js"),a=document.createElement("DIV");document.body.appendChild(a),n.render(o.createElement(e,{type:t.qrType}),a),setTimeout(function(){i.util.call(t.showQRCodeCallback)},0)};if(t.goodsID){if(t.bannerClicked)return void i.ui.showToast("您点击的太快了~");t.bannerClicked=!0,i.request.apiRequest("POST","subscriber/track",{src:t.cid,goods_id:t.goodsID,group_id:0,group_order_id:0},l,l)}else l()}else r()},componentWillMount:function(){},componentDidMount:function(){var e=this;this.dealWithProps();var t=function(){e.setupModel()};e.title?t():this.requestData(function(){t()})},dealWithProps:function(){var e=this.props||{},t=e.appDownloadInfo||{};this.title=t.title||"";var s=i.user.selfInfo.getInstance();this.forceContact=t.forceContact||s.getTopBannerSubscribe(),this.isSubscribed=i.user.isSubscribed(),this.goodsID=t.goodsID||t.goods_id,this.groupID=t.groupID||t.group_id,this.hasAppLogin=t.hasAppLogin||t.has_app,this.loadCallback=e.loadCallback,this.type=e.type||r.Type.Portal,this.qrType=e.qrType||this.type.qrType,this.showQRCodeCallback=e.showQRCodeCallback,this.src=e.src||this.type.src||"weixin",this.campaign=e.campaign||this.type.campaign||"gzh",this.cid=e.cid||this.type.cid||"",this.stickyDiv=e.stickyDiv,this.stickyClassChange=e.stickyClassChange},requestData:function(e){var t={},s={check_app_login:"1",check_weixin_sp:i.platform.isWeChatPlatform()&&a.ForceContactAppIDs.indexOf(i.config.AppID.WeChat)>=0?"1":null},o=i.user,n=this,r=function(){var s=t.userInfo;n.isSubscribed=s.is_subscribed,n.hasAppLogin=s.has_app;var i=o.selfInfo.getInstance(t.grade);n.forceContact=i.getTopBannerSubscribe();var a=s.app_download||{};n.title=a.title,n.goodsID=a.goods_id,n.groupID=a.group_id,e()},l=function(){t.grade&&t.userInfo&&r()};i.platform.isWeChatPlatform()?o.requestSelfInfo(s,function(e){t.userInfo=e,l()},function(){t.userInfoFailed=!0,e()}):(t.userInfoFailed=!0,e()),o.getGrade(function(e){t.grade=e,l()})},setupModel:function(){var e=this,t=i.platform.isWeChatPlatform()&&!e.isSubscribed&&e.forceContact&&a.GroupBannerV2AppID.indexOf(i.config.AppID.WeChat)>=0&&!!e.title;if(e.setState({show:t,bannerLabel:e.title||"",bannerBtnText:"立即关注"}),e.stickyDiv&&e.stickyClassChange&&t&&"undefined"!=typeof window){var s=i.platform.isIOSWeChatUIWebView();e.stickyClassChange([s?"ios-sticky":"sticky"]),s||setTimeout(function(){var t=e.stickyDiv.offsetTop,s=function(s){var o=window.scrollY>=t;o?e.stickyClassChange(["sticky","sticky-fixed"]):e.stickyClassChange(["sticky"])};s(),window.addEventListener("scroll",s)},0)}"function"==typeof e.loadCallback&&e.loadCallback(t)},render:function(){return o.createElement("div",{className:this.props.parentNodeName},o.createElement("div",{className:"subscribe-top-banner",onClick:this.handleClick,style:{display:this.state.show?"":"none"}},o.createElement("div",{className:"label-banner"},o.createElement("div",{className:"banner-icon"}),o.createElement("p",{className:"banner-label"},this.state.bannerLabel),o.createElement("p",{className:"banner-button"},this.state.bannerBtnText))))}});e.exports={Module:l,Constant:r}},"./static/src/assets/scss/module/_subscribe_top_banner.scss":function(e,t){},"./components/widgets/SubjectSnapshot/index.js":function(e,t,s){"use strict";var o=s("./components/vendor/react.min.js"),n="undefined"!=typeof window?s("./components/common/index.js"):{},i=s("./constants/constant_ui.js").ImgBase64,a=s("./constants/tracking/rank.js"),r=s("./components/common/ui/util.js"),l="undefined"!=typeof window?s("./components/common/platform.js"):{},c=s("./constants/index.js").Other,u=o.createClass({displayName:"SubjectSnapshot",getDefaultProps:function(){return{inViewIndex:-1,list:[],subjectId:0,subjectDesc:"",totalGoodsNum:0,totalGoodsSales:""}},getInitialState:function(){return{defaultImg:i.DefaultSquare,needUpdate:!0}},shouldComponentUpdate:function(e,t){return t.needUpdate},componentDidUpdate:function(){this.setState({needUpdate:!1})},componentDidMount:function(){var e=n.page.getPageScrollData();this.prepare(e),this.onHorizonScroll({})},onHorizonScroll:function(e,t){0===e.detail&&e.stopPropagation();var s=this.refs.listItems,o=l.isIOSWeChatPlatform(),n=r.lazyLoadOnScroller(s,this.props.list.length,{onlyInScroller:!0},o?document.getElementById(c.ListWrapperForIos):null);this.setState({needUpdate:n})},forwardGoods:function(e){e.preventDefault();var t=e.currentTarget.dataset.id,s=e.currentTarget.dataset.forward,s=s||"goods.html?goods_id="+t,o=this.getTransferParams();n.page.setPageScrollPosition(o,function(){n.navigation.forward(s)})},forwardSubject:function(){var e=this,t=a.Field,s=this.getTransferParams();n.page.setPageScrollPosition(s,function(){var s={};s[t.ReferPageName.key]=t.ReferPageName.Rank,s[t.ReferPageSection.key]=t.ReferPageSection.Subject,s.subject_id=e.props.subjectId,e.props.subjectId&&n.navigation.forward("subject.html?"+n.util.joinObjKeyAndValue(s,"=","&"))})},render:function(){var e=this,t=e.generateGoodsList(),s=0==e.props.inViewIndex?"rank-subject-item rank-subject-first-item":"rank-subject-item";return o.createElement("div",{className:s},o.createElement("div",{id:"subject-item-header",onClick:e.forwardSubject},o.createElement("div",{className:"item-header-title"},e.props.subjectDesc),o.createElement("div",{className:"item-subject-total"},e.props.totalGoodsNum,"件商品，累计已团",e.props.totalGoodsSales,"次"),o.createElement("img",{src:i.ArrowsRight})),o.createElement("div",{className:"subject-goods-container"},o.createElement("ul",{className:"subject-goods-wrapper",onScroll:e.onHorizonScroll,ref:"listItems"},t,o.createElement("li",{onClick:e.forward},o.createElement("div",{className:"subject-see-bg"},o.createElement("div",{className:"subject-see-all"},o.createElement("div",null,"全部"),o.createElement("div",{className:"see-all-en-text"},"see all")))))))},generateGoodsList:function(){var e=[],t=this;return t.props.list.map(function(s,n){e.push(o.createElement("li",{key:s.key,"data-id":s.goodsID||s.goodsId,"data-forward":s.forwardUrl,onClick:t.forwardGoods},o.createElement("img",{className:"subject-goods-img",src:t.state.defaultImg,"data-url":s.thumbUrl}),o.createElement("p",{className:"goods-name"},s.shortGoodsName||s.goodsName),o.createElement("div",{className:"goods-price"},o.createElement("b",{className:"price-icon"},"￥"),o.createElement("b",{className:"price-num"},s.price))))}),e},getTransferParams:function(){var e=l.isIOSWeChatPlatform(),t=this,s=this.refs.listItems,o={queries:{item_index:t.props.inViewIndex,sp:e?document.getElementById(c.ListWrapperForIos).scrollTop:null}};return s&&s.scrollLeft&&(o.queries.subject_scroll=t.props.inViewIndex+"_"+s.scrollLeft),o},prepare:function(e){var t=this;e=e||{};var s=e.subjectScroll;if(s){var o=s.split("_"),i=parseInt(o[0],10),a=parseInt(o[1],10);if(i===t.props.inViewIndex&&a>0){var r=t.refs.listItems;if(r){setTimeout(function(){r.scrollLeft=a},0);var l=function(){n.navigation.replaceURL(n.url.buildURL({subject_scroll:null}))};window.wxReady||!n.platform.isWeChatPlatform()?l():(window.wxAfterReady=window.wxAfterReady||[],window.wxAfterReady.push(l))}}}}});e.exports=u}});