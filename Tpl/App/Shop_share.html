<!--新版分享特效-->
<script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
<script type="text/javascript">
var share_url = "{$commonShareUrl}";
var share_title = "{$_SESSION['WAP']['shopset']['name']}";
var share_content = "{$_SESSION['SHOP']['set']['summary']|myTrim}";
var share_img = "{$_SESSION['WAP']['shopset']['url']}{$_SESSION['WAP']['shopset']['sharepic']}";

wx.config({
    debug: false,
    appId: "{$jsapi['appId']}",
    timestamp: "{$jsapi['timestamp']}",
    nonceStr: "{$jsapi['nonceStr']}",
    signature: "{$jsapi['signature']}",
    jsApiList: [
        'checkJsApi',
        'onMenuShareTimeline',
        'onMenuShareAppMessage',
        'onMenuShareQQ',
        'onMenuShareWeibo',
        'hideMenuItems',
        'showMenuItems',
        'hideAllNonBaseMenuItem',
        'showAllNonBaseMenuItem',
    ]
});

wx.ready(function() {
    //开启菜单
    wx.showOptionMenu();
    //隐藏菜单
    //wx.hideOptionMenu();
    //分享给朋友
    wx.onMenuShareAppMessage({
        title: share_title,
        desc: share_content,
        link: share_url,
        imgUrl: share_img,
        trigger: function(res) {
            //alert('用户点击发送给朋友');
        },
        success: function(res) {
            //alert('已分享');
        },
        cancel: function(res) {
            //alert('已取消');
        },
        fail: function(res) {
            //alert(JSON.stringify(res));
        }
    });
    //分享到朋友圈
    wx.onMenuShareTimeline({
        title: share_title,
        link: share_url,
        imgUrl: share_img,
        trigger: function(res) {
            //alert('用户点击分享到朋友圈');
        },
        success: function(res) {
            //alert('已分享');
        },
        cancel: function(res) {
            //alert('已取消');
        },
        fail: function(res) {
            //alert(JSON.stringify(res));
        }
    });
    //分享到QQ
    wx.onMenuShareQQ({
        title: share_title,
        desc: share_content,
        link: share_url,
        imgUrl: share_img,
        trigger: function(res) {
            //alert('用户点击分享到QQ');
        },
        complete: function(res) {
            //alert(JSON.stringify(res));
        },
        success: function(res) {
            //alert('已分享');
        },
        cancel: function(res) {
            //alert('已取消');
        },
        fail: function(res) {
            //alert(JSON.stringify(res));
        }
    });
});	
</script>
